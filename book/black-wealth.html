<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Black Wealth | Black Wealth in Louisville</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Black Wealth | Black Wealth in Louisville" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Black Wealth | Black Wealth in Louisville" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="Nate Kratzer" />


<meta name="date" content="2020-09-09" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="digital-divide.html"/>

<script src="libs/header-attrs-2.8/header-attrs.js"></script>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.3/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="digital-divide.html"><a href="digital-divide.html"><i class="fa fa-check"></i><b>2</b> Digital Divide</a>
<ul>
<li class="chapter" data-level="2.1" data-path="digital-divide.html"><a href="digital-divide.html#overall"><i class="fa fa-check"></i><b>2.1</b> Overall</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="digital-divide.html"><a href="digital-divide.html#high-speed-internet"><i class="fa fa-check"></i><b>2.1.1</b> High Speed Internet</a></li>
<li class="chapter" data-level="2.1.2" data-path="digital-divide.html"><a href="digital-divide.html#devices"><i class="fa fa-check"></i><b>2.1.2</b> Devices</a></li>
<li class="chapter" data-level="2.1.3" data-path="digital-divide.html"><a href="digital-divide.html#internet-and-devices"><i class="fa fa-check"></i><b>2.1.3</b> Internet and Devices</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="digital-divide.html"><a href="digital-divide.html#the-digital-divide-in-jefferson-county"><i class="fa fa-check"></i><b>2.2</b> The Digital Divide in Jefferson County</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="digital-divide.html"><a href="digital-divide.html#internet-speed"><i class="fa fa-check"></i><b>2.2.1</b> Internet Speed</a></li>
<li class="chapter" data-level="2.2.2" data-path="digital-divide.html"><a href="digital-divide.html#poverty"><i class="fa fa-check"></i><b>2.2.2</b> Poverty</a></li>
<li class="chapter" data-level="2.2.3" data-path="digital-divide.html"><a href="digital-divide.html#race"><i class="fa fa-check"></i><b>2.2.3</b> Race</a></li>
<li class="chapter" data-level="2.2.4" data-path="digital-divide.html"><a href="digital-divide.html#age"><i class="fa fa-check"></i><b>2.2.4</b> Age</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="digital-divide.html"><a href="digital-divide.html#child-internet-access"><i class="fa fa-check"></i><b>2.3</b> Child Internet Access</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="digital-divide.html"><a href="digital-divide.html#school-age"><i class="fa fa-check"></i><b>2.3.1</b> School Age</a></li>
<li class="chapter" data-level="2.3.2" data-path="digital-divide.html"><a href="digital-divide.html#metro-council-districts"><i class="fa fa-check"></i><b>2.3.2</b> Metro Council Districts</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="digital-divide.html"><a href="digital-divide.html#internet-as-a-public-utility"><i class="fa fa-check"></i><b>2.4</b> Internet as a Public Utility</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="digital-divide.html"><a href="digital-divide.html#local-efforts"><i class="fa fa-check"></i><b>2.4.1</b> Local Efforts</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="black-wealth.html"><a href="black-wealth.html"><i class="fa fa-check"></i><b>3</b> Black Wealth</a>
<ul>
<li class="chapter" data-level="3.1" data-path="black-wealth.html"><a href="black-wealth.html#introduction-1"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="black-wealth.html"><a href="black-wealth.html#wealth-national"><i class="fa fa-check"></i><b>3.2</b> Wealth (National)</a></li>
<li class="chapter" data-level="3.3" data-path="black-wealth.html"><a href="black-wealth.html#business-ownership-local"><i class="fa fa-check"></i><b>3.3</b> Business Ownership (Local)</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="black-wealth.html"><a href="black-wealth.html#comparison-to-peer-cities"><i class="fa fa-check"></i><b>3.3.1</b> Comparison to peer cities</a></li>
<li class="chapter" data-level="3.3.2" data-path="black-wealth.html"><a href="black-wealth.html#peer-ranking"><i class="fa fa-check"></i><b>3.3.2</b> Peer Ranking</a></li>
<li class="chapter" data-level="3.3.3" data-path="black-wealth.html"><a href="black-wealth.html#local-business-creation"><i class="fa fa-check"></i><b>3.3.3</b> Local business creation</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="black-wealth.html"><a href="black-wealth.html#homeownership-local"><i class="fa fa-check"></i><b>3.4</b> Homeownership (Local)</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="black-wealth.html"><a href="black-wealth.html#home-mortgages"><i class="fa fa-check"></i><b>3.4.1</b> Home Mortgages</a></li>
<li class="chapter" data-level="3.4.2" data-path="black-wealth.html"><a href="black-wealth.html#housing-price-changes"><i class="fa fa-check"></i><b>3.4.2</b> Housing Price Changes</a></li>
<li class="chapter" data-level="3.4.3" data-path="black-wealth.html"><a href="black-wealth.html#home-valuation-by-geography"><i class="fa fa-check"></i><b>3.4.3</b> Home Valuation by Geography</a></li>
<li class="chapter" data-level="3.4.4" data-path="black-wealth.html"><a href="black-wealth.html#property-taxes"><i class="fa fa-check"></i><b>3.4.4</b> Property Taxes</a></li>
<li class="chapter" data-level="3.4.5" data-path="black-wealth.html"><a href="black-wealth.html#undervaluation-and-overtaxation"><i class="fa fa-check"></i><b>3.4.5</b> Undervaluation and Overtaxation</a></li>
<li class="chapter" data-level="3.4.6" data-path="black-wealth.html"><a href="black-wealth.html#homeownership-rates"><i class="fa fa-check"></i><b>3.4.6</b> Homeownership Rates</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="black-wealth.html"><a href="black-wealth.html#household-income-local"><i class="fa fa-check"></i><b>3.5</b> Household Income (Local)</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="black-wealth.html"><a href="black-wealth.html#trendline"><i class="fa fa-check"></i><b>3.5.1</b> Trendline</a></li>
<li class="chapter" data-level="3.5.2" data-path="black-wealth.html"><a href="black-wealth.html#map-1"><i class="fa fa-check"></i><b>3.5.2</b> Map</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="black-wealth.html"><a href="black-wealth.html#the-tip-of-the-iceberg"><i class="fa fa-check"></i><b>3.6</b> The Tip of the Iceberg</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Black Wealth in Louisville</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="black-wealth" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Black Wealth</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="black-wealth.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Knitr options</span></span>
<span id="cb1-2"><a href="black-wealth.html#cb1-2" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>, <span class="at">warning =</span> <span class="cn">FALSE</span>, <span class="at">message =</span> <span class="cn">FALSE</span>,</span>
<span id="cb1-3"><a href="black-wealth.html#cb1-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">dev.args=</span><span class="fu">list</span>(<span class="at">bg=</span><span class="st">&quot;transparent&quot;</span>))</span>
<span id="cb1-4"><a href="black-wealth.html#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="black-wealth.html#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-6"><a href="black-wealth.html#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb1-7"><a href="black-wealth.html#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(showtext)</span>
<span id="cb1-8"><a href="black-wealth.html#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rgdal)</span>
<span id="cb1-9"><a href="black-wealth.html#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-10"><a href="black-wealth.html#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)</span>
<span id="cb1-11"><a href="black-wealth.html#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb1-12"><a href="black-wealth.html#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidygeocoder)</span>
<span id="cb1-13"><a href="black-wealth.html#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb1-14"><a href="black-wealth.html#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb1-15"><a href="black-wealth.html#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-16"><a href="black-wealth.html#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="black-wealth.html#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;Black_wealth/glptools_exports.RData&quot;</span>)</span>
<span id="cb1-18"><a href="black-wealth.html#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;Black_wealth/helper_functions.R&quot;</span>)</span>
<span id="cb1-19"><a href="black-wealth.html#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="black-wealth.html#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(showtext)</span>
<span id="cb1-21"><a href="black-wealth.html#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="fu">showtext_auto</span>()</span>
<span id="cb1-22"><a href="black-wealth.html#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="black-wealth.html#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="fu">font_add</span>(<span class="st">&quot;Montserrat&quot;</span>, <span class="st">&quot;Black_wealth/Montserrat/Montserrat-Regular.ttf&quot;</span>)</span>
<span id="cb1-24"><a href="black-wealth.html#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="fu">font_add</span>(<span class="st">&quot;Montserrat Bold&quot;</span>, <span class="st">&quot;Black_wealth/Montserrat/Montserrat-SemiBold.ttf&quot;</span>)</span>
<span id="cb1-25"><a href="black-wealth.html#cb1-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-26"><a href="black-wealth.html#cb1-26" aria-hidden="true" tabindex="-1"></a>jfco_shp <span class="ot">&lt;-</span> <span class="fu">readOGR</span>(<span class="st">&quot;Black_wealth/JC Tracts&quot;</span>, <span class="at">layer =</span> <span class="st">&quot;JC Tracts&quot;</span>,</span>
<span id="cb1-27"><a href="black-wealth.html#cb1-27" aria-hidden="true" tabindex="-1"></a>                     <span class="at">GDAL1_integer64_policy =</span> <span class="cn">TRUE</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-28"><a href="black-wealth.html#cb1-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-29"><a href="black-wealth.html#cb1-29" aria-hidden="true" tabindex="-1"></a>jfco_sf <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(jfco_shp) <span class="sc">%&gt;%</span></span>
<span id="cb1-30"><a href="black-wealth.html#cb1-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">GEOID =</span> <span class="fu">str_sub</span>(GEO_ID, <span class="at">start =</span> <span class="sc">-</span><span class="dv">11</span>))</span></code></pre></div>
<div id="introduction-1" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Introduction</h2>
<p>There is no universally-accepted definition of wealth within the Black community. Even within the traditional definitions of monetary wealth, there is no direct data on Black Wealth in Louisville. This report looks at the available national data on monetary wealth and then looks at local data in three areas that are closely related to wealth and wealth-building: business ownership, housing finance, and income.</p>
</div>
<div id="wealth-national" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Wealth (National)</h2>
<p>Wealth data remains scarce in general because the subject of wealth can be sensitive and is not tracked in a comprehensive way. Multiple surveys ask about income, and tax records show yearly income, but this data provides an incomplete picture, often missing key metrics such as property ownership, community investment, inherited wealth, etc. As such, our measures of wealth remain indirect.</p>
<p>The national Survey of Consumer Finances (SCF), which occurs every three years, is our best source of wealth data. It measures “all assets over which a family has legal claim that can be used to finance its present and future consumption”. The most recently available data is from 2019, leaving the impact of the ongoing pandemic undefined. The key findings from the <a href="https://www.federalreserve.gov/econres/notes/feds-notes/disparities-in-wealth-by-race-and-ethnicity-in-the-2019-survey-of-consumer-finances-20200928.htm">Federal Reserve report</a> include:</p>
<ul>
<li>The median white family has $188,200, while the median Black family has $24,100, <i>less than 15% of what white families hold.</i></li>
<li>After falling from 2007 to 2013, median Black wealth has increased from 2013-2019; however, the gap between White and Black families remains largely unchanged.</li>
<li>The gap in wealth starts at an early age, with white families under 35 having a median wealth of $25,400 and Black families having $600.</li>
<li>White families are more likely to own homes at any age, but the Black-White gap is largest in households under 35, likely reflecting parental wealth.</li>
</ul>
<p>The Federal Reserve Report concludes that inheritances and other sources of family support are the single largest driver of the racial wealth gap.</p>
</div>
<div id="business-ownership-local" class="section level2 tabset" number="3.3">
<h2><span class="header-section-number">3.3</span> Business Ownership (Local)</h2>
<p>Entrepreneurship is a key driver of wealth creation and generational wealth. Business owners are able to build wealth through their companies, and money spent at locally-owned businesses contribute to local wages and neighborhood development.</p>
<p>Data on business ownership are available for all businesses for the Louisville MSA, which includes 9 surrounding counties. At the county level, data on business ownership is only available for “employer businesses”: businesses that have at least one employee.</p>
<p>While employer businesses only make up about 20% of local registered businesses, they comprise 98.2% of local business revenue, and so we will focus our analysis there. We do note that while Black residents only own 2.3% of employer businesses in Louisville, they own 9.8% of all businesses in the larger Louisville MSA.</p>
<p>Overall, the data show alarge racial disparity in ownership of employer businesses in Louisville.</p>
<div id="comparison-to-peer-cities" class="section level3" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> Comparison to peer cities</h3>
<p>In Jefferson County, Black residents make up 21.9% of the population, and they own 2.3% of employer businesses. The graph below compares this ratio across Louisville’s cities. Cities would fall on the solid line if Black residents were represented equally among employer business owners and the population. The dotted line shows the average level of representation of Black residents among employer business owners in Louisville’s peer cities. Black residents have higher-than-average representation in cities that fall above the dotted line, and they have below-average representation in cities below the line, but no cities, including Louisville, come close to equal representation.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="black-wealth.html#cb2-1" aria-hidden="true" tabindex="-1"></a>pct_nonemp_business <span class="ot">&lt;-</span> <span class="dv">57630</span> <span class="sc">/</span> (<span class="dv">57630</span> <span class="sc">+</span> <span class="dv">14785</span>)</span>
<span id="cb2-2"><a href="black-wealth.html#cb2-2" aria-hidden="true" tabindex="-1"></a>pct_nonemp_revenue <span class="ot">&lt;-</span> <span class="dv">2757359000</span> <span class="sc">/</span> (<span class="dv">2757359000</span> <span class="sc">+</span> <span class="dv">152432057000</span>)</span>
<span id="cb2-3"><a href="black-wealth.html#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="black-wealth.html#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># glpdata::population_msa_1yr %&gt;% filter(race %in% c(&quot;black&quot;, &quot;total&quot;), MSA == &quot;31140&quot;, year == 2019, sex == &quot;total&quot;)</span></span>
<span id="cb2-5"><a href="black-wealth.html#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="black-wealth.html#cb2-6" aria-hidden="true" tabindex="-1"></a>business_ownership_county_clean <span class="ot">&lt;-</span> business_ownership_county <span class="sc">%&gt;%</span></span>
<span id="cb2-7"><a href="black-wealth.html#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(FIPS, year) <span class="sc">%&gt;%</span></span>
<span id="cb2-8"><a href="black-wealth.html#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb2-9"><a href="black-wealth.html#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">firm_percent =</span> firms_num <span class="sc">/</span> firms_num[sex<span class="sc">==</span><span class="st">&quot;total&quot;</span> <span class="sc">&amp;</span> race <span class="sc">==</span> <span class="st">&quot;total&quot;</span>] <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb2-10"><a href="black-wealth.html#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">revenue_percent =</span> revenue_num <span class="sc">/</span> revenue_num[sex<span class="sc">==</span><span class="st">&quot;total&quot;</span> <span class="sc">&amp;</span> race <span class="sc">==</span> <span class="st">&quot;total&quot;</span>] <span class="sc">*</span> <span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-11"><a href="black-wealth.html#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb2-12"><a href="black-wealth.html#cb2-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(race <span class="sc">==</span> <span class="st">&quot;black&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-13"><a href="black-wealth.html#cb2-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull_peers</span>(<span class="at">add_info =</span> T, <span class="at">FIPS_df =</span> FIPS_df) <span class="sc">%&gt;%</span></span>
<span id="cb2-14"><a href="black-wealth.html#cb2-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(current <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb2-15"><a href="black-wealth.html#cb2-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-16"><a href="black-wealth.html#cb2-16" aria-hidden="true" tabindex="-1"></a>business_ownership_county_summary <span class="ot">&lt;-</span> business_ownership_county_clean <span class="sc">%&gt;%</span></span>
<span id="cb2-17"><a href="black-wealth.html#cb2-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(FIPS <span class="sc">!=</span> <span class="st">&quot;21111&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-18"><a href="black-wealth.html#cb2-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">avg_ratio =</span> <span class="fu">mean</span>(firm_percent <span class="sc">/</span> pop_percent)) <span class="sc">%&gt;%</span></span>
<span id="cb2-19"><a href="black-wealth.html#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(avg_ratio)</span>
<span id="cb2-20"><a href="black-wealth.html#cb2-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-21"><a href="black-wealth.html#cb2-21" aria-hidden="true" tabindex="-1"></a>business_ownership_county_clean <span class="sc">%&lt;&gt;%</span></span>
<span id="cb2-22"><a href="black-wealth.html#cb2-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">marker_color =</span> <span class="fu">if_else</span>(city <span class="sc">==</span> <span class="st">&quot;Louisville&quot;</span>, <span class="st">&#39;#d63631&#39;</span>, <span class="st">&quot;#000000&quot;</span>)) </span>
<span id="cb2-23"><a href="black-wealth.html#cb2-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-24"><a href="black-wealth.html#cb2-24" aria-hidden="true" tabindex="-1"></a>lou <span class="ot">&lt;-</span> <span class="fu">filter</span>(business_ownership_county_clean, city <span class="sc">==</span> <span class="st">&quot;Louisville&quot;</span>)</span>
<span id="cb2-25"><a href="black-wealth.html#cb2-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-26"><a href="black-wealth.html#cb2-26" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb2-27"><a href="black-wealth.html#cb2-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> lou<span class="sc">$</span>pop_percent,</span>
<span id="cb2-28"><a href="black-wealth.html#cb2-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> lou<span class="sc">$</span>firm_percent,</span>
<span id="cb2-29"><a href="black-wealth.html#cb2-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">text =</span> lou<span class="sc">$</span>city,</span>
<span id="cb2-30"><a href="black-wealth.html#cb2-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">xref =</span> <span class="st">&quot;x&quot;</span>,</span>
<span id="cb2-31"><a href="black-wealth.html#cb2-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">yref =</span> <span class="st">&quot;y&quot;</span>,</span>
<span id="cb2-32"><a href="black-wealth.html#cb2-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">showarrow =</span> F,</span>
<span id="cb2-33"><a href="black-wealth.html#cb2-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">arrowhead =</span> <span class="dv">0</span>,</span>
<span id="cb2-34"><a href="black-wealth.html#cb2-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">ax =</span> <span class="dv">0</span>,</span>
<span id="cb2-35"><a href="black-wealth.html#cb2-35" aria-hidden="true" tabindex="-1"></a>  <span class="at">ay =</span> <span class="dv">10</span>,</span>
<span id="cb2-36"><a href="black-wealth.html#cb2-36" aria-hidden="true" tabindex="-1"></a>  <span class="at">yanchor =</span> <span class="st">&quot;top&quot;</span>)</span>
<span id="cb2-37"><a href="black-wealth.html#cb2-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-38"><a href="black-wealth.html#cb2-38" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb2-39"><a href="black-wealth.html#cb2-39" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="dv">12</span>,</span>
<span id="cb2-40"><a href="black-wealth.html#cb2-40" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="dv">11</span>,</span>
<span id="cb2-41"><a href="black-wealth.html#cb2-41" aria-hidden="true" tabindex="-1"></a>  <span class="at">text =</span> <span class="st">&quot;Equal representation&quot;</span>,</span>
<span id="cb2-42"><a href="black-wealth.html#cb2-42" aria-hidden="true" tabindex="-1"></a>  <span class="at">xref =</span> <span class="st">&quot;x&quot;</span>,</span>
<span id="cb2-43"><a href="black-wealth.html#cb2-43" aria-hidden="true" tabindex="-1"></a>  <span class="at">yref =</span> <span class="st">&quot;y&quot;</span>,</span>
<span id="cb2-44"><a href="black-wealth.html#cb2-44" aria-hidden="true" tabindex="-1"></a>  <span class="at">showarrow =</span> F,</span>
<span id="cb2-45"><a href="black-wealth.html#cb2-45" aria-hidden="true" tabindex="-1"></a>  <span class="at">arrowhead =</span> <span class="dv">0</span>,</span>
<span id="cb2-46"><a href="black-wealth.html#cb2-46" aria-hidden="true" tabindex="-1"></a>  <span class="at">ax =</span> <span class="dv">0</span>,</span>
<span id="cb2-47"><a href="black-wealth.html#cb2-47" aria-hidden="true" tabindex="-1"></a>  <span class="at">ay =</span> <span class="dv">30</span>,</span>
<span id="cb2-48"><a href="black-wealth.html#cb2-48" aria-hidden="true" tabindex="-1"></a>  <span class="at">xanchor =</span> <span class="st">&quot;left&quot;</span>)</span>
<span id="cb2-49"><a href="black-wealth.html#cb2-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-50"><a href="black-wealth.html#cb2-50" aria-hidden="true" tabindex="-1"></a>c <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb2-51"><a href="black-wealth.html#cb2-51" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="dv">40</span>,</span>
<span id="cb2-52"><a href="black-wealth.html#cb2-52" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="dv">7</span>,</span>
<span id="cb2-53"><a href="black-wealth.html#cb2-53" aria-hidden="true" tabindex="-1"></a>  <span class="at">text =</span> <span class="st">&quot;Average representation in peer cities&quot;</span>,</span>
<span id="cb2-54"><a href="black-wealth.html#cb2-54" aria-hidden="true" tabindex="-1"></a>  <span class="at">xref =</span> <span class="st">&quot;x&quot;</span>,</span>
<span id="cb2-55"><a href="black-wealth.html#cb2-55" aria-hidden="true" tabindex="-1"></a>  <span class="at">yref =</span> <span class="st">&quot;y&quot;</span>,</span>
<span id="cb2-56"><a href="black-wealth.html#cb2-56" aria-hidden="true" tabindex="-1"></a>  <span class="at">showarrow =</span> F,</span>
<span id="cb2-57"><a href="black-wealth.html#cb2-57" aria-hidden="true" tabindex="-1"></a>  <span class="at">arrowhead =</span> <span class="dv">0</span>,</span>
<span id="cb2-58"><a href="black-wealth.html#cb2-58" aria-hidden="true" tabindex="-1"></a>  <span class="at">ax =</span> <span class="dv">0</span>,</span>
<span id="cb2-59"><a href="black-wealth.html#cb2-59" aria-hidden="true" tabindex="-1"></a>  <span class="at">ay =</span> <span class="sc">-</span><span class="dv">16</span>,</span>
<span id="cb2-60"><a href="black-wealth.html#cb2-60" aria-hidden="true" tabindex="-1"></a>  <span class="at">textangle =</span> <span class="sc">-</span><span class="dv">20</span>)</span>
<span id="cb2-61"><a href="black-wealth.html#cb2-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-62"><a href="black-wealth.html#cb2-62" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(business_ownership_county_clean) <span class="sc">%&gt;%</span></span>
<span id="cb2-63"><a href="black-wealth.html#cb2-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_markers</span>(<span class="at">x =</span> <span class="sc">~</span><span class="st">`</span><span class="at">pop_percent</span><span class="st">`</span>, <span class="at">y =</span> <span class="sc">~</span><span class="st">`</span><span class="at">firm_percent</span><span class="st">`</span>, </span>
<span id="cb2-64"><a href="black-wealth.html#cb2-64" aria-hidden="true" tabindex="-1"></a>              <span class="at">text =</span> business_ownership_county_clean<span class="sc">$</span>city,</span>
<span id="cb2-65"><a href="black-wealth.html#cb2-65" aria-hidden="true" tabindex="-1"></a>              <span class="at">color =</span> <span class="sc">~</span><span class="fu">I</span>(marker_color),</span>
<span id="cb2-66"><a href="black-wealth.html#cb2-66" aria-hidden="true" tabindex="-1"></a>              <span class="at">marker =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb2-67"><a href="black-wealth.html#cb2-67" aria-hidden="true" tabindex="-1"></a>              <span class="at">hoverinfo =</span> <span class="st">&#39;text&#39;</span>,</span>
<span id="cb2-68"><a href="black-wealth.html#cb2-68" aria-hidden="true" tabindex="-1"></a>              <span class="at">showlegend =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-69"><a href="black-wealth.html#cb2-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_segments</span>(<span class="at">x =</span> <span class="dv">0</span>, <span class="at">xend =</span> <span class="dv">60</span>, </span>
<span id="cb2-70"><a href="black-wealth.html#cb2-70" aria-hidden="true" tabindex="-1"></a>               <span class="at">y =</span> <span class="dv">0</span>, <span class="at">yend =</span> <span class="dv">60</span>,</span>
<span id="cb2-71"><a href="black-wealth.html#cb2-71" aria-hidden="true" tabindex="-1"></a>               <span class="at">name =</span> <span class="st">&quot;Equality&quot;</span>,</span>
<span id="cb2-72"><a href="black-wealth.html#cb2-72" aria-hidden="true" tabindex="-1"></a>               <span class="at">line =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">&#39;#323844&#39;</span>, <span class="at">width =</span> <span class="dv">1</span>),</span>
<span id="cb2-73"><a href="black-wealth.html#cb2-73" aria-hidden="true" tabindex="-1"></a>              <span class="at">showlegend =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-74"><a href="black-wealth.html#cb2-74" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_segments</span>(<span class="at">x =</span> <span class="dv">0</span>, <span class="at">xend =</span> <span class="dv">60</span>, </span>
<span id="cb2-75"><a href="black-wealth.html#cb2-75" aria-hidden="true" tabindex="-1"></a>               <span class="at">y =</span> <span class="dv">0</span>, <span class="at">yend =</span> business_ownership_county_summary <span class="sc">*</span> <span class="dv">60</span>, </span>
<span id="cb2-76"><a href="black-wealth.html#cb2-76" aria-hidden="true" tabindex="-1"></a>               <span class="at">name =</span> <span class="st">&quot;Peer Average&quot;</span>,</span>
<span id="cb2-77"><a href="black-wealth.html#cb2-77" aria-hidden="true" tabindex="-1"></a>               <span class="at">line =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">&#39;#323844&#39;</span>, <span class="at">width =</span> <span class="dv">1</span>, <span class="at">dash =</span> <span class="st">&#39;dash&#39;</span>),</span>
<span id="cb2-78"><a href="black-wealth.html#cb2-78" aria-hidden="true" tabindex="-1"></a>              <span class="at">showlegend =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-79"><a href="black-wealth.html#cb2-79" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(</span>
<span id="cb2-80"><a href="black-wealth.html#cb2-80" aria-hidden="true" tabindex="-1"></a>    <span class="at">font =</span> <span class="fu">list</span>(<span class="at">family =</span> <span class="st">&quot;Montserrat&quot;</span>),</span>
<span id="cb2-81"><a href="black-wealth.html#cb2-81" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-82"><a href="black-wealth.html#cb2-82" aria-hidden="true" tabindex="-1"></a>    <span class="at">annotations =</span> <span class="fu">list</span>(a, b, c),</span>
<span id="cb2-83"><a href="black-wealth.html#cb2-83" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-84"><a href="black-wealth.html#cb2-84" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Black Business Ownership by Peer City&quot;</span>,</span>
<span id="cb2-85"><a href="black-wealth.html#cb2-85" aria-hidden="true" tabindex="-1"></a>    <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">&quot;Percent of Residents who are Black&quot;</span>),</span>
<span id="cb2-86"><a href="black-wealth.html#cb2-86" aria-hidden="true" tabindex="-1"></a>    <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">&quot;Percent of Businesses Owned by Black Residents&quot;</span>, </span>
<span id="cb2-87"><a href="black-wealth.html#cb2-87" aria-hidden="true" tabindex="-1"></a>                 <span class="at">range =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">20</span>)))</span></code></pre></div>
<div id="htmlwidget-9af1dc94b7f082b4942e" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-9af1dc94b7f082b4942e">{"x":{"visdat":{"39205b385514":["function () ","plotlyVisDat"]},"cur_data":"39205b385514","attrs":{"39205b385514":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"y":{},"type":"scatter","mode":"markers","text":["Birmingham","Indianapolis","Louisville","Grand Rapids","Kansas City","Omaha","Greensboro","Charlotte","Columbus","Cincinnati","Oklahoma City","Tulsa","Greenville","Nashville","Knoxville","Memphis","St. Louis"],"color":{},"marker":{"size":10},"hoverinfo":"text","showlegend":false,"inherit":true},"39205b385514.1":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":0,"y":0,"xend":60,"yend":60,"type":"scatter","mode":"lines","name":"Equality","line":{"color":"#323844","width":1},"showlegend":false,"inherit":true},"39205b385514.2":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":0,"y":0,"xend":60,"yend":9.81685242376217,"type":"scatter","mode":"lines","name":"Peer Average","line":{"color":"#323844","width":1,"dash":"dash"},"showlegend":false,"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"font":{"family":"Montserrat"},"annotations":[{"x":21.8698373096045,"y":2.43490023672641,"text":"Louisville","xref":"x","yref":"y","showarrow":false,"arrowhead":0,"ax":0,"ay":10,"yanchor":"top"},{"x":12,"y":11,"text":"Equal representation","xref":"x","yref":"y","showarrow":false,"arrowhead":0,"ax":0,"ay":30,"xanchor":"left"},{"x":40,"y":7,"text":"Average representation in peer cities","xref":"x","yref":"y","showarrow":false,"arrowhead":0,"ax":0,"ay":-16,"textangle":-20}],"title":"Black Business Ownership by Peer City","xaxis":{"domain":[0,1],"automargin":true,"title":"Percent of Residents who are Black"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Percent of Businesses Owned by Black Residents","range":[0,20]},"hovermode":"closest","showlegend":false},"source":"A","config":{"showSendToCloud":false},"data":[{"x":[43.0372104241979,27.5160459833993,21.8698373096045,9.49638757065283,23.4488728635918,10.9292760229337,34.4102794746401,31.3049235863924,22.6290479503956,25.3969541251035,15.1853271367256,10.1396329065741,17.0978046196312,26.7904340441784,8.92348330662971,53.5370202174904,29.5370137709982],"y":[3.82782847452152,3.31592372160816,2.43490023672641,0.91699604743083,7.73350024341053,1.3943741436286,4.82148012703301,4.26952650748685,3.74007220216606,2.52095337873232,2.04209210252136,1.44169516529203,2.02529238375963,2.6612355736592,1.03367789263088,7.63769523951872,16.5536262066248],"type":"scatter","mode":"markers","text":["Birmingham","Indianapolis","Louisville","Grand Rapids","Kansas City","Omaha","Greensboro","Charlotte","Columbus","Cincinnati","Oklahoma City","Tulsa","Greenville","Nashville","Knoxville","Memphis","St. Louis"],"marker":{"color":["rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(214,54,49,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)"],"size":10,"line":{"color":["rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(214,54,49,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)"]}},"hoverinfo":["text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text","text"],"showlegend":false,"textfont":{"color":["rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(214,54,49,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)","rgba(0,0,0,1)"]},"xaxis":"x","yaxis":"y","frame":null},{"x":[0,60],"y":[0,60],"type":"scatter","mode":"lines","name":"Equality","line":{"color":"#323844","width":1},"showlegend":false,"marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0,60],"y":[0,9.81685242376217],"type":"scatter","mode":"lines","name":"Peer Average","line":{"color":"#323844","width":1,"dash":"dash"},"showlegend":false,"marker":{"color":"rgba(44,160,44,1)","line":{"color":"rgba(44,160,44,1)"}},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="peer-ranking" class="section level3" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> Peer Ranking</h3>
<p>This graph shows the number of employer-businesses that Black residents own for every 100 Black residents.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="black-wealth.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ranking</span>(business_ownership_county_clean,</span>
<span id="cb3-2"><a href="black-wealth.html#cb3-2" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;firms_num_per_100&quot;</span>,</span>
<span id="cb3-3"><a href="black-wealth.html#cb3-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">race =</span> <span class="st">&quot;black&quot;</span>,</span>
<span id="cb3-4"><a href="black-wealth.html#cb3-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot_title =</span> <span class="st">&quot;Black Business Ownership&quot;</span>,</span>
<span id="cb3-5"><a href="black-wealth.html#cb3-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">y_title =</span> <span class="st">&quot;Businesses per 100 residents&quot;</span>,</span>
<span id="cb3-6"><a href="black-wealth.html#cb3-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">caption_text =</span> <span class="st">&quot;Source: Greater Louisville Project</span></span>
<span id="cb3-7"><a href="black-wealth.html#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="st">                        Data from the Census Bureau Annual Business Survey&quot;</span>,</span>
<span id="cb3-8"><a href="black-wealth.html#cb3-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">year =</span> <span class="dv">2017</span>,</span>
<span id="cb3-9"><a href="black-wealth.html#cb3-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">text_size =</span> <span class="dv">2</span>, </span>
<span id="cb3-10"><a href="black-wealth.html#cb3-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">accuracy =</span> <span class="fl">0.01</span>,</span>
<span id="cb3-11"><a href="black-wealth.html#cb3-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">FIPS_df =</span> FIPS_df)</span></code></pre></div>
<p><img src="Black_wealth_files/figure-html/business_ownership_ranking-1.png" width="672" /></p>
</div>
<div id="local-business-creation" class="section level3" number="3.3.3">
<h3><span class="header-section-number">3.3.3</span> Local business creation</h3>
<p>The map below shows business filings throughout 2020 within Jefferson County. These businesses include any type of LLC, corporation, or nonprofit officially registered with the Commonwealth of Kentucky. Compared to the previous data that focuses on larger organizations, it shows that entrepreneurship is widespread throughout the city.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="black-wealth.html#cb4-1" aria-hidden="true" tabindex="-1"></a>cols_spec <span class="ot">&lt;-</span> <span class="fu">cols</span>(<span class="st">&quot;organization_number&quot;</span> <span class="ot">=</span> <span class="fu">col_character</span>(),</span>
<span id="cb4-2"><a href="black-wealth.html#cb4-2" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;comptype&quot;</span> <span class="ot">=</span> <span class="fu">col_number</span>(),</span>
<span id="cb4-3"><a href="black-wealth.html#cb4-3" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;compseq&quot;</span> <span class="ot">=</span> <span class="fu">col_character</span>(),</span>
<span id="cb4-4"><a href="black-wealth.html#cb4-4" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;name&quot;</span> <span class="ot">=</span> <span class="fu">col_character</span>(),</span>
<span id="cb4-5"><a href="black-wealth.html#cb4-5" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;standing&quot;</span> <span class="ot">=</span> <span class="fu">col_character</span>(),</span>
<span id="cb4-6"><a href="black-wealth.html#cb4-6" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;status&quot;</span> <span class="ot">=</span> <span class="fu">col_character</span>(),</span>
<span id="cb4-7"><a href="black-wealth.html#cb4-7" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;org_country&quot;</span> <span class="ot">=</span> <span class="fu">col_character</span>(),</span>
<span id="cb4-8"><a href="black-wealth.html#cb4-8" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;org_state&quot;</span> <span class="ot">=</span> <span class="fu">col_character</span>(),</span>
<span id="cb4-9"><a href="black-wealth.html#cb4-9" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;company_type&quot;</span> <span class="ot">=</span> <span class="fu">col_character</span>(),</span>
<span id="cb4-10"><a href="black-wealth.html#cb4-10" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;registered_agent_name&quot;</span> <span class="ot">=</span> <span class="fu">col_character</span>(),</span>
<span id="cb4-11"><a href="black-wealth.html#cb4-11" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;registered_agent_address_1&quot;</span> <span class="ot">=</span> <span class="fu">col_character</span>(),</span>
<span id="cb4-12"><a href="black-wealth.html#cb4-12" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;registered_agent_address_2&quot;</span> <span class="ot">=</span> <span class="fu">col_character</span>(),</span>
<span id="cb4-13"><a href="black-wealth.html#cb4-13" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;registered_agent_address_3&quot;</span> <span class="ot">=</span> <span class="fu">col_character</span>(),</span>
<span id="cb4-14"><a href="black-wealth.html#cb4-14" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;registered_agent_address_4&quot;</span> <span class="ot">=</span> <span class="fu">col_character</span>(),</span>
<span id="cb4-15"><a href="black-wealth.html#cb4-15" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;registered_agent_city&quot;</span> <span class="ot">=</span> <span class="fu">col_character</span>(),</span>
<span id="cb4-16"><a href="black-wealth.html#cb4-16" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;registered_agent_state&quot;</span> <span class="ot">=</span> <span class="fu">col_character</span>(),</span>
<span id="cb4-17"><a href="black-wealth.html#cb4-17" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;registered_agent_zip&quot;</span> <span class="ot">=</span> <span class="fu">col_character</span>(),</span>
<span id="cb4-18"><a href="black-wealth.html#cb4-18" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;address_1&quot;</span> <span class="ot">=</span> <span class="fu">col_character</span>(),</span>
<span id="cb4-19"><a href="black-wealth.html#cb4-19" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;address_2&quot;</span> <span class="ot">=</span> <span class="fu">col_character</span>(),</span>
<span id="cb4-20"><a href="black-wealth.html#cb4-20" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;address_3&quot;</span> <span class="ot">=</span> <span class="fu">col_character</span>(),</span>
<span id="cb4-21"><a href="black-wealth.html#cb4-21" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;address_4&quot;</span> <span class="ot">=</span> <span class="fu">col_character</span>(),</span>
<span id="cb4-22"><a href="black-wealth.html#cb4-22" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;city&quot;</span> <span class="ot">=</span> <span class="fu">col_character</span>(),</span>
<span id="cb4-23"><a href="black-wealth.html#cb4-23" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;state&quot;</span> <span class="ot">=</span> <span class="fu">col_character</span>(),</span>
<span id="cb4-24"><a href="black-wealth.html#cb4-24" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;zip&quot;</span> <span class="ot">=</span> <span class="fu">col_character</span>(),</span>
<span id="cb4-25"><a href="black-wealth.html#cb4-25" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;file_date&quot;</span> <span class="ot">=</span> <span class="fu">col_date</span>(<span class="st">&quot;%m/%d/%Y&quot;</span>),</span>
<span id="cb4-26"><a href="black-wealth.html#cb4-26" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;organization_date&quot;</span> <span class="ot">=</span> <span class="fu">col_date</span>(<span class="st">&quot;%m/%d/%Y&quot;</span>),</span>
<span id="cb4-27"><a href="black-wealth.html#cb4-27" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;authorization_date&quot;</span> <span class="ot">=</span> <span class="fu">col_date</span>(<span class="st">&quot;%m/%d/%Y&quot;</span>),</span>
<span id="cb4-28"><a href="black-wealth.html#cb4-28" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;record_date&quot;</span> <span class="ot">=</span> <span class="fu">col_date</span>(<span class="st">&quot;%m/%d/%Y&quot;</span>),</span>
<span id="cb4-29"><a href="black-wealth.html#cb4-29" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;registered_agent_res_date&quot;</span> <span class="ot">=</span> <span class="fu">col_date</span>(<span class="st">&quot;%m/%d/%Y&quot;</span>),</span>
<span id="cb4-30"><a href="black-wealth.html#cb4-30" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;expiration_date&quot;</span> <span class="ot">=</span> <span class="fu">col_date</span>(<span class="st">&quot;%m/%d/%Y&quot;</span>),</span>
<span id="cb4-31"><a href="black-wealth.html#cb4-31" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;renewal_date&quot;</span> <span class="ot">=</span> <span class="fu">col_date</span>(<span class="st">&quot;%m/%d/%Y&quot;</span>),</span>
<span id="cb4-32"><a href="black-wealth.html#cb4-32" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;numofcr&quot;</span> <span class="ot">=</span> <span class="fu">col_skip</span>(), </span>
<span id="cb4-33"><a href="black-wealth.html#cb4-33" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;numofshr&quot;</span> <span class="ot">=</span> <span class="fu">col_skip</span>(), </span>
<span id="cb4-34"><a href="black-wealth.html#cb4-34" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;mangnum&quot;</span> <span class="ot">=</span> <span class="fu">col_skip</span>(),</span>
<span id="cb4-35"><a href="black-wealth.html#cb4-35" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;applname&quot;</span> <span class="ot">=</span> <span class="fu">col_skip</span>(), </span>
<span id="cb4-36"><a href="black-wealth.html#cb4-36" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;appltitl&quot;</span> <span class="ot">=</span> <span class="fu">col_skip</span>(), </span>
<span id="cb4-37"><a href="black-wealth.html#cb4-37" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;parpre&quot;</span> <span class="ot">=</span> <span class="fu">col_skip</span>(),</span>
<span id="cb4-38"><a href="black-wealth.html#cb4-38" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;parcomno&quot;</span> <span class="ot">=</span> <span class="fu">col_skip</span>(),</span>
<span id="cb4-39"><a href="black-wealth.html#cb4-39" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;parcom&quot;</span> <span class="ot">=</span> <span class="fu">col_skip</span>(),</span>
<span id="cb4-40"><a href="black-wealth.html#cb4-40" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;parpreno&quot;</span> <span class="ot">=</span> <span class="fu">col_skip</span>(),</span>
<span id="cb4-41"><a href="black-wealth.html#cb4-41" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;for_profit&quot;</span> <span class="ot">=</span> <span class="fu">col_character</span>(),</span>
<span id="cb4-42"><a href="black-wealth.html#cb4-42" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;record_num&quot;</span> <span class="ot">=</span> <span class="fu">col_character</span>())</span>
<span id="cb4-43"><a href="black-wealth.html#cb4-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-44"><a href="black-wealth.html#cb4-44" aria-hidden="true" tabindex="-1"></a><span class="co">#File available at https://drive.google.com/file/d/1cTCZK0A4XTru3HYPLLbDnu0DoKHlB5l1/view?usp=sharing</span></span>
<span id="cb4-45"><a href="black-wealth.html#cb4-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-46"><a href="black-wealth.html#cb4-46" aria-hidden="true" tabindex="-1"></a>all_companies <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(<span class="st">&quot;Black_wealth/AllCompanies20210430.txt&quot;</span>,</span>
<span id="cb4-47"><a href="black-wealth.html#cb4-47" aria-hidden="true" tabindex="-1"></a>                          <span class="at">col_names =</span> <span class="fu">names</span>(cols_spec<span class="sc">$</span>cols),</span>
<span id="cb4-48"><a href="black-wealth.html#cb4-48" aria-hidden="true" tabindex="-1"></a>                          <span class="at">col_types =</span> cols_spec,</span>
<span id="cb4-49"><a href="black-wealth.html#cb4-49" aria-hidden="true" tabindex="-1"></a>                          <span class="at">quote =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb4-50"><a href="black-wealth.html#cb4-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-51"><a href="black-wealth.html#cb4-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Select one record per organization, excluding name reservations</span></span>
<span id="cb4-52"><a href="black-wealth.html#cb4-52" aria-hidden="true" tabindex="-1"></a>all_companies <span class="sc">%&lt;&gt;%</span> </span>
<span id="cb4-53"><a href="black-wealth.html#cb4-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(compseq <span class="sc">==</span> <span class="st">&quot;99999&quot;</span>, </span>
<span id="cb4-54"><a href="black-wealth.html#cb4-54" aria-hidden="true" tabindex="-1"></a>         comptype <span class="sc">%not_in%</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>),</span>
<span id="cb4-55"><a href="black-wealth.html#cb4-55" aria-hidden="true" tabindex="-1"></a>         <span class="fu">year</span>(file_date) <span class="sc">&gt;=</span> <span class="dv">2000</span>)</span>
<span id="cb4-56"><a href="black-wealth.html#cb4-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-57"><a href="black-wealth.html#cb4-57" aria-hidden="true" tabindex="-1"></a>lou_zips <span class="ot">&lt;-</span> glptools<span class="sc">::</span>FIPS_zip <span class="sc">%&gt;%</span> </span>
<span id="cb4-58"><a href="black-wealth.html#cb4-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(FIPS <span class="sc">==</span> <span class="st">&quot;21111&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-59"><a href="black-wealth.html#cb4-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(zip) <span class="sc">%&gt;%</span></span>
<span id="cb4-60"><a href="black-wealth.html#cb4-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.numeric</span>()</span>
<span id="cb4-61"><a href="black-wealth.html#cb4-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-62"><a href="black-wealth.html#cb4-62" aria-hidden="true" tabindex="-1"></a>all_companies <span class="sc">%&lt;&gt;%</span> <span class="fu">filter</span>(zip <span class="sc">%in%</span> lou_zips)</span>
<span id="cb4-63"><a href="black-wealth.html#cb4-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-64"><a href="black-wealth.html#cb4-64" aria-hidden="true" tabindex="-1"></a>zip_pop <span class="ot">&lt;-</span> glpdata<span class="sc">::</span>population_zip <span class="sc">%&gt;%</span></span>
<span id="cb4-65"><a href="black-wealth.html#cb4-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(race <span class="sc">==</span> <span class="st">&quot;total&quot;</span>, sex <span class="sc">==</span> <span class="st">&quot;total&quot;</span>, year <span class="sc">==</span> <span class="dv">2018</span>)</span>
<span id="cb4-66"><a href="black-wealth.html#cb4-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-67"><a href="black-wealth.html#cb4-67" aria-hidden="true" tabindex="-1"></a>t <span class="ot">=</span> glpdata<span class="sc">::</span>population_zip <span class="sc">%&gt;%</span> </span>
<span id="cb4-68"><a href="black-wealth.html#cb4-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(FIPS <span class="sc">==</span> <span class="st">&quot;21111&quot;</span>, sex <span class="sc">==</span> <span class="st">&quot;total&quot;</span>, race <span class="sc">==</span> <span class="st">&quot;total&quot;</span>, year <span class="sc">==</span> <span class="dv">2019</span>)</span>
<span id="cb4-69"><a href="black-wealth.html#cb4-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-70"><a href="black-wealth.html#cb4-70" aria-hidden="true" tabindex="-1"></a>all_companies_zip <span class="ot">&lt;-</span> all_companies <span class="sc">%&gt;%</span></span>
<span id="cb4-71"><a href="black-wealth.html#cb4-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(t) <span class="sc">%&gt;%</span></span>
<span id="cb4-72"><a href="black-wealth.html#cb4-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">year</span>(file_date) <span class="sc">==</span> <span class="dv">2020</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-73"><a href="black-wealth.html#cb4-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(zip) <span class="sc">%&gt;%</span></span>
<span id="cb4-74"><a href="black-wealth.html#cb4-74" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">num_companies =</span> <span class="fu">n</span>(),</span>
<span id="cb4-75"><a href="black-wealth.html#cb4-75" aria-hidden="true" tabindex="-1"></a>            <span class="at">pct_here =</span> <span class="fu">mean</span>(population_in_FIPS <span class="sc">/</span> population_total),</span>
<span id="cb4-76"><a href="black-wealth.html#cb4-76" aria-hidden="true" tabindex="-1"></a>            <span class="at">pct_here =</span> <span class="fu">if_else</span>(<span class="fu">is.na</span>(pct_here), <span class="dv">1</span>, pct_here)) <span class="sc">%&gt;%</span></span>
<span id="cb4-77"><a href="black-wealth.html#cb4-77" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">sum</span>(num_companies <span class="sc">*</span> pct_here))</span>
<span id="cb4-78"><a href="black-wealth.html#cb4-78" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-79"><a href="black-wealth.html#cb4-79" aria-hidden="true" tabindex="-1"></a>all_companies_zip <span class="ot">&lt;-</span> all_companies <span class="sc">%&gt;%</span></span>
<span id="cb4-80"><a href="black-wealth.html#cb4-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">year</span>(file_date) <span class="sc">==</span> <span class="dv">2020</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-81"><a href="black-wealth.html#cb4-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(zip) <span class="sc">%&gt;%</span></span>
<span id="cb4-82"><a href="black-wealth.html#cb4-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">num_companies =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb4-83"><a href="black-wealth.html#cb4-83" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(zip_pop, <span class="at">by =</span> <span class="st">&quot;zip&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-84"><a href="black-wealth.html#cb4-84" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">companies_pp =</span> num_companies <span class="sc">/</span> population_total <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb4-85"><a href="black-wealth.html#cb4-85" aria-hidden="true" tabindex="-1"></a>         <span class="at">companies_pp =</span> <span class="fu">if_else</span>(zip <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">40209</span>, <span class="dv">40025</span>, <span class="dv">40202</span>), <span class="cn">NA_real_</span>, companies_pp))</span>
<span id="cb4-86"><a href="black-wealth.html#cb4-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-87"><a href="black-wealth.html#cb4-87" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">left_join</span>(map_zip, all_companies_zip, <span class="at">by =</span> <span class="st">&quot;zip&quot;</span>)) <span class="sc">+</span> </span>
<span id="cb4-88"><a href="black-wealth.html#cb4-88" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> companies_pp)) <span class="sc">+</span></span>
<span id="cb4-89"><a href="black-wealth.html#cb4-89" aria-hidden="true" tabindex="-1"></a>  <span class="co">#scale_fill_manual(values = viridis::viridis(6, direction = -1), na.value = &quot;grey&quot;) +</span></span>
<span id="cb4-90"><a href="black-wealth.html#cb4-90" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis</span>(<span class="at">name =</span> <span class="st">&quot;Filings per</span><span class="sc">\n</span><span class="st">100 Residents&quot;</span>) <span class="sc">+</span></span>
<span id="cb4-91"><a href="black-wealth.html#cb4-91" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">22</span>, <span class="at">base_family =</span> <span class="st">&quot;Montserrat&quot;</span>) <span class="sc">+</span></span>
<span id="cb4-92"><a href="black-wealth.html#cb4-92" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb4-93"><a href="black-wealth.html#cb4-93" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb4-94"><a href="black-wealth.html#cb4-94" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb4-95"><a href="black-wealth.html#cb4-95" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb4-96"><a href="black-wealth.html#cb4-96" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.border =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb4-97"><a href="black-wealth.html#cb4-97" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>, <span class="at">lineheight =</span> <span class="fl">0.6</span>),</span>
<span id="cb4-98"><a href="black-wealth.html#cb4-98" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">lineheight =</span> <span class="fl">0.6</span>)) <span class="sc">+</span></span>
<span id="cb4-99"><a href="black-wealth.html#cb4-99" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Business Filings, 2020&quot;</span>,</span>
<span id="cb4-100"><a href="black-wealth.html#cb4-100" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Source: Greater Louisville Project</span></span>
<span id="cb4-101"><a href="black-wealth.html#cb4-101" aria-hidden="true" tabindex="-1"></a><span class="st">                  Data from the Kentucky Secretary of State&quot;</span>) <span class="sc">+</span></span>
<span id="cb4-102"><a href="black-wealth.html#cb4-102" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb4-103"><a href="black-wealth.html#cb4-103" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>), <span class="co"># bg of the panel</span></span>
<span id="cb4-104"><a href="black-wealth.html#cb4-104" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>), <span class="co"># bg of the plot</span></span>
<span id="cb4-105"><a href="black-wealth.html#cb4-105" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="st">&quot;transparent&quot;</span>), <span class="co"># get rid of legend bg</span></span>
<span id="cb4-106"><a href="black-wealth.html#cb4-106" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.box.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="st">&quot;transparent&quot;</span>), <span class="co"># get rid of legend panel bg</span></span>
<span id="cb4-107"><a href="black-wealth.html#cb4-107" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>,<span class="at">colour =</span> <span class="cn">NA</span>))</span></code></pre></div>
<p><img src="Black_wealth_files/figure-html/business_filings-1.png" width="672" /></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="black-wealth.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># chunks &lt;- c(seq(1, nrow(all_companies), 1000), nrow(all_companies) + 1)</span></span>
<span id="cb5-2"><a href="black-wealth.html#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb5-3"><a href="black-wealth.html#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co"># for (c in 1:(length(chunks) - 1)) {</span></span>
<span id="cb5-4"><a href="black-wealth.html#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   </span></span>
<span id="cb5-5"><a href="black-wealth.html#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   print(c)</span></span>
<span id="cb5-6"><a href="black-wealth.html#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   </span></span>
<span id="cb5-7"><a href="black-wealth.html#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   temp &lt;- all_companies[chunks[c]:(chunks[c+1] - 1),]</span></span>
<span id="cb5-8"><a href="black-wealth.html#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co">#   </span></span>
<span id="cb5-9"><a href="black-wealth.html#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co">#   this_geo &lt;- temp %&gt;%</span></span>
<span id="cb5-10"><a href="black-wealth.html#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co">#     geocode(</span></span>
<span id="cb5-11"><a href="black-wealth.html#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co">#       street = address_1,</span></span>
<span id="cb5-12"><a href="black-wealth.html#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="co">#       city = city,</span></span>
<span id="cb5-13"><a href="black-wealth.html#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="co">#       state = state,</span></span>
<span id="cb5-14"><a href="black-wealth.html#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="co">#       postalcode = zip,</span></span>
<span id="cb5-15"><a href="black-wealth.html#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="co">#       method = &quot;cascade&quot;)  </span></span>
<span id="cb5-16"><a href="black-wealth.html#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="co">#   </span></span>
<span id="cb5-17"><a href="black-wealth.html#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="co">#   output &lt;- assign_row_join(output, this_geo)</span></span>
<span id="cb5-18"><a href="black-wealth.html#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="co"># }</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="black-wealth.html#cb6-1" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="st">&quot;business registration.xlsx&quot;</span>)</span>
<span id="cb6-2"><a href="black-wealth.html#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="black-wealth.html#cb6-3" aria-hidden="true" tabindex="-1"></a>lou_zips <span class="ot">&lt;-</span> glptools<span class="sc">::</span>FIPS_zip <span class="sc">%&gt;%</span> </span>
<span id="cb6-4"><a href="black-wealth.html#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(FIPS <span class="sc">==</span> <span class="st">&quot;21111&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-5"><a href="black-wealth.html#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(zip) <span class="sc">%&gt;%</span></span>
<span id="cb6-6"><a href="black-wealth.html#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.numeric</span>()</span>
<span id="cb6-7"><a href="black-wealth.html#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="black-wealth.html#cb6-8" aria-hidden="true" tabindex="-1"></a>test <span class="sc">%&lt;&gt;%</span> <span class="fu">filter</span>(<span class="st">`</span><span class="at">Principal Office Zip</span><span class="st">`</span> <span class="sc">%in%</span> lou_zips)</span>
<span id="cb6-9"><a href="black-wealth.html#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="black-wealth.html#cb6-10" aria-hidden="true" tabindex="-1"></a>test <span class="sc">%&lt;&gt;%</span></span>
<span id="cb6-11"><a href="black-wealth.html#cb6-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb6-12"><a href="black-wealth.html#cb6-12" aria-hidden="true" tabindex="-1"></a>    Name,</span>
<span id="cb6-13"><a href="black-wealth.html#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">street =</span> <span class="st">`</span><span class="at">Principal Office Address 1</span><span class="st">`</span>,</span>
<span id="cb6-14"><a href="black-wealth.html#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">city =</span> <span class="st">`</span><span class="at">Principal Office City</span><span class="st">`</span>,</span>
<span id="cb6-15"><a href="black-wealth.html#cb6-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">state =</span> <span class="st">&quot;KY&quot;</span>,</span>
<span id="cb6-16"><a href="black-wealth.html#cb6-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">postalcode =</span> <span class="st">`</span><span class="at">Principal Office Zip</span><span class="st">`</span>)</span>
<span id="cb6-17"><a href="black-wealth.html#cb6-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-18"><a href="black-wealth.html#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Use free default providers first (Census and OSM)</span></span>
<span id="cb6-19"><a href="black-wealth.html#cb6-19" aria-hidden="true" tabindex="-1"></a>test_cascade <span class="ot">&lt;-</span> test <span class="sc">%&gt;%</span></span>
<span id="cb6-20"><a href="black-wealth.html#cb6-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geocode</span>(</span>
<span id="cb6-21"><a href="black-wealth.html#cb6-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">street =</span> street,</span>
<span id="cb6-22"><a href="black-wealth.html#cb6-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">city =</span> city,</span>
<span id="cb6-23"><a href="black-wealth.html#cb6-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">state =</span> state,</span>
<span id="cb6-24"><a href="black-wealth.html#cb6-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">postalcode =</span> postalcode,</span>
<span id="cb6-25"><a href="black-wealth.html#cb6-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">method =</span> <span class="st">&quot;cascade&quot;</span>)</span>
<span id="cb6-26"><a href="black-wealth.html#cb6-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-27"><a href="black-wealth.html#cb6-27" aria-hidden="true" tabindex="-1"></a>test_map <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(test_cascade,</span>
<span id="cb6-28"><a href="black-wealth.html#cb6-28" aria-hidden="true" tabindex="-1"></a>                     <span class="at">coords =</span> <span class="fu">c</span>(<span class="st">&quot;long&quot;</span>, <span class="st">&quot;lat&quot;</span>), </span>
<span id="cb6-29"><a href="black-wealth.html#cb6-29" aria-hidden="true" tabindex="-1"></a>                     <span class="at">crs =</span> <span class="dv">4326</span>)</span>
<span id="cb6-30"><a href="black-wealth.html#cb6-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-31"><a href="black-wealth.html#cb6-31" aria-hidden="true" tabindex="-1"></a><span class="fu">st_crs</span>(jfco_sf) <span class="ot">&lt;-</span> <span class="dv">4326</span></span>
<span id="cb6-32"><a href="black-wealth.html#cb6-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-33"><a href="black-wealth.html#cb6-33" aria-hidden="true" tabindex="-1"></a>t<span class="ot">=</span><span class="fu">st_filter</span>(test_map, jfco_sf)</span>
<span id="cb6-34"><a href="black-wealth.html#cb6-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-35"><a href="black-wealth.html#cb6-35" aria-hidden="true" tabindex="-1"></a><span class="fu">leaflet</span>(t) <span class="sc">%&gt;%</span></span>
<span id="cb6-36"><a href="black-wealth.html#cb6-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addTiles</span>() <span class="sc">%&gt;%</span></span>
<span id="cb6-37"><a href="black-wealth.html#cb6-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addCircleMarkers</span>(<span class="at">label =</span> t<span class="sc">$</span>Name)</span></code></pre></div>
</div>
</div>
<div id="homeownership-local" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Homeownership (Local)</h2>
<p>Homeownership represents a significant component of wealth. Housing reflects historical wealth patterns––parental wealth makes it easier to buy a home––and is a major generator of wealth–historically, homes in most neighborhoods have risen in value, increasing the wealth of those who own them.</p>
<p>The data show stark divides between Black and white families throughout the homeownership process, demonstrating one aspect of the wealth gap.</p>
<div id="home-mortgages" class="section level3 tabset tabset-fade tabset-pills" number="3.4.1">
<h3><span class="header-section-number">3.4.1</span> Home Mortgages</h3>
<div id="mortgages-by-geography" class="section level4" number="3.4.1.1">
<h4><span class="header-section-number">3.4.1.1</span> Mortgages by geography</h4>
<p>In 2019, about 3.8 mortgages were issued per 100 residents in Jefferson County; however, the availability of mortgages varies greatly across the city. Two census tracts saw 0 mortgages issued in 2019, and most of West Louisville saw fewer than 1 mortgage issued per 100 residents. Often mortgage issuance is limited by a loan to value ratio that reflects property values in a given neighborhood relative to the replacement value of the structure Mortgage issuance is much higher in neighborhoods with higher overall value or new construction.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="black-wealth.html#cb7-1" aria-hidden="true" tabindex="-1"></a>home_loan_tract_race <span class="ot">&lt;-</span> home_loan_tract <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="black-wealth.html#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2019</span>, sex <span class="sc">==</span> <span class="st">&quot;total&quot;</span>, race <span class="sc">!=</span> <span class="st">&quot;total&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="black-wealth.html#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(tract, race, denial<span class="sc">:</span>rate_spread)</span>
<span id="cb7-4"><a href="black-wealth.html#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="black-wealth.html#cb7-5" aria-hidden="true" tabindex="-1"></a>home_loan_tract <span class="sc">%&lt;&gt;%</span></span>
<span id="cb7-6"><a href="black-wealth.html#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2019</span>, sex <span class="sc">==</span> <span class="st">&quot;total&quot;</span>, race <span class="sc">==</span> <span class="st">&quot;total&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-7"><a href="black-wealth.html#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(tract, denial<span class="sc">:</span>rate_spread)</span>
<span id="cb7-8"><a href="black-wealth.html#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="black-wealth.html#cb7-9" aria-hidden="true" tabindex="-1"></a>jfco_sf <span class="sc">%&lt;&gt;%</span> <span class="fu">left_join</span>(home_loan_tract, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;GEOID&quot;</span> <span class="ot">=</span> <span class="st">&quot;tract&quot;</span>))</span>
<span id="cb7-10"><a href="black-wealth.html#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="black-wealth.html#cb7-11" aria-hidden="true" tabindex="-1"></a>loan_num_labs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;No mortgages&quot;</span>, <span class="st">&quot;Less than 1&quot;</span>, <span class="st">&quot;1 to 3&quot;</span>, <span class="st">&quot;3 to 5&quot;</span>, <span class="st">&quot;5 to 10&quot;</span>, <span class="st">&quot;More than 10&quot;</span>)</span>
<span id="cb7-12"><a href="black-wealth.html#cb7-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-13"><a href="black-wealth.html#cb7-13" aria-hidden="true" tabindex="-1"></a>jfco_sf <span class="sc">%&lt;&gt;%</span></span>
<span id="cb7-14"><a href="black-wealth.html#cb7-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-15"><a href="black-wealth.html#cb7-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">loan_num_fill =</span> </span>
<span id="cb7-16"><a href="black-wealth.html#cb7-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">case_when</span>(</span>
<span id="cb7-17"><a href="black-wealth.html#cb7-17" aria-hidden="true" tabindex="-1"></a>        loan_number_per_100 <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> loan_num_labs[<span class="dv">1</span>],</span>
<span id="cb7-18"><a href="black-wealth.html#cb7-18" aria-hidden="true" tabindex="-1"></a>        loan_number_per_100 <span class="sc">&lt;=</span> <span class="dv">1</span> <span class="sc">~</span> loan_num_labs[<span class="dv">2</span>],</span>
<span id="cb7-19"><a href="black-wealth.html#cb7-19" aria-hidden="true" tabindex="-1"></a>        loan_number_per_100 <span class="sc">&lt;=</span> <span class="dv">3</span> <span class="sc">~</span> loan_num_labs[<span class="dv">3</span>],</span>
<span id="cb7-20"><a href="black-wealth.html#cb7-20" aria-hidden="true" tabindex="-1"></a>        loan_number_per_100 <span class="sc">&lt;=</span> <span class="dv">5</span> <span class="sc">~</span> loan_num_labs[<span class="dv">4</span>],</span>
<span id="cb7-21"><a href="black-wealth.html#cb7-21" aria-hidden="true" tabindex="-1"></a>        loan_number_per_100 <span class="sc">&lt;=</span> <span class="dv">10</span> <span class="sc">~</span> loan_num_labs[<span class="dv">5</span>],</span>
<span id="cb7-22"><a href="black-wealth.html#cb7-22" aria-hidden="true" tabindex="-1"></a>        loan_number_per_100 <span class="sc">&gt;</span> <span class="dv">10</span> <span class="sc">~</span> loan_num_labs[<span class="dv">6</span>],</span>
<span id="cb7-23"><a href="black-wealth.html#cb7-23" aria-hidden="true" tabindex="-1"></a>        <span class="fu">is.na</span>(loan_number_per_100) <span class="sc">~</span> <span class="cn">NA_character_</span>,</span>
<span id="cb7-24"><a href="black-wealth.html#cb7-24" aria-hidden="true" tabindex="-1"></a>        <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;error!!&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-25"><a href="black-wealth.html#cb7-25" aria-hidden="true" tabindex="-1"></a>      <span class="fu">factor</span>(<span class="at">levels =</span> loan_num_labs, <span class="at">ordered =</span> <span class="cn">TRUE</span>))</span>
<span id="cb7-26"><a href="black-wealth.html#cb7-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-27"><a href="black-wealth.html#cb7-27" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(jfco_sf) <span class="sc">+</span> </span>
<span id="cb7-28"><a href="black-wealth.html#cb7-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> loan_num_fill)) <span class="sc">+</span></span>
<span id="cb7-29"><a href="black-wealth.html#cb7-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> viridis<span class="sc">::</span><span class="fu">viridis</span>(<span class="dv">6</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>), <span class="at">na.value =</span> <span class="st">&quot;grey&quot;</span>) <span class="sc">+</span></span>
<span id="cb7-30"><a href="black-wealth.html#cb7-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">22</span>, <span class="at">base_family =</span> <span class="st">&quot;Montserrat&quot;</span>) <span class="sc">+</span></span>
<span id="cb7-31"><a href="black-wealth.html#cb7-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb7-32"><a href="black-wealth.html#cb7-32" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb7-33"><a href="black-wealth.html#cb7-33" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb7-34"><a href="black-wealth.html#cb7-34" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb7-35"><a href="black-wealth.html#cb7-35" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.border =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb7-36"><a href="black-wealth.html#cb7-36" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb7-37"><a href="black-wealth.html#cb7-37" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">lineheight =</span> <span class="fl">0.6</span>)) <span class="sc">+</span></span>
<span id="cb7-38"><a href="black-wealth.html#cb7-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Mortgages issued per 100 residents in 2019&quot;</span>,</span>
<span id="cb7-39"><a href="black-wealth.html#cb7-39" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Source: Greater Louisville Project</span></span>
<span id="cb7-40"><a href="black-wealth.html#cb7-40" aria-hidden="true" tabindex="-1"></a><span class="st">                  GLP analysis of data from the Consumer Financial Protection Bureau&quot;</span>) <span class="sc">+</span></span>
<span id="cb7-41"><a href="black-wealth.html#cb7-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb7-42"><a href="black-wealth.html#cb7-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>), <span class="co"># bg of the panel</span></span>
<span id="cb7-43"><a href="black-wealth.html#cb7-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>), <span class="co"># bg of the plot</span></span>
<span id="cb7-44"><a href="black-wealth.html#cb7-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="st">&quot;transparent&quot;</span>), <span class="co"># get rid of legend bg</span></span>
<span id="cb7-45"><a href="black-wealth.html#cb7-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.box.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="st">&quot;transparent&quot;</span>), <span class="co"># get rid of legend panel bg</span></span>
<span id="cb7-46"><a href="black-wealth.html#cb7-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>,<span class="at">colour =</span> <span class="cn">NA</span>))</span></code></pre></div>
<p><img src="Black_wealth_files/figure-html/mortgages_per_person-1.png" width="672" /></p>
</div>
<div id="mortgages-by-race" class="section level4" number="3.4.1.2">
<h4><span class="header-section-number">3.4.1.2</span> Mortgages by race</h4>
<p>We can also examine mortgage data by race. Black residents in Louisville received fewer than half the number of mortgages per person that White residents did in 2019.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="black-wealth.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Interactive Mortgage map</span></span>
<span id="cb8-2"><a href="black-wealth.html#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co"># load(&quot;home_loans_detail.RData&quot;)</span></span>
<span id="cb8-3"><a href="black-wealth.html#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># home_loan_detail %&lt;&gt;%</span></span>
<span id="cb8-4"><a href="black-wealth.html#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   select(tract, year, race, sex, loan_status, income, loan, rate) %&gt;%</span></span>
<span id="cb8-5"><a href="black-wealth.html#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   mutate(tract = str_extract(tract, &quot;21111.*&quot;)) %&gt;%</span></span>
<span id="cb8-6"><a href="black-wealth.html#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(year == 2019, loan_status == &quot;approved&quot;)</span></span>
<span id="cb8-7"><a href="black-wealth.html#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb8-8"><a href="black-wealth.html#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co"># num_points &lt;- home_loan_detail %&gt;%</span></span>
<span id="cb8-9"><a href="black-wealth.html#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="co">#   group_by(tract) %&gt;%</span></span>
<span id="cb8-10"><a href="black-wealth.html#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co">#   summarise(n = n(), .groups=&quot;drop&quot;) %&gt;%</span></span>
<span id="cb8-11"><a href="black-wealth.html#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co">#   left_join(glptools::map_tract, by = &quot;tract&quot;) %&gt;%</span></span>
<span id="cb8-12"><a href="black-wealth.html#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="co">#   group_by(tract) %&gt;%</span></span>
<span id="cb8-13"><a href="black-wealth.html#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="co">#   nest() %&gt;%</span></span>
<span id="cb8-14"><a href="black-wealth.html#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="co">#   mutate(points = map(data, function(x) st_sample(x$geometry, x$n))) %&gt;%</span></span>
<span id="cb8-15"><a href="black-wealth.html#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="co">#   unnest()</span></span>
<span id="cb8-16"><a href="black-wealth.html#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb8-17"><a href="black-wealth.html#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="co"># home_loan_detail %&lt;&gt;% arrange(tract)</span></span>
<span id="cb8-18"><a href="black-wealth.html#cb8-18" aria-hidden="true" tabindex="-1"></a><span class="co"># num_points %&lt;&gt;% arrange(tract)</span></span>
<span id="cb8-19"><a href="black-wealth.html#cb8-19" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb8-20"><a href="black-wealth.html#cb8-20" aria-hidden="true" tabindex="-1"></a><span class="co"># st_geometry(home_loan_detail) &lt;- num_points$points</span></span>
<span id="cb8-21"><a href="black-wealth.html#cb8-21" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb8-22"><a href="black-wealth.html#cb8-22" aria-hidden="true" tabindex="-1"></a><span class="co"># library(leaflet)</span></span>
<span id="cb8-23"><a href="black-wealth.html#cb8-23" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb8-24"><a href="black-wealth.html#cb8-24" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb8-25"><a href="black-wealth.html#cb8-25" aria-hidden="true" tabindex="-1"></a><span class="co"># fillpal &lt;- colorFactor(RColorBrewer::brewer.pal(5, &quot;Dark2&quot;), domain = unique(home_loan_detail$race))</span></span>
<span id="cb8-26"><a href="black-wealth.html#cb8-26" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb8-27"><a href="black-wealth.html#cb8-27" aria-hidden="true" tabindex="-1"></a><span class="co"># leaflet(filter(home_loan_detail, is.na(race))) %&gt;%</span></span>
<span id="cb8-28"><a href="black-wealth.html#cb8-28" aria-hidden="true" tabindex="-1"></a><span class="co">#   addCircleMarkers(</span></span>
<span id="cb8-29"><a href="black-wealth.html#cb8-29" aria-hidden="true" tabindex="-1"></a><span class="co">#     radius = ~sqrt(loan / 30000),</span></span>
<span id="cb8-30"><a href="black-wealth.html#cb8-30" aria-hidden="true" tabindex="-1"></a><span class="co">#     #radius = 5,</span></span>
<span id="cb8-31"><a href="black-wealth.html#cb8-31" aria-hidden="true" tabindex="-1"></a><span class="co">#     stroke=T,</span></span>
<span id="cb8-32"><a href="black-wealth.html#cb8-32" aria-hidden="true" tabindex="-1"></a><span class="co">#     fillColor = ~fillpal(race),</span></span>
<span id="cb8-33"><a href="black-wealth.html#cb8-33" aria-hidden="true" tabindex="-1"></a><span class="co">#     color = ~fillpal(race),</span></span>
<span id="cb8-34"><a href="black-wealth.html#cb8-34" aria-hidden="true" tabindex="-1"></a><span class="co">#     weight = 1,</span></span>
<span id="cb8-35"><a href="black-wealth.html#cb8-35" aria-hidden="true" tabindex="-1"></a><span class="co">#     fillOpacity = 0.15,</span></span>
<span id="cb8-36"><a href="black-wealth.html#cb8-36" aria-hidden="true" tabindex="-1"></a><span class="co">#     opacity = 0.4) %&gt;%</span></span>
<span id="cb8-37"><a href="black-wealth.html#cb8-37" aria-hidden="true" tabindex="-1"></a><span class="co">#   addLegend(pal = fillpal, values = unique(home_loan_detail$race)) %&gt;%</span></span>
<span id="cb8-38"><a href="black-wealth.html#cb8-38" aria-hidden="true" tabindex="-1"></a><span class="co">#   addTiles()</span></span>
<span id="cb8-39"><a href="black-wealth.html#cb8-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-40"><a href="black-wealth.html#cb8-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-41"><a href="black-wealth.html#cb8-41" aria-hidden="true" tabindex="-1"></a>mortgage_county <span class="ot">&lt;-</span> home_loan_county</span>
<span id="cb8-42"><a href="black-wealth.html#cb8-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-43"><a href="black-wealth.html#cb8-43" aria-hidden="true" tabindex="-1"></a>mortgage_county <span class="sc">%&lt;&gt;%</span> <span class="fu">filter</span>(FIPS <span class="sc">==</span> <span class="st">&quot;21111&quot;</span>, sex<span class="sc">==</span><span class="st">&quot;total&quot;</span>, race <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;black&quot;</span>, <span class="st">&quot;white&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb8-44"><a href="black-wealth.html#cb8-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Race =</span> race) <span class="sc">%&gt;%</span></span>
<span id="cb8-45"><a href="black-wealth.html#cb8-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Race =</span> <span class="fu">str_to_title</span>(Race))</span>
<span id="cb8-46"><a href="black-wealth.html#cb8-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-47"><a href="black-wealth.html#cb8-47" aria-hidden="true" tabindex="-1"></a><span class="fu">plt_by</span>(mortgage_county, Race, loan_number_per_100, <span class="st">&quot;Mortgages by race&quot;</span>, <span class="at">y_axis =</span> <span class="st">&quot;Mortgages per 100 People&quot;</span>, <span class="at">y_min =</span> <span class="dv">0</span>,</span>
<span id="cb8-48"><a href="black-wealth.html#cb8-48" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption_text =</span> <span class="st">&quot;Source: Greater Louisville Project</span></span>
<span id="cb8-49"><a href="black-wealth.html#cb8-49" aria-hidden="true" tabindex="-1"></a><span class="st">                  GLP analysis of data from the Consumer Financial Protection Bureau&quot;</span>)</span></code></pre></div>
<p><img src="Black_wealth_files/figure-html/mortgage_number_race-1.png" width="672" /></p>
</div>
<div id="mortgage-dollars-by-race" class="section level4" number="3.4.1.3">
<h4><span class="header-section-number">3.4.1.3</span> Mortgage Dollars by race</h4>
<p>The racial disparity in mortgages is even larger when you incorporate the dollar amount of mortgages issued. In 2019, white residents received $2.60 in mortgages for every $1 that Black residents received after adjusting for population size.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="black-wealth.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plt_by</span>(mortgage_county, Race, loan_amount_pp, <span class="st">&quot;Mortgage Lending by race&quot;</span>, <span class="at">y_axis =</span> <span class="st">&quot;Dollars per 100 People&quot;</span>, <span class="at">y_min =</span> <span class="dv">0</span>,</span>
<span id="cb9-2"><a href="black-wealth.html#cb9-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">units =</span> <span class="st">&quot;Dollars&quot;</span>,</span>
<span id="cb9-3"><a href="black-wealth.html#cb9-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption_text =</span> <span class="st">&quot;Source: Greater Louisville Project</span></span>
<span id="cb9-4"><a href="black-wealth.html#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="st">                       GLP analysis of data from the Consumer Financial Protection Bureau&quot;</span>)</span></code></pre></div>
<p><img src="Black_wealth_files/figure-html/mortgage_dollars_race-1.png" width="672" /></p>
</div>
<div id="denial-rates-by-race" class="section level4" number="3.4.1.4">
<h4><span class="header-section-number">3.4.1.4</span> Denial Rates by Race</h4>
<p>Black residents are denied mortgages at a rate roughly twice that of white residents. The mortgage denial rate for Black residents has decreased from a high of 29% in 2008 to a low of 14% in 2019. However, it has not shown signs of decreasing in recent years, and Black residents are more likely to be impacted by the economic impacts of COVID-19, worsening the disparity in 2020 and beyond.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="black-wealth.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plt_by</span>(mortgage_county, Race, denial, <span class="st">&quot;Mortgage Denial by race&quot;</span>, <span class="at">y_axis =</span> <span class="st">&quot;Denial Rate&quot;</span>, <span class="at">y_min =</span> <span class="dv">0</span>, <span class="at">units=</span> <span class="st">&quot;Percent&quot;</span>,</span>
<span id="cb10-2"><a href="black-wealth.html#cb10-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption_text =</span> <span class="st">&quot;Source: Greater Louisville Project</span></span>
<span id="cb10-3"><a href="black-wealth.html#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="st">                       GLP analysis of data from the Consumer Financial Protection Bureau&quot;</span>)</span></code></pre></div>
<p><img src="Black_wealth_files/figure-html/mortgage_denial_race-1.png" width="672" /></p>
</div>
<div id="denial-rates-by-geography" class="section level4" number="3.4.1.5">
<h4><span class="header-section-number">3.4.1.5</span> Denial Rates by Geography</h4>
<p>A major factor in mortgage availability is denial rates. While some areas of town saw few to no mortgage denials, people in many parts of West Louisville experienced denial rates of 30 to 40%.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="black-wealth.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make_map</span>(denial, <span class="at">title =</span> <span class="st">&quot;Mortgage Denial Rate in 2019&quot;</span>, </span>
<span id="cb11-2"><a href="black-wealth.html#cb11-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Percent&quot;</span>, </span>
<span id="cb11-3"><a href="black-wealth.html#cb11-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Source: Greater Louisville Project</span></span>
<span id="cb11-4"><a href="black-wealth.html#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="st">                    GLP analysis of data from the Consumer Financial Protection Bureau&quot;</span>,</span>
<span id="cb11-5"><a href="black-wealth.html#cb11-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">map_obj =</span> jfco_sf)</span></code></pre></div>
<p><img src="Black_wealth_files/figure-html/mortgage_denial-1.png" width="672" /></p>
</div>
<div id="interest-rates-by-geography" class="section level4" number="3.4.1.6">
<h4><span class="header-section-number">3.4.1.6</span> Interest Rates by geography</h4>
<p>For the mortgages that were issued, interest rates varied from around 3.5% to around 5%. While the average interest rate was around 4% for the much of East Louisville, average interest rates in West Louisville were closer to 5%. A 30-year mortgage with an interest rate of 5% requires monthly payments that are 13% higher than a mortgage with an interest rate of 4%.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="black-wealth.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make_map</span>(rate, <span class="at">title =</span> <span class="st">&quot;Mortgage Interest Rate in 2019&quot;</span>, </span>
<span id="cb12-2"><a href="black-wealth.html#cb12-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Percent&quot;</span>,</span>
<span id="cb12-3"><a href="black-wealth.html#cb12-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Source: Greater Louisville Project</span></span>
<span id="cb12-4"><a href="black-wealth.html#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="st">                    GLP analysis of data from the Consumer Financial Protection Bureau&quot;</span>,</span>
<span id="cb12-5"><a href="black-wealth.html#cb12-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">map_obj =</span> jfco_sf)</span></code></pre></div>
<p><img src="Black_wealth_files/figure-html/mortgage_interest-1.png" width="672" /></p>
</div>
</div>
<div id="housing-price-changes" class="section level3 tabset tabset-fade tabset-pills" number="3.4.2">
<h3><span class="header-section-number">3.4.2</span> Housing Price Changes</h3>
<p>As Louisville grows, increasing home prices reflect changes in inflation and increasing demand for homes. Long-term growth in home prices helps homeowners build equity and wealth. Short-term appreciation can be a boon to homeowners with the finances to stay in their home, though it also causes many homeowners and renters to be dislocated from their neighborhood.</p>
<div id="long-term-appreciation" class="section level4" number="3.4.2.1">
<h4><span class="header-section-number">3.4.2.1</span> Long-term appreciation</h4>
<p>This map shows the change in existing home prices across zip codes since 2000 in Jefferson County, controlling for new construction. Since 2000, existing homes in Louisville have increased in value by an average of 62% after accounting for inflation, an average of about 2.4% per year. However, not every area of the city has benefited equally from this growth. Home prices in zip code 40204, which contains the Upper Highlands and Germantown, have more than doubled since 2000. While many zip codes close to downtown also saw high growth, many parts of West Louisville saw slow growth.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="black-wealth.html#cb13-1" aria-hidden="true" tabindex="-1"></a>lou_num <span class="ot">&lt;-</span> HPI_county <span class="sc">%&gt;%</span> <span class="fu">filter</span>(FIPS <span class="sc">==</span> <span class="st">&quot;21111&quot;</span>)</span>
<span id="cb13-2"><a href="black-wealth.html#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="black-wealth.html#cb13-3" aria-hidden="true" tabindex="-1"></a>housing_price_index <span class="ot">&lt;-</span> HPI_zip</span>
<span id="cb13-4"><a href="black-wealth.html#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="black-wealth.html#cb13-5" aria-hidden="true" tabindex="-1"></a>housing_price_index <span class="sc">%&lt;&gt;%</span> </span>
<span id="cb13-6"><a href="black-wealth.html#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2020</span>)</span>
<span id="cb13-7"><a href="black-wealth.html#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="black-wealth.html#cb13-8" aria-hidden="true" tabindex="-1"></a>map_zip <span class="sc">%&lt;&gt;%</span> <span class="fu">left_join</span>(housing_price_index, <span class="at">by =</span> <span class="st">&quot;zip&quot;</span>)</span>
<span id="cb13-9"><a href="black-wealth.html#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="black-wealth.html#cb13-10" aria-hidden="true" tabindex="-1"></a>hpi_change <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Lost value&quot;</span>, <span class="st">&quot;0% - 25%&quot;</span>, <span class="st">&quot;25% - 50%&quot;</span>, <span class="st">&quot;50% - 75%&quot;</span>, <span class="st">&quot;75% - 100%&quot;</span>, <span class="st">&quot;100% - 125%&quot;</span>)</span>
<span id="cb13-11"><a href="black-wealth.html#cb13-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-12"><a href="black-wealth.html#cb13-12" aria-hidden="true" tabindex="-1"></a>hpi_2015_change <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Lost value&quot;</span>, <span class="st">&quot;0% - 10%&quot;</span>, <span class="st">&quot;10% - 20%&quot;</span>, <span class="st">&quot;20% - 30%&quot;</span>, <span class="st">&quot;30% - 40%&quot;</span>, <span class="st">&quot;40% - 50%&quot;</span>)</span>
<span id="cb13-13"><a href="black-wealth.html#cb13-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-14"><a href="black-wealth.html#cb13-14" aria-hidden="true" tabindex="-1"></a>map_zip <span class="sc">%&lt;&gt;%</span></span>
<span id="cb13-15"><a href="black-wealth.html#cb13-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb13-16"><a href="black-wealth.html#cb13-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">hpi_fill =</span> </span>
<span id="cb13-17"><a href="black-wealth.html#cb13-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">case_when</span>(</span>
<span id="cb13-18"><a href="black-wealth.html#cb13-18" aria-hidden="true" tabindex="-1"></a>        HPI <span class="sc">&lt;</span> <span class="dv">100</span> <span class="sc">~</span> hpi_change[<span class="dv">1</span>],</span>
<span id="cb13-19"><a href="black-wealth.html#cb13-19" aria-hidden="true" tabindex="-1"></a>        HPI <span class="sc">&lt;</span> <span class="dv">125</span> <span class="sc">~</span> hpi_change[<span class="dv">2</span>],</span>
<span id="cb13-20"><a href="black-wealth.html#cb13-20" aria-hidden="true" tabindex="-1"></a>        HPI <span class="sc">&lt;</span> <span class="dv">150</span> <span class="sc">~</span> hpi_change[<span class="dv">3</span>],</span>
<span id="cb13-21"><a href="black-wealth.html#cb13-21" aria-hidden="true" tabindex="-1"></a>        HPI <span class="sc">&lt;</span> <span class="dv">175</span> <span class="sc">~</span> hpi_change[<span class="dv">4</span>],</span>
<span id="cb13-22"><a href="black-wealth.html#cb13-22" aria-hidden="true" tabindex="-1"></a>        HPI <span class="sc">&lt;</span> <span class="dv">200</span> <span class="sc">~</span> hpi_change[<span class="dv">5</span>],</span>
<span id="cb13-23"><a href="black-wealth.html#cb13-23" aria-hidden="true" tabindex="-1"></a>        HPI <span class="sc">&lt;</span> <span class="dv">225</span> <span class="sc">~</span> hpi_change[<span class="dv">6</span>],</span>
<span id="cb13-24"><a href="black-wealth.html#cb13-24" aria-hidden="true" tabindex="-1"></a>        <span class="fu">is.na</span>(HPI) <span class="sc">~</span> <span class="cn">NA_character_</span>,</span>
<span id="cb13-25"><a href="black-wealth.html#cb13-25" aria-hidden="true" tabindex="-1"></a>        <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;error!!&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-26"><a href="black-wealth.html#cb13-26" aria-hidden="true" tabindex="-1"></a>      <span class="fu">factor</span>(<span class="at">levels =</span> hpi_change, <span class="at">ordered =</span> <span class="cn">TRUE</span>),</span>
<span id="cb13-27"><a href="black-wealth.html#cb13-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">hpi_2015_fill =</span> </span>
<span id="cb13-28"><a href="black-wealth.html#cb13-28" aria-hidden="true" tabindex="-1"></a>      <span class="fu">case_when</span>(</span>
<span id="cb13-29"><a href="black-wealth.html#cb13-29" aria-hidden="true" tabindex="-1"></a>        HPI5 <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">~</span> hpi_2015_change[<span class="dv">1</span>],</span>
<span id="cb13-30"><a href="black-wealth.html#cb13-30" aria-hidden="true" tabindex="-1"></a>        HPI5 <span class="sc">&lt;</span> <span class="dv">10</span> <span class="sc">~</span> hpi_2015_change[<span class="dv">2</span>],</span>
<span id="cb13-31"><a href="black-wealth.html#cb13-31" aria-hidden="true" tabindex="-1"></a>        HPI5 <span class="sc">&lt;</span> <span class="dv">20</span> <span class="sc">~</span> hpi_2015_change[<span class="dv">3</span>],</span>
<span id="cb13-32"><a href="black-wealth.html#cb13-32" aria-hidden="true" tabindex="-1"></a>        HPI5 <span class="sc">&lt;</span> <span class="dv">30</span> <span class="sc">~</span> hpi_2015_change[<span class="dv">4</span>],</span>
<span id="cb13-33"><a href="black-wealth.html#cb13-33" aria-hidden="true" tabindex="-1"></a>        HPI5 <span class="sc">&lt;</span> <span class="dv">40</span> <span class="sc">~</span> hpi_2015_change[<span class="dv">5</span>],</span>
<span id="cb13-34"><a href="black-wealth.html#cb13-34" aria-hidden="true" tabindex="-1"></a>        HPI5 <span class="sc">&lt;</span> <span class="dv">50</span> <span class="sc">~</span> hpi_2015_change[<span class="dv">6</span>],</span>
<span id="cb13-35"><a href="black-wealth.html#cb13-35" aria-hidden="true" tabindex="-1"></a>        <span class="fu">is.na</span>(HPI) <span class="sc">~</span> <span class="cn">NA_character_</span>,</span>
<span id="cb13-36"><a href="black-wealth.html#cb13-36" aria-hidden="true" tabindex="-1"></a>        <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;error!!&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-37"><a href="black-wealth.html#cb13-37" aria-hidden="true" tabindex="-1"></a>      <span class="fu">factor</span>(<span class="at">levels =</span> hpi_2015_change, <span class="at">ordered =</span> <span class="cn">TRUE</span>))</span>
<span id="cb13-38"><a href="black-wealth.html#cb13-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-39"><a href="black-wealth.html#cb13-39" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(map_zip) <span class="sc">+</span> </span>
<span id="cb13-40"><a href="black-wealth.html#cb13-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> HPI <span class="sc">-</span> <span class="dv">100</span>)) <span class="sc">+</span></span>
<span id="cb13-41"><a href="black-wealth.html#cb13-41" aria-hidden="true" tabindex="-1"></a>  <span class="co">#scale_fill_manual(values = viridis::viridis(6, direction = -1), na.value = &quot;grey&quot;) +</span></span>
<span id="cb13-42"><a href="black-wealth.html#cb13-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">25</span>, <span class="dv">50</span>, <span class="dv">75</span>, <span class="dv">100</span>, <span class="dv">125</span>), </span>
<span id="cb13-43"><a href="black-wealth.html#cb13-43" aria-hidden="true" tabindex="-1"></a>                     <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">24</span>, <span class="dv">126</span>),</span>
<span id="cb13-44"><a href="black-wealth.html#cb13-44" aria-hidden="true" tabindex="-1"></a>                     <span class="at">name =</span> <span class="st">&quot;Percent Increase&quot;</span>) <span class="sc">+</span></span>
<span id="cb13-45"><a href="black-wealth.html#cb13-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">22</span>, <span class="at">base_family =</span> <span class="st">&quot;Montserrat&quot;</span>) <span class="sc">+</span></span>
<span id="cb13-46"><a href="black-wealth.html#cb13-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb13-47"><a href="black-wealth.html#cb13-47" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb13-48"><a href="black-wealth.html#cb13-48" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb13-49"><a href="black-wealth.html#cb13-49" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb13-50"><a href="black-wealth.html#cb13-50" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.border =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb13-51"><a href="black-wealth.html#cb13-51" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">lineheight =</span> <span class="fl">0.6</span>)) <span class="sc">+</span></span>
<span id="cb13-52"><a href="black-wealth.html#cb13-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Change in housing prices since 2000&quot;</span>,</span>
<span id="cb13-53"><a href="black-wealth.html#cb13-53" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Source: Greater Louisville Project</span></span>
<span id="cb13-54"><a href="black-wealth.html#cb13-54" aria-hidden="true" tabindex="-1"></a><span class="st">                  Data from Federal Housing Finance Agency HPI Tables&quot;</span>) <span class="sc">+</span></span>
<span id="cb13-55"><a href="black-wealth.html#cb13-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb13-56"><a href="black-wealth.html#cb13-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>), <span class="co"># bg of the panel</span></span>
<span id="cb13-57"><a href="black-wealth.html#cb13-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>), <span class="co"># bg of the plot</span></span>
<span id="cb13-58"><a href="black-wealth.html#cb13-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="st">&quot;transparent&quot;</span>), <span class="co"># get rid of legend bg</span></span>
<span id="cb13-59"><a href="black-wealth.html#cb13-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.box.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="st">&quot;transparent&quot;</span>), <span class="co"># get rid of legend panel bg</span></span>
<span id="cb13-60"><a href="black-wealth.html#cb13-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>,<span class="at">colour =</span> <span class="cn">NA</span>))</span></code></pre></div>
<p><img src="Black_wealth_files/figure-html/long_term_appreciation-1.png" width="672" /></p>
</div>
<div id="short-term-appreciation" class="section level4" number="3.4.2.2">
<h4><span class="header-section-number">3.4.2.2</span> Short-term appreciation</h4>
<p>Looking at the growth since 2015 highlights zip codes where changes in home prices have been very acute. The average home in Louisville increased in value by 24% between 2015 and 2020. Most zip codes saw total growth of 20% - 35%, while changes in home prices for zip codes in West Louisville range from an increase of 15% in 40212 to an increase of 46% in 40203. Home prices in 40203 have increased by an average of 7.9% per year since 2015, and they threaten to displace many residents from parts of Russell and Old Louisville.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="black-wealth.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(map_zip) <span class="sc">+</span> </span>
<span id="cb14-2"><a href="black-wealth.html#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> HPI5)) <span class="sc">+</span></span>
<span id="cb14-3"><a href="black-wealth.html#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">#scale_fill_manual(values = viridis::viridis(6, direction = -1), na.value = &quot;grey&quot;) +</span></span>
<span id="cb14-4"><a href="black-wealth.html#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis</span>(<span class="at">name =</span> <span class="st">&quot;Percent Increase&quot;</span>) <span class="sc">+</span></span>
<span id="cb14-5"><a href="black-wealth.html#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">22</span>, <span class="at">base_family =</span> <span class="st">&quot;Montserrat&quot;</span>) <span class="sc">+</span></span>
<span id="cb14-6"><a href="black-wealth.html#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb14-7"><a href="black-wealth.html#cb14-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb14-8"><a href="black-wealth.html#cb14-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb14-9"><a href="black-wealth.html#cb14-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb14-10"><a href="black-wealth.html#cb14-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.border =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb14-11"><a href="black-wealth.html#cb14-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">lineheight =</span> <span class="fl">0.6</span>)) <span class="sc">+</span></span>
<span id="cb14-12"><a href="black-wealth.html#cb14-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Change in housing prices since 2015&quot;</span>,</span>
<span id="cb14-13"><a href="black-wealth.html#cb14-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Source: Greater Louisville Project</span></span>
<span id="cb14-14"><a href="black-wealth.html#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="st">                  Data from Federal Housing Finance Agency HPI Tables&quot;</span>) <span class="sc">+</span></span>
<span id="cb14-15"><a href="black-wealth.html#cb14-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb14-16"><a href="black-wealth.html#cb14-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>), <span class="co"># bg of the panel</span></span>
<span id="cb14-17"><a href="black-wealth.html#cb14-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>), <span class="co"># bg of the plot</span></span>
<span id="cb14-18"><a href="black-wealth.html#cb14-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="st">&quot;transparent&quot;</span>), <span class="co"># get rid of legend bg</span></span>
<span id="cb14-19"><a href="black-wealth.html#cb14-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.box.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="st">&quot;transparent&quot;</span>), <span class="co"># get rid of legend panel bg</span></span>
<span id="cb14-20"><a href="black-wealth.html#cb14-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>,<span class="at">colour =</span> <span class="cn">NA</span>))</span></code></pre></div>
<p><img src="Black_wealth_files/figure-html/short_term_appreciation-1.png" width="672" /></p>
</div>
</div>
<div id="home-valuation-by-geography" class="section level3" number="3.4.3">
<h3><span class="header-section-number">3.4.3</span> Home Valuation by Geography</h3>
<p>According to <a href="https://www.brookings.edu/research/devaluation-of-assets-in-black-neighborhoods/">research by Dr. Andre Perry at the Brookings Institute</a>, owner-occupied homes in Black neighborhoods are, on average, undervalued by $48,000 per house in the U.S. In the Louisville Metro Area, the median home value in majority Black neighborhoods is $89,681, but would be $117,593 if houses were not devalued, according to the same research. This difference constitutes a 27% undervaluation from what home values in Black neighborhoods would be if based on structural characteristics (e.g. sq. ft, year built) and neighborhood amenities (e.g. walkability, school districts, commute time) alone.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="black-wealth.html#cb15-1" aria-hidden="true" tabindex="-1"></a>devaluation <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;Black_wealth/devaluation.csv&quot;</span>)</span>
<span id="cb15-2"><a href="black-wealth.html#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="black-wealth.html#cb15-3" aria-hidden="true" tabindex="-1"></a>ranking_switch <span class="ot">&lt;-</span> <span class="cf">function</span>(df, var, <span class="at">plot_title =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb15-4"><a href="black-wealth.html#cb15-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">year =</span> <span class="cn">NULL</span>, <span class="at">sex =</span> <span class="st">&quot;total&quot;</span>, <span class="at">race =</span> <span class="st">&quot;total&quot;</span>,</span>
<span id="cb15-5"><a href="black-wealth.html#cb15-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">order =</span> <span class="st">&quot;Descending&quot;</span>,</span>
<span id="cb15-6"><a href="black-wealth.html#cb15-6" aria-hidden="true" tabindex="-1"></a>                    <span class="at">y_title =</span> <span class="st">&quot;Percent&quot;</span>,</span>
<span id="cb15-7"><a href="black-wealth.html#cb15-7" aria-hidden="true" tabindex="-1"></a>                    <span class="at">caption_text =</span> <span class="st">&quot;&quot;</span>, <span class="at">subtitle_text =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb15-8"><a href="black-wealth.html#cb15-8" aria-hidden="true" tabindex="-1"></a>                    <span class="at">bar_label =</span> <span class="cn">TRUE</span>, <span class="at">sigfig =</span> <span class="dv">3</span>, <span class="at">accuracy =</span> <span class="fl">0.1</span>,</span>
<span id="cb15-9"><a href="black-wealth.html#cb15-9" aria-hidden="true" tabindex="-1"></a>                    label_function, <span class="at">alternate_text =</span> <span class="cn">NULL</span>,</span>
<span id="cb15-10"><a href="black-wealth.html#cb15-10" aria-hidden="true" tabindex="-1"></a>                    <span class="at">ranking_colors =</span> <span class="cn">TRUE</span>, text_size, FIPS_df){</span>
<span id="cb15-11"><a href="black-wealth.html#cb15-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-12"><a href="black-wealth.html#cb15-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Copy variable var to a new column for use with the &#39;$&#39; operator</span></span>
<span id="cb15-13"><a href="black-wealth.html#cb15-13" aria-hidden="true" tabindex="-1"></a>  var <span class="ot">&lt;-</span> dplyr<span class="sc">:::</span><span class="fu">tbl_at_vars</span>(df, <span class="fu">vars</span>(<span class="sc">!!</span><span class="fu">enquo</span>(var)))</span>
<span id="cb15-14"><a href="black-wealth.html#cb15-14" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>var <span class="ot">&lt;-</span> df[[var]]</span>
<span id="cb15-15"><a href="black-wealth.html#cb15-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Filter to sex, race, and year</span></span>
<span id="cb15-16"><a href="black-wealth.html#cb15-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="st">&quot;sex&quot;</span> <span class="sc">%in%</span> <span class="fu">names</span>(df)) df <span class="ot">&lt;-</span> df[df<span class="sc">$</span>sex <span class="sc">==</span> sex,]</span>
<span id="cb15-17"><a href="black-wealth.html#cb15-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="st">&quot;race&quot;</span> <span class="sc">%in%</span> <span class="fu">names</span>(df)) df <span class="ot">&lt;-</span> df[df<span class="sc">$</span>race <span class="sc">==</span> race,]</span>
<span id="cb15-18"><a href="black-wealth.html#cb15-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="st">&quot;year&quot;</span> <span class="sc">%in%</span> <span class="fu">names</span>(df)) {</span>
<span id="cb15-19"><a href="black-wealth.html#cb15-19" aria-hidden="true" tabindex="-1"></a>    df <span class="ot">&lt;-</span> df[df<span class="sc">$</span>year <span class="sc">%in%</span> year,]</span>
<span id="cb15-20"><a href="black-wealth.html#cb15-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">length</span>(year) <span class="sc">&gt;</span> <span class="dv">1</span>) {</span>
<span id="cb15-21"><a href="black-wealth.html#cb15-21" aria-hidden="true" tabindex="-1"></a>      df <span class="sc">%&lt;&gt;%</span></span>
<span id="cb15-22"><a href="black-wealth.html#cb15-22" aria-hidden="true" tabindex="-1"></a>        <span class="fu">group_by_at</span>(df <span class="sc">%cols_in%</span> <span class="fu">c</span>(<span class="st">&quot;MSA&quot;</span>, <span class="st">&quot;FIPS&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb15-23"><a href="black-wealth.html#cb15-23" aria-hidden="true" tabindex="-1"></a>        <span class="fu">summarise</span>(<span class="at">var =</span> <span class="fu">mean</span>(var, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb15-24"><a href="black-wealth.html#cb15-24" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ungroup</span>()</span>
<span id="cb15-25"><a href="black-wealth.html#cb15-25" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb15-26"><a href="black-wealth.html#cb15-26" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb15-27"><a href="black-wealth.html#cb15-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add peer data if not already present</span></span>
<span id="cb15-28"><a href="black-wealth.html#cb15-28" aria-hidden="true" tabindex="-1"></a>   <span class="cf">if</span> (<span class="st">&quot;city&quot;</span> <span class="sc">%not_in%</span> <span class="fu">names</span>(df)) {</span>
<span id="cb15-29"><a href="black-wealth.html#cb15-29" aria-hidden="true" tabindex="-1"></a>     df <span class="sc">%&lt;&gt;%</span></span>
<span id="cb15-30"><a href="black-wealth.html#cb15-30" aria-hidden="true" tabindex="-1"></a>       <span class="fu">pull_peers</span>(<span class="at">add_info =</span> T, <span class="at">FIPS_df =</span> FIPS_df) <span class="sc">%&gt;%</span></span>
<span id="cb15-31"><a href="black-wealth.html#cb15-31" aria-hidden="true" tabindex="-1"></a>       <span class="fu">filter</span>(current <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb15-32"><a href="black-wealth.html#cb15-32" aria-hidden="true" tabindex="-1"></a>   }</span>
<span id="cb15-33"><a href="black-wealth.html#cb15-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-34"><a href="black-wealth.html#cb15-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Sort according to order parameter</span></span>
<span id="cb15-35"><a href="black-wealth.html#cb15-35" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (order <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;descending&quot;</span>, <span class="st">&quot;Descending&quot;</span>)) df <span class="sc">%&lt;&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(var))</span>
<span id="cb15-36"><a href="black-wealth.html#cb15-36" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (order <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;ascending&quot;</span>, <span class="st">&quot;Ascending&quot;</span>))   df <span class="sc">%&lt;&gt;%</span> <span class="fu">arrange</span>(var)</span>
<span id="cb15-37"><a href="black-wealth.html#cb15-37" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">%&lt;&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(var))</span>
<span id="cb15-38"><a href="black-wealth.html#cb15-38" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create numbered city labels for left side of graph</span></span>
<span id="cb15-39"><a href="black-wealth.html#cb15-39" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">%&lt;&gt;%</span></span>
<span id="cb15-40"><a href="black-wealth.html#cb15-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb15-41"><a href="black-wealth.html#cb15-41" aria-hidden="true" tabindex="-1"></a>      <span class="at">rank =</span> <span class="fu">row_number</span>(),</span>
<span id="cb15-42"><a href="black-wealth.html#cb15-42" aria-hidden="true" tabindex="-1"></a>      <span class="at">names =</span> <span class="fu">paste0</span>(rank, <span class="st">&quot;. &quot;</span>, city))</span>
<span id="cb15-43"><a href="black-wealth.html#cb15-43" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Set bar colors</span></span>
<span id="cb15-44"><a href="black-wealth.html#cb15-44" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (ranking_colors) {</span>
<span id="cb15-45"><a href="black-wealth.html#cb15-45" aria-hidden="true" tabindex="-1"></a>    <span class="co"># color_values &lt;- c(&quot;#96ca4f&quot;, &quot;#ffd600&quot;, &quot;#db2834&quot;)</span></span>
<span id="cb15-46"><a href="black-wealth.html#cb15-46" aria-hidden="true" tabindex="-1"></a>    <span class="co"># color_names &lt;- c(&quot;green&quot;, &quot;yellow&quot;, &quot;red&quot;)</span></span>
<span id="cb15-47"><a href="black-wealth.html#cb15-47" aria-hidden="true" tabindex="-1"></a>    <span class="co"># if (order %in% c(&quot;descending&quot;, &quot;Descending&quot;)) {color_names  = rev(color_names)}</span></span>
<span id="cb15-48"><a href="black-wealth.html#cb15-48" aria-hidden="true" tabindex="-1"></a>    <span class="co">#</span></span>
<span id="cb15-49"><a href="black-wealth.html#cb15-49" aria-hidden="true" tabindex="-1"></a>    <span class="co"># breaks &lt;- classInt::classIntervals(na.omit(df$var), 3, style = &quot;jenks&quot;)</span></span>
<span id="cb15-50"><a href="black-wealth.html#cb15-50" aria-hidden="true" tabindex="-1"></a>    <span class="co"># df$color &lt;- NA</span></span>
<span id="cb15-51"><a href="black-wealth.html#cb15-51" aria-hidden="true" tabindex="-1"></a>    <span class="co"># df$color[df$var &lt;= breaks$brks[2]] &lt;- color_names[1]</span></span>
<span id="cb15-52"><a href="black-wealth.html#cb15-52" aria-hidden="true" tabindex="-1"></a>    <span class="co"># df$color[df$var &gt; breaks$brks[2] &amp; df$var &lt;= breaks$brks[3]] &lt;- color_names[2]</span></span>
<span id="cb15-53"><a href="black-wealth.html#cb15-53" aria-hidden="true" tabindex="-1"></a>    <span class="co"># df$color[df$var &gt; breaks$brks[3]] &lt;- color_names[3]</span></span>
<span id="cb15-54"><a href="black-wealth.html#cb15-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-55"><a href="black-wealth.html#cb15-55" aria-hidden="true" tabindex="-1"></a>    color_values <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;#323844&quot;</span>, <span class="st">&quot;#d63631&quot;</span>)</span>
<span id="cb15-56"><a href="black-wealth.html#cb15-56" aria-hidden="true" tabindex="-1"></a>    color_names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;gray&quot;</span>, <span class="st">&quot;red&quot;</span>)</span>
<span id="cb15-57"><a href="black-wealth.html#cb15-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-58"><a href="black-wealth.html#cb15-58" aria-hidden="true" tabindex="-1"></a>    df<span class="sc">$</span>color <span class="ot">&lt;-</span> <span class="st">&quot;red&quot;</span></span>
<span id="cb15-59"><a href="black-wealth.html#cb15-59" aria-hidden="true" tabindex="-1"></a>    df<span class="sc">$</span>color[df<span class="sc">$</span>city <span class="sc">==</span> <span class="st">&quot;Louisville&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;gray&quot;</span></span>
<span id="cb15-60"><a href="black-wealth.html#cb15-60" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb15-61"><a href="black-wealth.html#cb15-61" aria-hidden="true" tabindex="-1"></a>    df<span class="sc">$</span>color <span class="ot">&lt;-</span> <span class="st">&quot;blue&quot;</span></span>
<span id="cb15-62"><a href="black-wealth.html#cb15-62" aria-hidden="true" tabindex="-1"></a>    color_values <span class="ot">&lt;-</span> <span class="st">&quot;#f58021&quot;</span></span>
<span id="cb15-63"><a href="black-wealth.html#cb15-63" aria-hidden="true" tabindex="-1"></a>    color_names <span class="ot">&lt;-</span> <span class="st">&quot;blue&quot;</span></span>
<span id="cb15-64"><a href="black-wealth.html#cb15-64" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb15-65"><a href="black-wealth.html#cb15-65" aria-hidden="true" tabindex="-1"></a>  <span class="co">#if (order %in% c(&quot;descending&quot;, &quot;Descending&quot;)) color_values = rev(color_values)</span></span>
<span id="cb15-66"><a href="black-wealth.html#cb15-66" aria-hidden="true" tabindex="-1"></a>  color_values <span class="ot">=</span> <span class="fu">rev</span>(color_values)</span>
<span id="cb15-67"><a href="black-wealth.html#cb15-67" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create numeric labels</span></span>
<span id="cb15-68"><a href="black-wealth.html#cb15-68" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create numeric labels</span></span>
<span id="cb15-69"><a href="black-wealth.html#cb15-69" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">missing</span>(label_function)) {</span>
<span id="cb15-70"><a href="black-wealth.html#cb15-70" aria-hidden="true" tabindex="-1"></a>    label_text <span class="ot">&lt;-</span> df<span class="sc">$</span>var <span class="sc">%&gt;%</span> <span class="fu">signif</span>(sigfig) <span class="sc">%&gt;%</span> <span class="fu">label_function</span>()</span>
<span id="cb15-71"><a href="black-wealth.html#cb15-71" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (y_title <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Dollars&quot;</span>, <span class="st">&quot;Hourly Wage&quot;</span>)) {</span>
<span id="cb15-72"><a href="black-wealth.html#cb15-72" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">mean</span>(df<span class="sc">$</span>var, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">&gt;</span> <span class="dv">10000</span>) {</span>
<span id="cb15-73"><a href="black-wealth.html#cb15-73" aria-hidden="true" tabindex="-1"></a>      label_text <span class="ot">&lt;-</span> df<span class="sc">$</span>var <span class="sc">%&gt;%</span> <span class="fu">signif</span>(sigfig) <span class="sc">%&gt;%</span> scales<span class="sc">::</span><span class="fu">dollar</span>(<span class="at">accuracy =</span> accuracy, <span class="at">scale =</span> .<span class="dv">001</span>, <span class="at">suffix =</span> <span class="st">&quot;k&quot;</span>)</span>
<span id="cb15-74"><a href="black-wealth.html#cb15-74" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb15-75"><a href="black-wealth.html#cb15-75" aria-hidden="true" tabindex="-1"></a>      label_text <span class="ot">&lt;-</span> df<span class="sc">$</span>var <span class="sc">%&gt;%</span> <span class="fu">signif</span>(sigfig) <span class="sc">%&gt;%</span> scales<span class="sc">::</span><span class="fu">dollar</span>(<span class="at">accuracy =</span> .<span class="dv">01</span>)</span>
<span id="cb15-76"><a href="black-wealth.html#cb15-76" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb15-77"><a href="black-wealth.html#cb15-77" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (stringr<span class="sc">::</span><span class="fu">str_detect</span>(y_title, <span class="st">&quot;Percent&quot;</span>)) {</span>
<span id="cb15-78"><a href="black-wealth.html#cb15-78" aria-hidden="true" tabindex="-1"></a>    label_text <span class="ot">&lt;-</span> df<span class="sc">$</span>var <span class="sc">%&gt;%</span> <span class="fu">signif</span>(sigfig) <span class="sc">%&gt;%</span> scales<span class="sc">::</span><span class="fu">percent</span>(<span class="at">accuracy =</span> accuracy, <span class="at">scale =</span> <span class="dv">1</span>, <span class="at">suffix =</span> <span class="st">&quot;%&quot;</span>)</span>
<span id="cb15-79"><a href="black-wealth.html#cb15-79" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb15-80"><a href="black-wealth.html#cb15-80" aria-hidden="true" tabindex="-1"></a>    label_text <span class="ot">&lt;-</span> df<span class="sc">$</span>var <span class="sc">%&gt;%</span> <span class="fu">signif</span>(sigfig) <span class="sc">%&gt;%</span> scales<span class="sc">::</span><span class="fu">comma</span>(<span class="at">accuracy =</span> accuracy)</span>
<span id="cb15-81"><a href="black-wealth.html#cb15-81" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb15-82"><a href="black-wealth.html#cb15-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-83"><a href="black-wealth.html#cb15-83" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Set text format, highlight and italicise Louisville text, highlight Louisville bar</span></span>
<span id="cb15-84"><a href="black-wealth.html#cb15-84" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>textcolor <span class="ot">&lt;-</span> <span class="st">&quot;#000000&quot;</span></span>
<span id="cb15-85"><a href="black-wealth.html#cb15-85" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>textcolor[df<span class="sc">$</span>city <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Nashville&quot;</span>, <span class="st">&quot;Greenville&quot;</span>, <span class="st">&quot;Oklahoma City&quot;</span>, <span class="st">&quot;Louisville&quot;</span>)] <span class="ot">&lt;-</span> <span class="st">&quot;#000000&quot;</span></span>
<span id="cb15-86"><a href="black-wealth.html#cb15-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-87"><a href="black-wealth.html#cb15-87" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>textfont <span class="ot">&lt;-</span> <span class="st">&quot;Montserrat&quot;</span></span>
<span id="cb15-88"><a href="black-wealth.html#cb15-88" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>textfont[df<span class="sc">$</span>city <span class="sc">==</span> <span class="st">&quot;Louisville&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;Montserrat Bold&quot;</span></span>
<span id="cb15-89"><a href="black-wealth.html#cb15-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-90"><a href="black-wealth.html#cb15-90" aria-hidden="true" tabindex="-1"></a>  label_color_names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;white&quot;</span>, <span class="st">&quot;black&quot;</span>)</span>
<span id="cb15-91"><a href="black-wealth.html#cb15-91" aria-hidden="true" tabindex="-1"></a>  label_color_values <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;#000000&quot;</span>, <span class="st">&quot;#ffffff&quot;</span>)</span>
<span id="cb15-92"><a href="black-wealth.html#cb15-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-93"><a href="black-wealth.html#cb15-93" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>label_color <span class="ot">&lt;-</span> <span class="st">&quot;white&quot;</span></span>
<span id="cb15-94"><a href="black-wealth.html#cb15-94" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>label_color[df<span class="sc">$</span>city <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Nashville&quot;</span>, <span class="st">&quot;Greenville&quot;</span>, <span class="st">&quot;Oklahoma City&quot;</span>, <span class="st">&quot;Louisville&quot;</span>)] <span class="ot">&lt;-</span> <span class="st">&quot;black&quot;</span></span>
<span id="cb15-95"><a href="black-wealth.html#cb15-95" aria-hidden="true" tabindex="-1"></a>  <span class="co">#df$linecolor &lt;- &quot;#ffffff&quot;</span></span>
<span id="cb15-96"><a href="black-wealth.html#cb15-96" aria-hidden="true" tabindex="-1"></a>  <span class="co">#df$linecolor[df$city == &quot;Louisville&quot;] &lt;- &quot;#00a9b7&quot;</span></span>
<span id="cb15-97"><a href="black-wealth.html#cb15-97" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>lou <span class="ot">&lt;-</span> <span class="fu">if_else</span>(df<span class="sc">$</span>city <span class="sc">==</span> <span class="st">&quot;Louisville&quot;</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb15-98"><a href="black-wealth.html#cb15-98" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>text_alignment <span class="ot">&lt;-</span> <span class="fl">1.1</span></span>
<span id="cb15-99"><a href="black-wealth.html#cb15-99" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(alternate_text)) df<span class="sc">$</span>text_alignment[df<span class="sc">$</span>rank <span class="sc">%in%</span> alternate_text] <span class="ot">&lt;-</span> <span class="sc">-</span><span class="fl">0.1</span></span>
<span id="cb15-100"><a href="black-wealth.html#cb15-100" aria-hidden="true" tabindex="-1"></a>  <span class="do">### PLOT GRAPH</span></span>
<span id="cb15-101"><a href="black-wealth.html#cb15-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-102"><a href="black-wealth.html#cb15-102" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Initial plot</span></span>
<span id="cb15-103"><a href="black-wealth.html#cb15-103" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> df,</span>
<span id="cb15-104"><a href="black-wealth.html#cb15-104" aria-hidden="true" tabindex="-1"></a>              <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(names, <span class="at">levels =</span> <span class="fu">rev</span>(names)),</span>
<span id="cb15-105"><a href="black-wealth.html#cb15-105" aria-hidden="true" tabindex="-1"></a>                  <span class="at">y =</span> var,</span>
<span id="cb15-106"><a href="black-wealth.html#cb15-106" aria-hidden="true" tabindex="-1"></a>                  <span class="at">fill  =</span> <span class="fu">factor</span>(color, <span class="at">levels =</span> color_names, <span class="at">ordered =</span> <span class="cn">TRUE</span>)))</span>
<span id="cb15-107"><a href="black-wealth.html#cb15-107" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">fill =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> <span class="cn">FALSE</span>)</span>
<span id="cb15-108"><a href="black-wealth.html#cb15-108" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add bars</span></span>
<span id="cb15-109"><a href="black-wealth.html#cb15-109" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> p <span class="sc">+</span></span>
<span id="cb15-110"><a href="black-wealth.html#cb15-110" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>,</span>
<span id="cb15-111"><a href="black-wealth.html#cb15-111" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> text_size) <span class="sc">+</span></span>
<span id="cb15-112"><a href="black-wealth.html#cb15-112" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb15-113"><a href="black-wealth.html#cb15-113" aria-hidden="true" tabindex="-1"></a>    ggthemes<span class="sc">::</span><span class="fu">theme_tufte</span>()</span>
<span id="cb15-114"><a href="black-wealth.html#cb15-114" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> color_values)</span>
<span id="cb15-115"><a href="black-wealth.html#cb15-115" aria-hidden="true" tabindex="-1"></a>  <span class="co">#p &lt;- p + scale_color_manual(values = c(&quot;#ffffff&quot;, &quot;#00a9b7&quot;))</span></span>
<span id="cb15-116"><a href="black-wealth.html#cb15-116" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add features</span></span>
<span id="cb15-117"><a href="black-wealth.html#cb15-117" aria-hidden="true" tabindex="-1"></a>  title_scale <span class="ot">&lt;-</span> <span class="fu">min</span>(<span class="dv">1</span>, <span class="dv">48</span> <span class="sc">/</span> <span class="fu">nchar</span>(plot_title))</span>
<span id="cb15-118"><a href="black-wealth.html#cb15-118" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">&quot;Montserrat&quot;</span>),</span>
<span id="cb15-119"><a href="black-wealth.html#cb15-119" aria-hidden="true" tabindex="-1"></a>                 <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span> <span class="sc">*</span> title_scale <span class="sc">*</span> text_size, <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">b =</span> <span class="dv">10</span>, <span class="at">unit =</span> <span class="st">&quot;pt&quot;</span>)),</span>
<span id="cb15-120"><a href="black-wealth.html#cb15-120" aria-hidden="true" tabindex="-1"></a>                 <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>,</span>
<span id="cb15-121"><a href="black-wealth.html#cb15-121" aria-hidden="true" tabindex="-1"></a>                                            <span class="at">size =</span> <span class="dv">10</span> <span class="sc">*</span> text_size,</span>
<span id="cb15-122"><a href="black-wealth.html#cb15-122" aria-hidden="true" tabindex="-1"></a>                                            <span class="at">color =</span> <span class="fu">rev</span>(df<span class="sc">$</span>textcolor),</span>
<span id="cb15-123"><a href="black-wealth.html#cb15-123" aria-hidden="true" tabindex="-1"></a>                                            <span class="at">family =</span> <span class="fu">rev</span>(df<span class="sc">$</span>textfont)),</span>
<span id="cb15-124"><a href="black-wealth.html#cb15-124" aria-hidden="true" tabindex="-1"></a>                 <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span> <span class="sc">*</span> text_size),</span>
<span id="cb15-125"><a href="black-wealth.html#cb15-125" aria-hidden="true" tabindex="-1"></a>                 <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb15-126"><a href="black-wealth.html#cb15-126" aria-hidden="true" tabindex="-1"></a>                 <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb15-127"><a href="black-wealth.html#cb15-127" aria-hidden="true" tabindex="-1"></a>                 <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span> <span class="sc">*</span> text_size, <span class="at">lineheight =</span> <span class="fl">0.5</span>))</span>
<span id="cb15-128"><a href="black-wealth.html#cb15-128" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(subtitle_text <span class="sc">!=</span> <span class="st">&quot;&quot;</span>){</span>
<span id="cb15-129"><a href="black-wealth.html#cb15-129" aria-hidden="true" tabindex="-1"></a>    p <span class="ot">&lt;-</span> p <span class="sc">+</span></span>
<span id="cb15-130"><a href="black-wealth.html#cb15-130" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">subtitle =</span> subtitle_text) <span class="sc">+</span></span>
<span id="cb15-131"><a href="black-wealth.html#cb15-131" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">10</span> <span class="sc">*</span> text_size))</span>
<span id="cb15-132"><a href="black-wealth.html#cb15-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-133"><a href="black-wealth.html#cb15-133" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb15-134"><a href="black-wealth.html#cb15-134" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add numeric labels to bars based on bar_label parameter</span></span>
<span id="cb15-135"><a href="black-wealth.html#cb15-135" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (y_title <span class="sc">!=</span> <span class="st">&quot;&quot;</span> <span class="sc">&amp;</span> bar_label) {</span>
<span id="cb15-136"><a href="black-wealth.html#cb15-136" aria-hidden="true" tabindex="-1"></a>    p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> label_text,</span>
<span id="cb15-137"><a href="black-wealth.html#cb15-137" aria-hidden="true" tabindex="-1"></a>                           <span class="at">hjust =</span> text_alignment,</span>
<span id="cb15-138"><a href="black-wealth.html#cb15-138" aria-hidden="true" tabindex="-1"></a>                           <span class="at">color =</span> <span class="fu">factor</span>(label_color),</span>
<span id="cb15-139"><a href="black-wealth.html#cb15-139" aria-hidden="true" tabindex="-1"></a>                           <span class="at">family =</span> textfont),</span>
<span id="cb15-140"><a href="black-wealth.html#cb15-140" aria-hidden="true" tabindex="-1"></a>                       <span class="at">size =</span> <span class="fl">4.5</span> <span class="sc">*</span> text_size) <span class="sc">+</span></span>
<span id="cb15-141"><a href="black-wealth.html#cb15-141" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_colour_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">&quot;#000000&quot;</span>, <span class="st">&quot;#ffffff&quot;</span>))</span>
<span id="cb15-142"><a href="black-wealth.html#cb15-142" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb15-143"><a href="black-wealth.html#cb15-143" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add vertical line to the left side of the bars based on the h_line parameter</span></span>
<span id="cb15-144"><a href="black-wealth.html#cb15-144" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">min</span>(df<span class="sc">$</span>var, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">&lt;</span> <span class="dv">0</span>) p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">&quot;longdash&quot;</span>, <span class="at">size =</span> <span class="dv">2</span>)</span>
<span id="cb15-145"><a href="black-wealth.html#cb15-145" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add remaining text</span></span>
<span id="cb15-146"><a href="black-wealth.html#cb15-146" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> plot_title,</span>
<span id="cb15-147"><a href="black-wealth.html#cb15-147" aria-hidden="true" tabindex="-1"></a>                <span class="at">y =</span> y_title,</span>
<span id="cb15-148"><a href="black-wealth.html#cb15-148" aria-hidden="true" tabindex="-1"></a>                <span class="at">x =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb15-149"><a href="black-wealth.html#cb15-149" aria-hidden="true" tabindex="-1"></a>                <span class="at">caption =</span> caption_text)</span>
<span id="cb15-150"><a href="black-wealth.html#cb15-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-151"><a href="black-wealth.html#cb15-151" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> p <span class="sc">+</span></span>
<span id="cb15-152"><a href="black-wealth.html#cb15-152" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb15-153"><a href="black-wealth.html#cb15-153" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>), <span class="co"># bg of the panel</span></span>
<span id="cb15-154"><a href="black-wealth.html#cb15-154" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>), <span class="co"># bg of the plot</span></span>
<span id="cb15-155"><a href="black-wealth.html#cb15-155" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="st">&quot;transparent&quot;</span>), <span class="co"># get rid of legend bg</span></span>
<span id="cb15-156"><a href="black-wealth.html#cb15-156" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.box.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="st">&quot;transparent&quot;</span>), <span class="co"># get rid of legend panel bg</span></span>
<span id="cb15-157"><a href="black-wealth.html#cb15-157" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">colour =</span> <span class="cn">NA</span>))</span>
<span id="cb15-158"><a href="black-wealth.html#cb15-158" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-159"><a href="black-wealth.html#cb15-159" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">expand_limits</span>(<span class="at">y =</span> <span class="dv">15</span>)</span>
<span id="cb15-160"><a href="black-wealth.html#cb15-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-161"><a href="black-wealth.html#cb15-161" aria-hidden="true" tabindex="-1"></a>  p</span>
<span id="cb15-162"><a href="black-wealth.html#cb15-162" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-163"><a href="black-wealth.html#cb15-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-164"><a href="black-wealth.html#cb15-164" aria-hidden="true" tabindex="-1"></a><span class="fu">ranking_switch</span>(devaluation,</span>
<span id="cb15-165"><a href="black-wealth.html#cb15-165" aria-hidden="true" tabindex="-1"></a>        devaluation,</span>
<span id="cb15-166"><a href="black-wealth.html#cb15-166" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot_title =</span> <span class="st">&quot;Devaluation of Homes in Black Neighborhoods&quot;</span>,</span>
<span id="cb15-167"><a href="black-wealth.html#cb15-167" aria-hidden="true" tabindex="-1"></a>        <span class="at">text_size =</span> <span class="dv">2</span>, </span>
<span id="cb15-168"><a href="black-wealth.html#cb15-168" aria-hidden="true" tabindex="-1"></a>        <span class="at">alternate_text=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">17</span>,</span>
<span id="cb15-169"><a href="black-wealth.html#cb15-169" aria-hidden="true" tabindex="-1"></a>        <span class="at">FIPS_df =</span> FIPS_df,</span>
<span id="cb15-170"><a href="black-wealth.html#cb15-170" aria-hidden="true" tabindex="-1"></a>        <span class="at">caption =</span> <span class="st">&quot;Source: Greater Louisville Project</span></span>
<span id="cb15-171"><a href="black-wealth.html#cb15-171" aria-hidden="true" tabindex="-1"></a><span class="st">                   Data from Dr. Andre Perry, Brookings Institute&quot;</span>)</span></code></pre></div>
<p><img src="Black_wealth_files/figure-html/devaluation_ranking-1.png" width="672" /></p>
</div>
<div id="property-taxes" class="section level3" number="3.4.4">
<h3><span class="header-section-number">3.4.4</span> Property Taxes</h3>
<p>While facing lower home values on the market, homes in majority-Black neighborhoods are valued relatively-higher than homes in majority-white by the property tax administration, and thus face <a href="https://www.washingtonpost.com/context/the-assessment-gap-racial-inequalities-in-property-taxation/215957a4-d5ad-47cd-821a-070cf23b6bc7/">higher taxation relative to the market value of their homes</a>.</p>
<p>The Jefferson County Property Value Administration (PVA) assesses homes every three years to determine their value, and that value is used to determine the amount of property taxes the owner owes. The PVA compares homes to similar nearby properties to determine an appropriate valuation. Based on a comparison of property tax assessments to actual sale prices, data shows that property valuations tend to overvalue homes in some neighborhoods and undervalue them in others, resulting in different property tax rates for owners. There are numerous</p>
<div id="property-assessments" class="section level4" number="3.4.4.1">
<h4><span class="header-section-number">3.4.4.1</span> Property Assessments</h4>
<p>The map below compares property assessments to market values. Negative values indicate that home assessments are usually lower than their market price, while postive values indicate that home assessments are, on average, higher than their market price.</p>
<p>Properties inside the Watterson and East of I-65 are consistently valued, and thus taxed, at a lower rate than they are worth. Most over-assessments can be found in Southwest and South Louisville.</p>
<p>There are numerous potential reasons for these discrepancies. One significant factor in Louisville is that homes are usually assessed every three years. In neighborhoods where home values consistently go up, market values quickly increase beyond assessment values. In neighborhoods where home values increase more slowly, market prices usually stay close to property assessments. Several other potential reasons are described in detail in the research linked above.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="black-wealth.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load Property tax analysis webpage</span></span>
<span id="cb16-2"><a href="black-wealth.html#cb16-2" aria-hidden="true" tabindex="-1"></a>page <span class="ot">&lt;-</span> <span class="fu">read_html</span>(<span class="st">&quot;Black_wealth/An Evaluation of Property Tax Regressivity in Jefferson County, Kentucky.html&quot;</span>) </span>
<span id="cb16-3"><a href="black-wealth.html#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="black-wealth.html#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract sales ratio and property tax rate data-for elements</span></span>
<span id="cb16-5"><a href="black-wealth.html#cb16-5" aria-hidden="true" tabindex="-1"></a>sales_ratio_html <span class="ot">=</span> page <span class="sc">%&gt;%</span> <span class="fu">html_elements</span>(<span class="st">&#39;script[data-for=&quot;htmlwidget-0527b478a846743b2dd4&quot;]&#39;</span>)</span>
<span id="cb16-6"><a href="black-wealth.html#cb16-6" aria-hidden="true" tabindex="-1"></a>property_tax_html <span class="ot">=</span> page <span class="sc">%&gt;%</span> <span class="fu">html_elements</span>(<span class="st">&#39;script[data-for=&quot;htmlwidget-a1602585f74d11977716&quot;]&#39;</span>)</span>
<span id="cb16-7"><a href="black-wealth.html#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="black-wealth.html#cb16-8" aria-hidden="true" tabindex="-1"></a>sales_ratio_html <span class="sc">%&lt;&gt;%</span> <span class="fu">html_text</span>()</span>
<span id="cb16-9"><a href="black-wealth.html#cb16-9" aria-hidden="true" tabindex="-1"></a>property_tax_html <span class="sc">%&lt;&gt;%</span> <span class="fu">html_text</span>()</span>
<span id="cb16-10"><a href="black-wealth.html#cb16-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-11"><a href="black-wealth.html#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract relevant component and split long text strings on commas (by census tract)</span></span>
<span id="cb16-12"><a href="black-wealth.html#cb16-12" aria-hidden="true" tabindex="-1"></a>sales_ratio_text <span class="ot">&lt;-</span> sales_ratio_html <span class="sc">%&gt;%</span></span>
<span id="cb16-13"><a href="black-wealth.html#cb16-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_extract</span>(<span class="st">&#39;&lt;strong&gt;Census Tract 2, .*300,200(?=&quot;])&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-14"><a href="black-wealth.html#cb16-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_split</span>(<span class="st">&#39;&quot;,&quot;&#39;</span>)</span>
<span id="cb16-15"><a href="black-wealth.html#cb16-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-16"><a href="black-wealth.html#cb16-16" aria-hidden="true" tabindex="-1"></a>property_tax_text <span class="ot">&lt;-</span> property_tax_html <span class="sc">%&gt;%</span></span>
<span id="cb16-17"><a href="black-wealth.html#cb16-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_extract</span>(<span class="st">&#39;&lt;strong&gt;Census Tract 2, .*300,200(?=&quot;])&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-18"><a href="black-wealth.html#cb16-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_split</span>(<span class="st">&#39;&quot;,&quot;&#39;</span>)</span>
<span id="cb16-19"><a href="black-wealth.html#cb16-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-20"><a href="black-wealth.html#cb16-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to data frame and extract components using regex</span></span>
<span id="cb16-21"><a href="black-wealth.html#cb16-21" aria-hidden="true" tabindex="-1"></a>tax_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb16-22"><a href="black-wealth.html#cb16-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">sales_ratio_raw =</span> sales_ratio_text[[<span class="dv">1</span>]],</span>
<span id="cb16-23"><a href="black-wealth.html#cb16-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">property_tax_raw =</span> property_tax_text[[<span class="dv">1</span>]])</span>
<span id="cb16-24"><a href="black-wealth.html#cb16-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-25"><a href="black-wealth.html#cb16-25" aria-hidden="true" tabindex="-1"></a>tax_data <span class="sc">%&lt;&gt;%</span></span>
<span id="cb16-26"><a href="black-wealth.html#cb16-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb16-27"><a href="black-wealth.html#cb16-27" aria-hidden="true" tabindex="-1"></a>    <span class="co"># &#39;Census Tract &#39; followed by 1-6 characters before a comma</span></span>
<span id="cb16-28"><a href="black-wealth.html#cb16-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">sr_tract =</span> <span class="fu">str_extract</span>(sales_ratio_raw, <span class="st">&quot;(?&lt;=Census Tract ).{1,6}(?=,)&quot;</span>),</span>
<span id="cb16-29"><a href="black-wealth.html#cb16-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-30"><a href="black-wealth.html#cb16-30" aria-hidden="true" tabindex="-1"></a>    <span class="co"># &#39;Sales in Sample): &#39; followed by 3-5 characters before %</span></span>
<span id="cb16-31"><a href="black-wealth.html#cb16-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">sr_ratio =</span> <span class="fu">str_extract</span>(sales_ratio_raw, <span class="st">&quot;(?&lt;=Sales in Sample</span><span class="sc">\\</span><span class="st">)</span><span class="sc">\\</span><span class="st">: ).{3,5}(?=</span><span class="sc">\\</span><span class="st">%)&quot;</span>),</span>
<span id="cb16-32"><a href="black-wealth.html#cb16-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-33"><a href="black-wealth.html#cb16-33" aria-hidden="true" tabindex="-1"></a>    <span class="co"># &#39;( &#39; followed by any number of digits before &#39;)&#39;</span></span>
<span id="cb16-34"><a href="black-wealth.html#cb16-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">sr_sample =</span> <span class="fu">str_extract</span>(sales_ratio_raw, <span class="st">&quot;(?&lt;=</span><span class="sc">\\</span><span class="st">()</span><span class="sc">\\</span><span class="st">d*(?=</span><span class="sc">\\</span><span class="st">))&quot;</span>),</span>
<span id="cb16-35"><a href="black-wealth.html#cb16-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-36"><a href="black-wealth.html#cb16-36" aria-hidden="true" tabindex="-1"></a>    <span class="co"># &#39;Median Home Value: $&#39; followed by the rest of the string</span></span>
<span id="cb16-37"><a href="black-wealth.html#cb16-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">home_value =</span> <span class="fu">str_extract</span>(sales_ratio_raw, <span class="st">&quot;(?&lt;=Median Home Value</span><span class="sc">\\</span><span class="st">: </span><span class="sc">\\</span><span class="st">$).*&quot;</span>),</span>
<span id="cb16-38"><a href="black-wealth.html#cb16-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-39"><a href="black-wealth.html#cb16-39" aria-hidden="true" tabindex="-1"></a>    <span class="co"># &#39;Percent White Population: &#39; followed by 3-5 characters before %</span></span>
<span id="cb16-40"><a href="black-wealth.html#cb16-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">white =</span> <span class="fu">str_extract</span>(sales_ratio_raw, <span class="st">&quot;(?&lt;=Percent White Population</span><span class="sc">\\</span><span class="st">: ).{3,5}(?=</span><span class="sc">\\</span><span class="st">%)&quot;</span>),</span>
<span id="cb16-41"><a href="black-wealth.html#cb16-41" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-42"><a href="black-wealth.html#cb16-42" aria-hidden="true" tabindex="-1"></a>    <span class="co"># &#39;Census Tract &#39; followed by 1-6 characters before a comma</span></span>
<span id="cb16-43"><a href="black-wealth.html#cb16-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">pt_tract =</span> <span class="fu">str_extract</span>(property_tax_raw, <span class="st">&quot;(?&lt;=Census Tract ).{1,6}(?=,)&quot;</span>),</span>
<span id="cb16-44"><a href="black-wealth.html#cb16-44" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-45"><a href="black-wealth.html#cb16-45" aria-hidden="true" tabindex="-1"></a>    <span class="co"># &#39;Sales in Sample): &#39; followed by 3-5 characters before %</span></span>
<span id="cb16-46"><a href="black-wealth.html#cb16-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">pt_rate =</span> <span class="fu">str_extract</span>(property_tax_raw, <span class="st">&quot;(?&lt;=Sales in Sample</span><span class="sc">\\</span><span class="st">)</span><span class="sc">\\</span><span class="st">: ).{3,5}(?=</span><span class="sc">\\</span><span class="st">%)&quot;</span>),</span>
<span id="cb16-47"><a href="black-wealth.html#cb16-47" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-48"><a href="black-wealth.html#cb16-48" aria-hidden="true" tabindex="-1"></a>    <span class="co"># &#39;( &#39; followed by any number of digits before &#39;)&#39;</span></span>
<span id="cb16-49"><a href="black-wealth.html#cb16-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">pt_sample =</span> <span class="fu">str_extract</span>(property_tax_raw, <span class="st">&quot;(?&lt;=</span><span class="sc">\\</span><span class="st">()</span><span class="sc">\\</span><span class="st">d*(?=</span><span class="sc">\\</span><span class="st">))&quot;</span>))</span>
<span id="cb16-50"><a href="black-wealth.html#cb16-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-51"><a href="black-wealth.html#cb16-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Check: tract and sample size match across all tracts. TRUE</span></span>
<span id="cb16-52"><a href="black-wealth.html#cb16-52" aria-hidden="true" tabindex="-1"></a><span class="co"># all(tax_data$sr_tract == tax_data$pt_tract)</span></span>
<span id="cb16-53"><a href="black-wealth.html#cb16-53" aria-hidden="true" tabindex="-1"></a><span class="co"># all(tax_data$sr_sample == tax_data$pt_sample)</span></span>
<span id="cb16-54"><a href="black-wealth.html#cb16-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-55"><a href="black-wealth.html#cb16-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Create tract IDs and clean data frame</span></span>
<span id="cb16-56"><a href="black-wealth.html#cb16-56" aria-hidden="true" tabindex="-1"></a>tax_data <span class="sc">%&lt;&gt;%</span></span>
<span id="cb16-57"><a href="black-wealth.html#cb16-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb16-58"><a href="black-wealth.html#cb16-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">tract_start =</span> </span>
<span id="cb16-59"><a href="black-wealth.html#cb16-59" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_extract</span>(sr_tract, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">d{1,3}&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb16-60"><a href="black-wealth.html#cb16-60" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_pad</span>(<span class="dv">4</span>, <span class="st">&quot;left&quot;</span>, <span class="st">&quot;0&quot;</span>),</span>
<span id="cb16-61"><a href="black-wealth.html#cb16-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">tract_end =</span> </span>
<span id="cb16-62"><a href="black-wealth.html#cb16-62" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_extract</span>(sr_tract, <span class="st">&quot;(?&lt;=</span><span class="sc">\\</span><span class="st">.)</span><span class="sc">\\</span><span class="st">d{1,2}&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb16-63"><a href="black-wealth.html#cb16-63" aria-hidden="true" tabindex="-1"></a>      <span class="fu">replace_na</span>(<span class="st">&quot;00&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-64"><a href="black-wealth.html#cb16-64" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_pad</span>(<span class="dv">2</span>, <span class="st">&quot;left&quot;</span>, <span class="st">&quot;0&quot;</span>),</span>
<span id="cb16-65"><a href="black-wealth.html#cb16-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">tract =</span> <span class="fu">paste0</span>(<span class="st">&quot;21111&quot;</span>, tract_start, tract_end)) <span class="sc">%&gt;%</span></span>
<span id="cb16-66"><a href="black-wealth.html#cb16-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb16-67"><a href="black-wealth.html#cb16-67" aria-hidden="true" tabindex="-1"></a>    tract,</span>
<span id="cb16-68"><a href="black-wealth.html#cb16-68" aria-hidden="true" tabindex="-1"></a>    <span class="at">sales_ratio =</span> <span class="fu">as.numeric</span>(sr_ratio),</span>
<span id="cb16-69"><a href="black-wealth.html#cb16-69" aria-hidden="true" tabindex="-1"></a>    <span class="at">property_tax =</span> <span class="fu">as.numeric</span>(pt_rate),</span>
<span id="cb16-70"><a href="black-wealth.html#cb16-70" aria-hidden="true" tabindex="-1"></a>    <span class="at">sample_size =</span> <span class="fu">as.numeric</span>(sr_sample),</span>
<span id="cb16-71"><a href="black-wealth.html#cb16-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">pct_white =</span> <span class="fu">as.numeric</span>(white),</span>
<span id="cb16-72"><a href="black-wealth.html#cb16-72" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_value =</span> <span class="fu">as.numeric</span>(<span class="fu">str_remove</span>(home_value, <span class="st">&quot;,&quot;</span>)))</span>
<span id="cb16-73"><a href="black-wealth.html#cb16-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-74"><a href="black-wealth.html#cb16-74" aria-hidden="true" tabindex="-1"></a>tax_data <span class="sc">%&lt;&gt;%</span></span>
<span id="cb16-75"><a href="black-wealth.html#cb16-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb16-76"><a href="black-wealth.html#cb16-76" aria-hidden="true" tabindex="-1"></a>    <span class="at">dif =</span> sales_ratio <span class="sc">-</span> <span class="dv">100</span>,</span>
<span id="cb16-77"><a href="black-wealth.html#cb16-77" aria-hidden="true" tabindex="-1"></a>    <span class="at">dif_bins =</span> </span>
<span id="cb16-78"><a href="black-wealth.html#cb16-78" aria-hidden="true" tabindex="-1"></a>      <span class="fu">case_when</span>(dif <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">10</span> <span class="sc">~</span> <span class="st">&quot;10 to 15% lower&quot;</span>,</span>
<span id="cb16-79"><a href="black-wealth.html#cb16-79" aria-hidden="true" tabindex="-1"></a>                dif <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">5</span> <span class="sc">~</span> <span class="st">&quot;5 to 10% lower&quot;</span>,</span>
<span id="cb16-80"><a href="black-wealth.html#cb16-80" aria-hidden="true" tabindex="-1"></a>                dif <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;0 to 5% lower&quot;</span>,</span>
<span id="cb16-81"><a href="black-wealth.html#cb16-81" aria-hidden="true" tabindex="-1"></a>                dif <span class="sc">&lt;</span> <span class="dv">5</span> <span class="sc">~</span> <span class="st">&quot;0 to 5% higher&quot;</span>,</span>
<span id="cb16-82"><a href="black-wealth.html#cb16-82" aria-hidden="true" tabindex="-1"></a>                dif <span class="sc">&lt;</span> <span class="dv">10</span> <span class="sc">~</span> <span class="st">&quot;5 to 10% higher&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-83"><a href="black-wealth.html#cb16-83" aria-hidden="true" tabindex="-1"></a>      <span class="fu">factor</span>(<span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;10 to 15% lower&quot;</span>, <span class="st">&quot;5 to 10% lower&quot;</span>, <span class="st">&quot;0 to 5% lower&quot;</span>, <span class="st">&quot;0 to 5% higher&quot;</span>, <span class="st">&quot;5 to 10% higher&quot;</span>), <span class="at">ordered =</span> T),</span>
<span id="cb16-84"><a href="black-wealth.html#cb16-84" aria-hidden="true" tabindex="-1"></a>    <span class="at">sales_ratio_bins =</span> </span>
<span id="cb16-85"><a href="black-wealth.html#cb16-85" aria-hidden="true" tabindex="-1"></a>      <span class="fu">case_when</span>(sales_ratio <span class="sc">&lt;</span> <span class="dv">90</span> <span class="sc">~</span> <span class="st">&quot;85-90&quot;</span>,</span>
<span id="cb16-86"><a href="black-wealth.html#cb16-86" aria-hidden="true" tabindex="-1"></a>                sales_ratio <span class="sc">&lt;</span> <span class="dv">95</span> <span class="sc">~</span> <span class="st">&quot;90-95&quot;</span>,</span>
<span id="cb16-87"><a href="black-wealth.html#cb16-87" aria-hidden="true" tabindex="-1"></a>                sales_ratio <span class="sc">&lt;</span> <span class="dv">100</span> <span class="sc">~</span> <span class="st">&quot;95-100&quot;</span>,</span>
<span id="cb16-88"><a href="black-wealth.html#cb16-88" aria-hidden="true" tabindex="-1"></a>                sales_ratio <span class="sc">&lt;</span> <span class="dv">105</span> <span class="sc">~</span> <span class="st">&quot;100-105&quot;</span>,</span>
<span id="cb16-89"><a href="black-wealth.html#cb16-89" aria-hidden="true" tabindex="-1"></a>                sales_ratio <span class="sc">&lt;</span> <span class="dv">110</span> <span class="sc">~</span> <span class="st">&quot;105-110&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-90"><a href="black-wealth.html#cb16-90" aria-hidden="true" tabindex="-1"></a>      <span class="fu">factor</span>(<span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;85-90&quot;</span>, <span class="st">&quot;90-95&quot;</span>, <span class="st">&quot;95-100&quot;</span>, <span class="st">&quot;100-105&quot;</span>, <span class="st">&quot;105-110&quot;</span>), <span class="at">ordered =</span> T),</span>
<span id="cb16-91"><a href="black-wealth.html#cb16-91" aria-hidden="true" tabindex="-1"></a>    <span class="at">property_tax_bins =</span> </span>
<span id="cb16-92"><a href="black-wealth.html#cb16-92" aria-hidden="true" tabindex="-1"></a>      <span class="fu">case_when</span>(property_tax <span class="sc">==</span> <span class="fl">0.8</span> <span class="sc">~</span> <span class="st">&quot;0.8%&quot;</span>,</span>
<span id="cb16-93"><a href="black-wealth.html#cb16-93" aria-hidden="true" tabindex="-1"></a>                property_tax <span class="sc">==</span> <span class="fl">0.9</span> <span class="sc">~</span> <span class="st">&quot;0.9%&quot;</span>,</span>
<span id="cb16-94"><a href="black-wealth.html#cb16-94" aria-hidden="true" tabindex="-1"></a>                property_tax <span class="sc">==</span> <span class="fl">1.0</span> <span class="sc">~</span> <span class="st">&quot;1.0%&quot;</span>,</span>
<span id="cb16-95"><a href="black-wealth.html#cb16-95" aria-hidden="true" tabindex="-1"></a>                property_tax <span class="sc">==</span> <span class="fl">1.1</span> <span class="sc">~</span> <span class="st">&quot;1.1%&quot;</span>,</span>
<span id="cb16-96"><a href="black-wealth.html#cb16-96" aria-hidden="true" tabindex="-1"></a>                property_tax <span class="sc">==</span> <span class="fl">1.2</span> <span class="sc">~</span> <span class="st">&quot;1.2%&quot;</span>,</span>
<span id="cb16-97"><a href="black-wealth.html#cb16-97" aria-hidden="true" tabindex="-1"></a>                property_tax <span class="sc">==</span> <span class="fl">1.3</span> <span class="sc">~</span> <span class="st">&quot;1.3%&quot;</span>,</span>
<span id="cb16-98"><a href="black-wealth.html#cb16-98" aria-hidden="true" tabindex="-1"></a>                property_tax <span class="sc">==</span> <span class="fl">1.4</span> <span class="sc">~</span> <span class="st">&quot;1.4%&quot;</span>,</span>
<span id="cb16-99"><a href="black-wealth.html#cb16-99" aria-hidden="true" tabindex="-1"></a>                property_tax <span class="sc">==</span> <span class="fl">1.5</span> <span class="sc">~</span> <span class="st">&quot;1.5%&quot;</span>,) <span class="sc">%&gt;%</span></span>
<span id="cb16-100"><a href="black-wealth.html#cb16-100" aria-hidden="true" tabindex="-1"></a>      <span class="fu">factor</span>(<span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;0.8%&quot;</span>, <span class="st">&quot;0.9%&quot;</span>, <span class="st">&quot;1.0%&quot;</span>, <span class="st">&quot;1.1%&quot;</span>, <span class="st">&quot;1.2%&quot;</span>, <span class="st">&quot;1.3%&quot;</span>, <span class="st">&quot;1.4%&quot;</span>, <span class="st">&quot;1.5%&quot;</span>), <span class="at">ordered =</span> T))</span>
<span id="cb16-101"><a href="black-wealth.html#cb16-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-102"><a href="black-wealth.html#cb16-102" aria-hidden="true" tabindex="-1"></a>pop_data <span class="ot">&lt;-</span> glpdata<span class="sc">::</span>population_tract <span class="sc">%&gt;%</span></span>
<span id="cb16-103"><a href="black-wealth.html#cb16-103" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span>  <span class="dv">2016</span>,</span>
<span id="cb16-104"><a href="black-wealth.html#cb16-104" aria-hidden="true" tabindex="-1"></a>         race <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;total&quot;</span>, <span class="st">&quot;black&quot;</span>),</span>
<span id="cb16-105"><a href="black-wealth.html#cb16-105" aria-hidden="true" tabindex="-1"></a>         sex <span class="sc">==</span> <span class="st">&quot;total&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-106"><a href="black-wealth.html#cb16-106" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(tract, race, population) <span class="sc">%&gt;%</span></span>
<span id="cb16-107"><a href="black-wealth.html#cb16-107" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> race, <span class="at">values_from =</span> population) <span class="sc">%&gt;%</span></span>
<span id="cb16-108"><a href="black-wealth.html#cb16-108" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent_black =</span> black <span class="sc">/</span> total <span class="sc">*</span> <span class="dv">100</span>)</span>
<span id="cb16-109"><a href="black-wealth.html#cb16-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-110"><a href="black-wealth.html#cb16-110" aria-hidden="true" tabindex="-1"></a>tax_data <span class="sc">%&lt;&gt;%</span></span>
<span id="cb16-111"><a href="black-wealth.html#cb16-111" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(pop_data, <span class="at">by =</span> <span class="st">&quot;tract&quot;</span>)</span>
<span id="cb16-112"><a href="black-wealth.html#cb16-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-113"><a href="black-wealth.html#cb16-113" aria-hidden="true" tabindex="-1"></a>jfco_sf <span class="sc">%&lt;&gt;%</span></span>
<span id="cb16-114"><a href="black-wealth.html#cb16-114" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(tax_data, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;GEOID&quot;</span> <span class="ot">=</span> <span class="st">&quot;tract&quot;</span>))</span>
<span id="cb16-115"><a href="black-wealth.html#cb16-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-116"><a href="black-wealth.html#cb16-116" aria-hidden="true" tabindex="-1"></a>make_map_bins <span class="ot">&lt;-</span> <span class="cf">function</span>(indicator, </span>
<span id="cb16-117"><a href="black-wealth.html#cb16-117" aria-hidden="true" tabindex="-1"></a>                     <span class="at">title =</span> <span class="st">&quot;&quot;</span>, <span class="at">legend =</span> <span class="st">&quot;&quot;</span>, <span class="at">caption =</span> <span class="st">&quot;&quot;</span>, </span>
<span id="cb16-118"><a href="black-wealth.html#cb16-118" aria-hidden="true" tabindex="-1"></a>                     <span class="at">no_legend =</span> <span class="cn">FALSE</span>, <span class="at">vir_dir =</span> <span class="dv">1</span>, bins, shapefile){</span>
<span id="cb16-119"><a href="black-wealth.html#cb16-119" aria-hidden="true" tabindex="-1"></a>  plt <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(shapefile) <span class="sc">+</span></span>
<span id="cb16-120"><a href="black-wealth.html#cb16-120" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill=</span>{{ indicator }} )) <span class="sc">+</span></span>
<span id="cb16-121"><a href="black-wealth.html#cb16-121" aria-hidden="true" tabindex="-1"></a>    <span class="co"># scale_fill_gradient(low = &quot;#323844&quot;, high = &quot;#d63631&quot;, name = &quot;Percent&quot;) +</span></span>
<span id="cb16-122"><a href="black-wealth.html#cb16-122" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>(<span class="at">na.value =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">name =</span> legend, <span class="at">direction =</span> vir_dir,</span>
<span id="cb16-123"><a href="black-wealth.html#cb16-123" aria-hidden="true" tabindex="-1"></a>                       <span class="at">discrete =</span> T) <span class="sc">+</span></span>
<span id="cb16-124"><a href="black-wealth.html#cb16-124" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">22</span>) <span class="sc">+</span></span>
<span id="cb16-125"><a href="black-wealth.html#cb16-125" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">lineheight =</span> .<span class="dv">5</span>)) <span class="sc">+</span></span>
<span id="cb16-126"><a href="black-wealth.html#cb16-126" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">&quot;Montserrat&quot;</span>),</span>
<span id="cb16-127"><a href="black-wealth.html#cb16-127" aria-hidden="true" tabindex="-1"></a>          <span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb16-128"><a href="black-wealth.html#cb16-128" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb16-129"><a href="black-wealth.html#cb16-129" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb16-130"><a href="black-wealth.html#cb16-130" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb16-131"><a href="black-wealth.html#cb16-131" aria-hidden="true" tabindex="-1"></a>          <span class="at">panel.border =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb16-132"><a href="black-wealth.html#cb16-132" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> title,</span>
<span id="cb16-133"><a href="black-wealth.html#cb16-133" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> caption)</span>
<span id="cb16-134"><a href="black-wealth.html#cb16-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-135"><a href="black-wealth.html#cb16-135" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (no_legend <span class="sc">==</span> <span class="cn">TRUE</span>){</span>
<span id="cb16-136"><a href="black-wealth.html#cb16-136" aria-hidden="true" tabindex="-1"></a>    plt <span class="ot">&lt;-</span> plt <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span>
<span id="cb16-137"><a href="black-wealth.html#cb16-137" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb16-138"><a href="black-wealth.html#cb16-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-139"><a href="black-wealth.html#cb16-139" aria-hidden="true" tabindex="-1"></a>  plt <span class="ot">&lt;-</span> plt <span class="sc">+</span></span>
<span id="cb16-140"><a href="black-wealth.html#cb16-140" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb16-141"><a href="black-wealth.html#cb16-141" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>), <span class="co"># bg of the panel</span></span>
<span id="cb16-142"><a href="black-wealth.html#cb16-142" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>), <span class="co"># bg of the plot</span></span>
<span id="cb16-143"><a href="black-wealth.html#cb16-143" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="st">&quot;transparent&quot;</span>), <span class="co"># get rid of legend bg</span></span>
<span id="cb16-144"><a href="black-wealth.html#cb16-144" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.box.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="st">&quot;transparent&quot;</span>), <span class="co"># get rid of legend panel bg</span></span>
<span id="cb16-145"><a href="black-wealth.html#cb16-145" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>,<span class="at">colour =</span> <span class="cn">NA</span>))</span>
<span id="cb16-146"><a href="black-wealth.html#cb16-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-147"><a href="black-wealth.html#cb16-147" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(plt)</span>
<span id="cb16-148"><a href="black-wealth.html#cb16-148" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb16-149"><a href="black-wealth.html#cb16-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-150"><a href="black-wealth.html#cb16-150" aria-hidden="true" tabindex="-1"></a><span class="fu">make_map_bins</span>(dif_bins, </span>
<span id="cb16-151"><a href="black-wealth.html#cb16-151" aria-hidden="true" tabindex="-1"></a>              <span class="at">title =</span> <span class="st">&quot;Assessed Value compared to Market Value&quot;</span>,</span>
<span id="cb16-152"><a href="black-wealth.html#cb16-152" aria-hidden="true" tabindex="-1"></a>              <span class="at">bins =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">15</span>, <span class="sc">-</span><span class="dv">10</span>, <span class="sc">-</span><span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">10</span>),</span>
<span id="cb16-153"><a href="black-wealth.html#cb16-153" aria-hidden="true" tabindex="-1"></a>              <span class="at">caption =</span> <span class="st">&quot;Source: Greater Louisville Project</span></span>
<span id="cb16-154"><a href="black-wealth.html#cb16-154" aria-hidden="true" tabindex="-1"></a><span class="st">                         GLP analysis of data from University of Chicago Harris Public Policy&quot;</span>,</span>
<span id="cb16-155"><a href="black-wealth.html#cb16-155" aria-hidden="true" tabindex="-1"></a>              <span class="at">shapefile =</span> jfco_sf)</span></code></pre></div>
<p><img src="Black_wealth_files/figure-html/assessment-1.png" width="672" /></p>
</div>
<div id="property-taxes-1" class="section level4" number="3.4.4.2">
<h4><span class="header-section-number">3.4.4.2</span> Property Taxes</h4>
<p>The property tax rate for homeowners differs by location. Most homeowners across the county pay taxes toward JCPS, and most homeowners who live inside the Watterson also pay taxes to the Urban Services District. Independent cities, fire departments, and school districts charge different rates throughout the county. As a result, there is no consistent property tax rate throughout Jefferson County. Differences in property tax rates are a result of both local tax rates and property assessments.</p>
<p>The map below shows the effective property tax rate, or the amount of property tax homeowners paid based on the market value of their homes. The majority of homeowners pay a property tax of around 1% of their home’s value. Homeowners in some neighborhoods pay slightly less, and many pay slightly more. The highest effective tax rates are found in West Louisville due to a combination of high property assessments relative to homes’ values, and the property tax rate for the Urban Services District.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="black-wealth.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make_map_bins</span>(property_tax_bins,</span>
<span id="cb17-2"><a href="black-wealth.html#cb17-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">&quot;Effective Property Tax Rate&quot;</span>,</span>
<span id="cb17-3"><a href="black-wealth.html#cb17-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Percent of Home Value&quot;</span>,</span>
<span id="cb17-4"><a href="black-wealth.html#cb17-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Source: Greater Louisville Project</span></span>
<span id="cb17-5"><a href="black-wealth.html#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="st">                    GLP analysis of data from University of Chicago Harris Public Policy&quot;</span>,</span>
<span id="cb17-6"><a href="black-wealth.html#cb17-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">shapefile =</span> jfco_sf)</span></code></pre></div>
<p><img src="Black_wealth_files/figure-html/tax_rate-1.png" width="672" /></p>
</div>
</div>
<div id="undervaluation-and-overtaxation" class="section level3" number="3.4.5">
<h3><span class="header-section-number">3.4.5</span> Undervaluation and Overtaxation</h3>
<p>This image summarizes the previous two sections (home valuation and property assessments). If homes in Black neighborhoods were valued by the market and taxed by the city like homes in other neighborhoods, homeowners in those neighborhoods would have higher-priced homes taxed at a lower rate.</p>
<p><img src="home_taxes_GLP.png" alt="Home valuation and taxation" />
*This follows Dr. Andre Perry’s (Brookings Institute) methodology in defining a majority Black neighborhood as one with ≥ 50% Black residents.</p>
<p>**The data on the right reflects a home price without devaluation and the average effective property tax rate of white neighborhoods in Louisville. These differences are likely not a completely just or equitable reality, but one that moves us closer to that.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="black-wealth.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># average property tax vs average property tax in a Black neighborhood</span></span>
<span id="cb18-2"><a href="black-wealth.html#cb18-2" aria-hidden="true" tabindex="-1"></a>tax_data_bn <span class="ot">&lt;-</span> tax_data <span class="sc">%&gt;%</span></span>
<span id="cb18-3"><a href="black-wealth.html#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(percent_black <span class="sc">&gt;=</span><span class="dv">50</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-4"><a href="black-wealth.html#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#summarize(prop_tax = mean(property_tax, na.rm=T))</span></span>
<span id="cb18-5"><a href="black-wealth.html#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">prop_tax =</span> <span class="fu">weighted.mean</span>(property_tax, sample_size, <span class="at">na.rm=</span>T)) <span class="sc">%&gt;%</span> </span>
<span id="cb18-6"><a href="black-wealth.html#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(prop_tax)</span>
<span id="cb18-7"><a href="black-wealth.html#cb18-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-8"><a href="black-wealth.html#cb18-8" aria-hidden="true" tabindex="-1"></a>t<span class="ot">=</span>tax_data <span class="sc">%&gt;%</span></span>
<span id="cb18-9"><a href="black-wealth.html#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(glptools<span class="sc">::</span>nh_tract) <span class="sc">%&gt;%</span></span>
<span id="cb18-10"><a href="black-wealth.html#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(pct_white<span class="sc">&lt;</span><span class="dv">50</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-11"><a href="black-wealth.html#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb18-12"><a href="black-wealth.html#cb18-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">sales_ratio =</span> <span class="fu">weighted.mean</span>(sales_ratio, sample_size, <span class="at">na.rm=</span>T),</span>
<span id="cb18-13"><a href="black-wealth.html#cb18-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb18-14"><a href="black-wealth.html#cb18-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">pct_white =</span> <span class="fu">mean</span>(pct_white, <span class="at">na.rm=</span>T))</span>
<span id="cb18-15"><a href="black-wealth.html#cb18-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-16"><a href="black-wealth.html#cb18-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tax_data, <span class="fu">aes</span>(<span class="at">x=</span>percent_black, <span class="at">y=</span>sales_ratio)) <span class="sc">+</span></span>
<span id="cb18-17"><a href="black-wealth.html#cb18-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb18-18"><a href="black-wealth.html#cb18-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb18-19"><a href="black-wealth.html#cb18-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">22</span>, <span class="at">base_family =</span> <span class="st">&quot;Montserrat&quot;</span>) <span class="sc">+</span></span>
<span id="cb18-20"><a href="black-wealth.html#cb18-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb18-21"><a href="black-wealth.html#cb18-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.border =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb18-22"><a href="black-wealth.html#cb18-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb18-23"><a href="black-wealth.html#cb18-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Neighborhoods by Assessment Ratio and Race&quot;</span>) <span class="sc">+</span></span>
<span id="cb18-24"><a href="black-wealth.html#cb18-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb18-25"><a href="black-wealth.html#cb18-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>), <span class="co"># bg of the panel</span></span>
<span id="cb18-26"><a href="black-wealth.html#cb18-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>), <span class="co"># bg of the plot</span></span>
<span id="cb18-27"><a href="black-wealth.html#cb18-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="st">&quot;transparent&quot;</span>), <span class="co"># get rid of legend bg</span></span>
<span id="cb18-28"><a href="black-wealth.html#cb18-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.box.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="st">&quot;transparent&quot;</span>), <span class="co"># get rid of legend panel bg</span></span>
<span id="cb18-29"><a href="black-wealth.html#cb18-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>,<span class="at">colour =</span> <span class="cn">NA</span>)) <span class="sc">+</span></span>
<span id="cb18-30"><a href="black-wealth.html#cb18-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Percent of Residents who are Black&quot;</span>,</span>
<span id="cb18-31"><a href="black-wealth.html#cb18-31" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Assessment Ratio&quot;</span>)</span>
<span id="cb18-32"><a href="black-wealth.html#cb18-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-33"><a href="black-wealth.html#cb18-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Method 1: Summarize daata for each group based on Dr. Perry&#39;s definitions</span></span>
<span id="cb18-34"><a href="black-wealth.html#cb18-34" aria-hidden="true" tabindex="-1"></a>nb_sales_ratio <span class="ot">&lt;-</span> tax_data <span class="sc">%&gt;%</span> </span>
<span id="cb18-35"><a href="black-wealth.html#cb18-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(percent_black <span class="sc">&lt;=</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-36"><a href="black-wealth.html#cb18-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">output =</span> <span class="fu">weighted.mean</span>(sales_ratio, sample_size)) <span class="sc">%&gt;%</span></span>
<span id="cb18-37"><a href="black-wealth.html#cb18-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(output)</span>
<span id="cb18-38"><a href="black-wealth.html#cb18-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-39"><a href="black-wealth.html#cb18-39" aria-hidden="true" tabindex="-1"></a>black_ratio <span class="ot">&lt;-</span> tax_data <span class="sc">%&gt;%</span> </span>
<span id="cb18-40"><a href="black-wealth.html#cb18-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(percent_black <span class="sc">&gt;=</span> <span class="dv">50</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-41"><a href="black-wealth.html#cb18-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">output =</span> <span class="fu">weighted.mean</span>(sales_ratio, sample_size, <span class="at">na.rm=</span>T)) <span class="sc">%&gt;%</span></span>
<span id="cb18-42"><a href="black-wealth.html#cb18-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(output)</span>
<span id="cb18-43"><a href="black-wealth.html#cb18-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-44"><a href="black-wealth.html#cb18-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Method 2: Summarize data for each group based on the 10% most- and 10% least-Black neighborhoods</span></span>
<span id="cb18-45"><a href="black-wealth.html#cb18-45" aria-hidden="true" tabindex="-1"></a>nb_sales_ratio <span class="ot">&lt;-</span> tax_data <span class="sc">%&gt;%</span> </span>
<span id="cb18-46"><a href="black-wealth.html#cb18-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(percent_black <span class="sc">&lt;=</span> <span class="fu">quantile</span>(percent_black, <span class="fl">0.1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb18-47"><a href="black-wealth.html#cb18-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">output =</span> <span class="fu">weighted.mean</span>(sales_ratio, sample_size)) <span class="sc">%&gt;%</span></span>
<span id="cb18-48"><a href="black-wealth.html#cb18-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(output)</span>
<span id="cb18-49"><a href="black-wealth.html#cb18-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-50"><a href="black-wealth.html#cb18-50" aria-hidden="true" tabindex="-1"></a>black_ratio <span class="ot">&lt;-</span> tax_data <span class="sc">%&gt;%</span> </span>
<span id="cb18-51"><a href="black-wealth.html#cb18-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(percent_black <span class="sc">&gt;=</span> <span class="fu">quantile</span>(percent_black, <span class="fl">0.9</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb18-52"><a href="black-wealth.html#cb18-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">output =</span> <span class="fu">weighted.mean</span>(sales_ratio, sample_size, <span class="at">na.rm=</span>T)) <span class="sc">%&gt;%</span></span>
<span id="cb18-53"><a href="black-wealth.html#cb18-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(output)</span>
<span id="cb18-54"><a href="black-wealth.html#cb18-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-55"><a href="black-wealth.html#cb18-55" aria-hidden="true" tabindex="-1"></a>prop_ratio <span class="ot">&lt;-</span> nb_sales_ratio <span class="sc">/</span> black_ratio <span class="sc">*</span> tax_data_bn</span>
<span id="cb18-56"><a href="black-wealth.html#cb18-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-57"><a href="black-wealth.html#cb18-57" aria-hidden="true" tabindex="-1"></a><span class="co"># Method 3: model data using splines</span></span>
<span id="cb18-58"><a href="black-wealth.html#cb18-58" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(splines)</span>
<span id="cb18-59"><a href="black-wealth.html#cb18-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-60"><a href="black-wealth.html#cb18-60" aria-hidden="true" tabindex="-1"></a>t<span class="ot">=</span><span class="fu">lm</span>(sales_ratio<span class="sc">~</span><span class="fu">bs</span>(percent_black, <span class="at">knots =</span> <span class="fu">quantile</span>(tax_data<span class="sc">$</span>percent_black, <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>))), <span class="at">data=</span>tax_data)</span>
<span id="cb18-61"><a href="black-wealth.html#cb18-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-62"><a href="black-wealth.html#cb18-62" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">predict</span>(t, <span class="at">newdata =</span> <span class="fu">list</span>(<span class="at">percent_black =</span> <span class="fu">c</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">100</span>))),<span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">85</span>, <span class="dv">110</span>),<span class="at">type=</span><span class="st">&quot;l&quot;</span>)</span>
<span id="cb18-63"><a href="black-wealth.html#cb18-63" aria-hidden="true" tabindex="-1"></a><span class="fu">points</span>(tax_data<span class="sc">$</span>percent_black, tax_data<span class="sc">$</span>sales_ratio)</span>
<span id="cb18-64"><a href="black-wealth.html#cb18-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-65"><a href="black-wealth.html#cb18-65" aria-hidden="true" tabindex="-1"></a><span class="fu">predict</span>(t, <span class="at">newdata =</span> <span class="fu">list</span>(<span class="at">percent_black =</span> <span class="dv">0</span>))</span>
<span id="cb18-66"><a href="black-wealth.html#cb18-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-67"><a href="black-wealth.html#cb18-67" aria-hidden="true" tabindex="-1"></a><span class="fu">predict</span>(t, <span class="at">newdata =</span> <span class="fu">list</span>(<span class="at">percent_black =</span> <span class="dv">50</span><span class="sc">:</span><span class="dv">100</span>)) <span class="sc">%&gt;%</span> <span class="fu">mean</span>()</span>
<span id="cb18-68"><a href="black-wealth.html#cb18-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-69"><a href="black-wealth.html#cb18-69" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> glptools<span class="sc">::</span>map_muw</span>
<span id="cb18-70"><a href="black-wealth.html#cb18-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-71"><a href="black-wealth.html#cb18-71" aria-hidden="true" tabindex="-1"></a>test_pop <span class="ot">&lt;-</span> glpdata<span class="sc">::</span>population_muw <span class="sc">%&gt;%</span></span>
<span id="cb18-72"><a href="black-wealth.html#cb18-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2016</span>, sex <span class="sc">==</span> <span class="st">&quot;total&quot;</span>, race <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;black&quot;</span>, <span class="st">&quot;total&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb18-73"><a href="black-wealth.html#cb18-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>population_change, <span class="sc">-</span>population_change_adj) <span class="sc">%&gt;%</span></span>
<span id="cb18-74"><a href="black-wealth.html#cb18-74" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">values_from =</span> population, <span class="at">names_from =</span> race)</span>
<span id="cb18-75"><a href="black-wealth.html#cb18-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-76"><a href="black-wealth.html#cb18-76" aria-hidden="true" tabindex="-1"></a>test <span class="sc">%&lt;&gt;%</span> </span>
<span id="cb18-77"><a href="black-wealth.html#cb18-77" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(test_pop) <span class="sc">%&gt;%</span></span>
<span id="cb18-78"><a href="black-wealth.html#cb18-78" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pct_black =</span> black <span class="sc">/</span> total <span class="sc">*</span> <span class="dv">100</span>)</span>
<span id="cb18-79"><a href="black-wealth.html#cb18-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-80"><a href="black-wealth.html#cb18-80" aria-hidden="true" tabindex="-1"></a><span class="fu">leaflet</span>(test) <span class="sc">%&gt;%</span></span>
<span id="cb18-81"><a href="black-wealth.html#cb18-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addTiles</span>()<span class="sc">%&gt;%</span></span>
<span id="cb18-82"><a href="black-wealth.html#cb18-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addPolygons</span>(<span class="at">fill =</span> test<span class="sc">$</span>pct_black <span class="sc">&gt;=</span> <span class="dv">50</span>)</span>
<span id="cb18-83"><a href="black-wealth.html#cb18-83" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-84"><a href="black-wealth.html#cb18-84" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glptools)</span>
<span id="cb18-85"><a href="black-wealth.html#cb18-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-86"><a href="black-wealth.html#cb18-86" aria-hidden="true" tabindex="-1"></a>housing_vars_05_5yr <span class="ot">&lt;-</span> <span class="fu">build_census_var_df</span>(<span class="st">&quot;acs5&quot;</span>, <span class="st">&quot;B25077&quot;</span>)</span>
<span id="cb18-87"><a href="black-wealth.html#cb18-87" aria-hidden="true" tabindex="-1"></a>housing_map <span class="ot">&lt;-</span> <span class="fu">get_census</span>(<span class="fu">filter</span>(housing_vars_05_5yr, year <span class="sc">==</span> <span class="dv">2019</span>), <span class="st">&quot;tract&quot;</span>)</span>
<span id="cb18-88"><a href="black-wealth.html#cb18-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-89"><a href="black-wealth.html#cb18-89" aria-hidden="true" tabindex="-1"></a>pop_map <span class="ot">&lt;-</span> glpdata<span class="sc">::</span>population_tract <span class="sc">%&gt;%</span></span>
<span id="cb18-90"><a href="black-wealth.html#cb18-90" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2016</span>, sex <span class="sc">==</span> <span class="st">&quot;total&quot;</span>, race <span class="sc">==</span> <span class="st">&quot;total&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-91"><a href="black-wealth.html#cb18-91" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(tract, population)</span>
<span id="cb18-92"><a href="black-wealth.html#cb18-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-93"><a href="black-wealth.html#cb18-93" aria-hidden="true" tabindex="-1"></a>t<span class="ot">=</span>housing_map <span class="sc">%&gt;%</span></span>
<span id="cb18-94"><a href="black-wealth.html#cb18-94" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(tract, year, var_type, value) <span class="sc">%&gt;%</span></span>
<span id="cb18-95"><a href="black-wealth.html#cb18-95" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_vartype_wider</span>(value) <span class="sc">%&gt;%</span></span>
<span id="cb18-96"><a href="black-wealth.html#cb18-96" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(muw_tract, <span class="at">by =</span> <span class="st">&quot;tract&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-97"><a href="black-wealth.html#cb18-97" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(pop_data, <span class="at">by =</span> <span class="st">&quot;tract&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-98"><a href="black-wealth.html#cb18-98" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(neighborhood <span class="sc">%not_in%</span> <span class="fu">c</span>(<span class="st">&quot;Airport&quot;</span>, <span class="st">&quot;Minor Lane Heights&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb18-99"><a href="black-wealth.html#cb18-99" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb18-100"><a href="black-wealth.html#cb18-100" aria-hidden="true" tabindex="-1"></a>    <span class="at">estimate =</span> <span class="fu">if_else</span>(estimate <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">9999</span>, <span class="sc">-</span><span class="dv">666666666</span>), <span class="cn">NA_real_</span>, estimate),</span>
<span id="cb18-101"><a href="black-wealth.html#cb18-101" aria-hidden="true" tabindex="-1"></a>    <span class="at">MOE =</span> <span class="fu">if_else</span>(MOE <span class="sc">%in%</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">333333333</span>, <span class="sc">-</span><span class="dv">222222222</span>), <span class="cn">NA_real_</span>, MOE))</span>
<span id="cb18-102"><a href="black-wealth.html#cb18-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-103"><a href="black-wealth.html#cb18-103" aria-hidden="true" tabindex="-1"></a>black_neighborhood_summary <span class="ot">&lt;-</span> t <span class="sc">%&gt;%</span></span>
<span id="cb18-104"><a href="black-wealth.html#cb18-104" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(percent_black <span class="sc">&gt;=</span> <span class="dv">50</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-105"><a href="black-wealth.html#cb18-105" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb18-106"><a href="black-wealth.html#cb18-106" aria-hidden="true" tabindex="-1"></a>    <span class="co">#estimate = weighted.mean(estimate, total, na.rm = T),</span></span>
<span id="cb18-107"><a href="black-wealth.html#cb18-107" aria-hidden="true" tabindex="-1"></a>    <span class="at">estimate =</span> Hmisc<span class="sc">::</span><span class="fu">wtd.quantile</span>(estimate, total, <span class="at">probs =</span> <span class="fl">0.5</span>, <span class="at">na.rm =</span> T),</span>
<span id="cb18-108"><a href="black-wealth.html#cb18-108" aria-hidden="true" tabindex="-1"></a>    <span class="at">MOE =</span> <span class="fu">sqrt</span>(<span class="fu">sum</span>(MOE<span class="sc">^</span><span class="dv">2</span>)))</span>
<span id="cb18-109"><a href="black-wealth.html#cb18-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-110"><a href="black-wealth.html#cb18-110" aria-hidden="true" tabindex="-1"></a>neighborhood_summary <span class="ot">&lt;-</span> t <span class="sc">%&gt;%</span></span>
<span id="cb18-111"><a href="black-wealth.html#cb18-111" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(neighborhood) <span class="sc">%&gt;%</span></span>
<span id="cb18-112"><a href="black-wealth.html#cb18-112" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb18-113"><a href="black-wealth.html#cb18-113" aria-hidden="true" tabindex="-1"></a>    <span class="at">estimate =</span> <span class="fu">weighted.mean</span>(estimate, population),</span>
<span id="cb18-114"><a href="black-wealth.html#cb18-114" aria-hidden="true" tabindex="-1"></a>    <span class="at">MOE =</span> <span class="fu">sqrt</span>(<span class="fu">sum</span>(MOE<span class="sc">^</span><span class="dv">2</span>)))</span>
<span id="cb18-115"><a href="black-wealth.html#cb18-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-116"><a href="black-wealth.html#cb18-116" aria-hidden="true" tabindex="-1"></a>housing_vars_05_5yr <span class="ot">&lt;-</span> <span class="fu">build_census_var_df</span>(<span class="st">&quot;acs5&quot;</span>, <span class="st">&quot;B25082&quot;</span>)</span>
<span id="cb18-117"><a href="black-wealth.html#cb18-117" aria-hidden="true" tabindex="-1"></a>housing_map <span class="ot">&lt;-</span> <span class="fu">get_census</span>(housing_vars_05_5yr, <span class="st">&quot;tract&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2017</span>)</span>
<span id="cb18-118"><a href="black-wealth.html#cb18-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-119"><a href="black-wealth.html#cb18-119" aria-hidden="true" tabindex="-1"></a>t<span class="ot">=</span>housing_map <span class="sc">%&gt;%</span> </span>
<span id="cb18-120"><a href="black-wealth.html#cb18-120" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(label <span class="sc">==</span> <span class="st">&quot;Estimate!!Aggregate value (dollars):&quot;</span>,</span>
<span id="cb18-121"><a href="black-wealth.html#cb18-121" aria-hidden="true" tabindex="-1"></a>         var_type <span class="sc">==</span> <span class="st">&quot;estimate&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-122"><a href="black-wealth.html#cb18-122" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">value =</span> <span class="fu">if_else</span>(value <span class="sc">==</span> <span class="sc">-</span><span class="dv">666666666</span>, <span class="cn">NA_real_</span>, value)) <span class="sc">%&gt;%</span></span>
<span id="cb18-123"><a href="black-wealth.html#cb18-123" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(pop_data, <span class="at">by =</span> <span class="st">&quot;tract&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-124"><a href="black-wealth.html#cb18-124" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(percent_black <span class="sc">&gt;=</span> <span class="dv">50</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-125"><a href="black-wealth.html#cb18-125" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">agg_value =</span> <span class="fu">sum</span>(value, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
</div>
<div id="homeownership-rates" class="section level3 tabset" number="3.4.6">
<h3><span class="header-section-number">3.4.6</span> Homeownership Rates</h3>
<p>Black families both start with less wealth (and therefore less opportunities to build on it even in a ‘fair’ market) and this is compountded at each step of the home ownership process.</p>
<div id="ranking" class="section level4" number="3.4.6.1">
<h4><span class="header-section-number">3.4.6.1</span> Ranking</h4>
<p>Slightly more than 1 in 3 Black Louisville residents own their own homes. While this is roughly toward the middle of our peer cities, it is roughly half the homeownership rate among white residents.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="black-wealth.html#cb19-1" aria-hidden="true" tabindex="-1"></a>housing_df <span class="ot">&lt;-</span> housing_county <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="black-wealth.html#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(var_type <span class="sc">==</span> <span class="st">&quot;percent&quot;</span>) </span>
<span id="cb19-3"><a href="black-wealth.html#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="black-wealth.html#cb19-4" aria-hidden="true" tabindex="-1"></a>housing_df_gap <span class="ot">&lt;-</span> housing_df <span class="sc">%&gt;%</span></span>
<span id="cb19-5"><a href="black-wealth.html#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sex <span class="sc">==</span> <span class="st">&quot;total&quot;</span>, race <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;black&quot;</span>, <span class="st">&quot;white&quot;</span>), var_type <span class="sc">==</span> <span class="st">&quot;percent&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-6"><a href="black-wealth.html#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(FIPS, year, race, homeownership) <span class="sc">%&gt;%</span></span>
<span id="cb19-7"><a href="black-wealth.html#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">values_from =</span> homeownership, <span class="at">names_from =</span> race) <span class="sc">%&gt;%</span></span>
<span id="cb19-8"><a href="black-wealth.html#cb19-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gap =</span> white <span class="sc">-</span> black)</span>
<span id="cb19-9"><a href="black-wealth.html#cb19-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-10"><a href="black-wealth.html#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ranking</span>(housing_df, </span>
<span id="cb19-11"><a href="black-wealth.html#cb19-11" aria-hidden="true" tabindex="-1"></a>        homeownership, </span>
<span id="cb19-12"><a href="black-wealth.html#cb19-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">race =</span> <span class="st">&quot;black&quot;</span>,</span>
<span id="cb19-13"><a href="black-wealth.html#cb19-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">year =</span> <span class="dv">2019</span>,</span>
<span id="cb19-14"><a href="black-wealth.html#cb19-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">text_size =</span> <span class="dv">2</span>, </span>
<span id="cb19-15"><a href="black-wealth.html#cb19-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">FIPS_df =</span> FIPS_df,</span>
<span id="cb19-16"><a href="black-wealth.html#cb19-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot_title =</span> <span class="st">&quot;Black Homeownership&quot;</span>,</span>
<span id="cb19-17"><a href="black-wealth.html#cb19-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">caption =</span> <span class="st">&quot;Source: Greater Louisville Project</span></span>
<span id="cb19-18"><a href="black-wealth.html#cb19-18" aria-hidden="true" tabindex="-1"></a><span class="st">                   GLP analysis of ACS microdata from IPUMS USA&quot;</span>)</span></code></pre></div>
<p><img src="Black_wealth_files/figure-html/black_homeownership_ranking-1.png" width="672" /></p>
</div>
<div id="trend" class="section level4" number="3.4.6.2">
<h4><span class="header-section-number">3.4.6.2</span> Trend</h4>
<p>Homeownership among all Louisville residents, including Black residents, has declined slightly since the early 2000s. Since 2010, Louisville’s racial homeownership gap has been among the largest of our peer cities.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="black-wealth.html#cb20-1" aria-hidden="true" tabindex="-1"></a>housing_df_clean <span class="ot">&lt;-</span> housing_df <span class="sc">%&gt;%</span></span>
<span id="cb20-2"><a href="black-wealth.html#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(FIPS <span class="sc">==</span> <span class="st">&quot;21111&quot;</span>, sex <span class="sc">==</span> <span class="st">&quot;total&quot;</span>, race <span class="sc">%not_in%</span> <span class="fu">c</span>(<span class="st">&quot;other&quot;</span>, <span class="st">&quot;hispanic&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href="black-wealth.html#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">race =</span> <span class="fu">str_to_title</span>(race))</span>
<span id="cb20-4"><a href="black-wealth.html#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="black-wealth.html#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plt_by</span>(housing_df_clean,</span>
<span id="cb20-6"><a href="black-wealth.html#cb20-6" aria-hidden="true" tabindex="-1"></a>       race,</span>
<span id="cb20-7"><a href="black-wealth.html#cb20-7" aria-hidden="true" tabindex="-1"></a>       homeownership,</span>
<span id="cb20-8"><a href="black-wealth.html#cb20-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">title_text =</span> <span class="st">&quot;Homeownership by Race&quot;</span>,</span>
<span id="cb20-9"><a href="black-wealth.html#cb20-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption_text =</span> <span class="st">&quot;Source: Greater Louisville Project</span></span>
<span id="cb20-10"><a href="black-wealth.html#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="st">                       GLP analysis of ACS microdata from IPUMS USA&quot;</span>)</span></code></pre></div>
<p><img src="Black_wealth_files/figure-html/homeownership_trend-1.png" width="672" /></p>
</div>
<div id="map" class="section level4" number="3.4.6.3">
<h4><span class="header-section-number">3.4.6.3</span> Map</h4>
<p>Across Louisville, homeownership varies from less than 10% in some areas to the high 90s in others.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="black-wealth.html#cb21-1" aria-hidden="true" tabindex="-1"></a>housing_map_clean <span class="ot">&lt;-</span> housing_tract <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="black-wealth.html#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(sex <span class="sc">==</span> <span class="st">&quot;total&quot;</span>, race <span class="sc">==</span> <span class="st">&quot;total&quot;</span>, year <span class="sc">==</span> <span class="dv">2017</span>, var_type <span class="sc">==</span> <span class="st">&quot;percent&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="black-wealth.html#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>sex, <span class="sc">-</span>race, <span class="sc">-</span>year, <span class="sc">-</span>var_type)</span>
<span id="cb21-4"><a href="black-wealth.html#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="black-wealth.html#cb21-5" aria-hidden="true" tabindex="-1"></a>jfco_sf <span class="sc">%&lt;&gt;%</span></span>
<span id="cb21-6"><a href="black-wealth.html#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(housing_map_clean, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;GEOID&quot;</span> <span class="ot">=</span> <span class="st">&quot;tract&quot;</span>))</span>
<span id="cb21-7"><a href="black-wealth.html#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="black-wealth.html#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="fu">make_map</span>(homeownership, </span>
<span id="cb21-9"><a href="black-wealth.html#cb21-9" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;Homeownership&quot;</span>,</span>
<span id="cb21-10"><a href="black-wealth.html#cb21-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Percent&quot;</span>,</span>
<span id="cb21-11"><a href="black-wealth.html#cb21-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Source: Greater Louisville Project</span></span>
<span id="cb21-12"><a href="black-wealth.html#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="st">                    ACS table B25106&quot;</span>,</span>
<span id="cb21-13"><a href="black-wealth.html#cb21-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">map_obj =</span> jfco_sf)</span></code></pre></div>
<p><img src="Black_wealth_files/figure-html/homeownership_map-1.png" width="672" /></p>
</div>
</div>
</div>
<div id="household-income-local" class="section level2 tabset" number="3.5">
<h2><span class="header-section-number">3.5</span> Household Income (Local)</h2>
<p>Many activities that lead to wealth-creation, like starting a business or getting a degree, are not directly tied to income. However, the majority of families build wealth by saving the money they earn. Disparities in income lead to larger disparities in wealth.</p>
<div id="trendline" class="section level3" number="3.5.1">
<h3><span class="header-section-number">3.5.1</span> Trendline</h3>
<p>While income for Black Households in Louisville has trended up over the last few years, the median Black household only receives about two-thirds the income of the median Louisville household. After adjusting for inflation, median income declined among Black households from 2000 to 2013 and only surpassed their previous levels in 2017.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="black-wealth.html#cb22-1" aria-hidden="true" tabindex="-1"></a>hh_income_filtered <span class="ot">&lt;-</span> hh_income_county <span class="sc">%&gt;%</span></span>
<span id="cb22-2"><a href="black-wealth.html#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(var_type <span class="sc">==</span> <span class="st">&quot;estimate&quot;</span>, </span>
<span id="cb22-3"><a href="black-wealth.html#cb22-3" aria-hidden="true" tabindex="-1"></a>         race <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;black&quot;</span>, <span class="st">&quot;total&quot;</span>, <span class="st">&quot;white&quot;</span>),</span>
<span id="cb22-4"><a href="black-wealth.html#cb22-4" aria-hidden="true" tabindex="-1"></a>         FIPS <span class="sc">==</span> <span class="st">&quot;21111&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-5"><a href="black-wealth.html#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">race =</span> <span class="fu">str_to_title</span>(race))</span>
<span id="cb22-6"><a href="black-wealth.html#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="black-wealth.html#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="fu">plt_by</span>(hh_income_filtered,</span>
<span id="cb22-8"><a href="black-wealth.html#cb22-8" aria-hidden="true" tabindex="-1"></a>       race,</span>
<span id="cb22-9"><a href="black-wealth.html#cb22-9" aria-hidden="true" tabindex="-1"></a>       hh_income,</span>
<span id="cb22-10"><a href="black-wealth.html#cb22-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">y_axis =</span> <span class="st">&quot;Dollars&quot;</span>,</span>
<span id="cb22-11"><a href="black-wealth.html#cb22-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">units =</span> <span class="st">&quot;Dollars&quot;</span>,</span>
<span id="cb22-12"><a href="black-wealth.html#cb22-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">title_text =</span> <span class="st">&quot;Household Income by Race&quot;</span>,</span>
<span id="cb22-13"><a href="black-wealth.html#cb22-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle_text =</span> <span class="st">&quot;Adjusted for inflation to 2019 dollars&quot;</span>,</span>
<span id="cb22-14"><a href="black-wealth.html#cb22-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption_text =</span> <span class="st">&quot;Source: Greater Louisville Project</span></span>
<span id="cb22-15"><a href="black-wealth.html#cb22-15" aria-hidden="true" tabindex="-1"></a><span class="st">                       ACS Tables P053, P152, B19013&quot;</span>)</span></code></pre></div>
<p><img src="Black_wealth_files/figure-html/hh_income_ranking-1.png" width="672" /></p>
</div>
<div id="map-1" class="section level3" number="3.5.2">
<h3><span class="header-section-number">3.5.2</span> Map</h3>
<p>The median household income varies widely across Louisville, ranging from under $20,000 in some areas to over $150,000 in others.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="black-wealth.html#cb23-1" aria-hidden="true" tabindex="-1"></a>hh_income_tract_clean <span class="ot">&lt;-</span> hh_income_tract <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="black-wealth.html#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2016</span>,</span>
<span id="cb23-3"><a href="black-wealth.html#cb23-3" aria-hidden="true" tabindex="-1"></a>         race <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;total&quot;</span>, <span class="st">&quot;black&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb23-4"><a href="black-wealth.html#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> race, <span class="at">values_from =</span> hh_income, <span class="at">names_prefix =</span> <span class="st">&quot;hh_income_&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-5"><a href="black-wealth.html#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>year, <span class="sc">-</span>sex)</span>
<span id="cb23-6"><a href="black-wealth.html#cb23-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-7"><a href="black-wealth.html#cb23-7" aria-hidden="true" tabindex="-1"></a>jfco_sf <span class="sc">%&lt;&gt;%</span></span>
<span id="cb23-8"><a href="black-wealth.html#cb23-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(hh_income_tract_clean, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;GEOID&quot;</span> <span class="ot">=</span> <span class="st">&quot;tract&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb23-9"><a href="black-wealth.html#cb23-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">hh_income_black =</span> <span class="fu">if_else</span>(hh_income_black <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">1000000</span>, <span class="cn">NA_real_</span>, hh_income_black))</span>
<span id="cb23-10"><a href="black-wealth.html#cb23-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-11"><a href="black-wealth.html#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make_map</span>(hh_income_total, </span>
<span id="cb23-12"><a href="black-wealth.html#cb23-12" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;Median Household income&quot;</span>,</span>
<span id="cb23-13"><a href="black-wealth.html#cb23-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Dollars&quot;</span>,</span>
<span id="cb23-14"><a href="black-wealth.html#cb23-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Source: Greater Louisville Project</span></span>
<span id="cb23-15"><a href="black-wealth.html#cb23-15" aria-hidden="true" tabindex="-1"></a><span class="st">                    ACS Table B19013&quot;</span>,</span>
<span id="cb23-16"><a href="black-wealth.html#cb23-16" aria-hidden="true" tabindex="-1"></a>         <span class="at">map_obj =</span> jfco_sf)</span></code></pre></div>
<p><img src="Black_wealth_files/figure-html/hh_income_map-1.png" width="672" /></p>
</div>
</div>
<div id="the-tip-of-the-iceberg" class="section level2" number="3.6">
<h2><span class="header-section-number">3.6</span> The Tip of the Iceberg</h2>
<p>We have the most data on housing, income, and businesses, but these are not the only areas of wealth building where systemic inequality is pervasive. Black families start with less wealth (and therefore have less opportunities to build on it even in an ‘equal’ market) and face discrimination at each step of the process. A better understanding of what metrics are important for describing Black wealth in both quantitative and qualitative terms is important to improve our work in this area, and we welcome input.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="digital-divide.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["book_files.pdf", "book_files.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
