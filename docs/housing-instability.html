<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Housing Instability | Black Wealth in Louisville</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Housing Instability | Black Wealth in Louisville" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Housing Instability | Black Wealth in Louisville" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="Greater Louisville Project" />


<meta name="date" content="2021-01-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="digital-divide.html"/>
<link rel="next" href="early-childhood.html"/>
<script src="libs/header-attrs-2.9/header-attrs.js"></script>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<link href="libs/panelset-0.2.6/panelset.css" rel="stylesheet" />
<script src="libs/panelset-0.2.6/panelset.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.4.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>

<script>
/* ========================================================================
 * Bootstrap: transition.js v3.3.7
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // CSS TRANSITION SUPPORT (Shoutout: http://www.modernizr.com/)
  // ============================================================

  function transitionEnd() {
    var el = document.createElement('bootstrap')

    var transEndEventNames = {
      WebkitTransition : 'webkitTransitionEnd',
      MozTransition    : 'transitionend',
      OTransition      : 'oTransitionEnd otransitionend',
      transition       : 'transitionend'
    }

    for (var name in transEndEventNames) {
      if (el.style[name] !== undefined) {
        return { end: transEndEventNames[name] }
      }
    }

    return false // explicit for ie8 (  ._.)
  }

  // http://blog.alexmaccaw.com/css-transitions
  $.fn.emulateTransitionEnd = function (duration) {
    var called = false
    var $el = this
    $(this).one('bsTransitionEnd', function () { called = true })
    var callback = function () { if (!called) $($el).trigger($.support.transition.end) }
    setTimeout(callback, duration)
    return this
  }

  $(function () {
    $.support.transition = transitionEnd()

    if (!$.support.transition) return

    $.event.special.bsTransitionEnd = {
      bindType: $.support.transition.end,
      delegateType: $.support.transition.end,
      handle: function (e) {
        if ($(e.target).is(this)) return e.handleObj.handler.apply(this, arguments)
      }
    }
  })

}(jQuery);
</script>
<script>
/* ========================================================================
 * Bootstrap: collapse.js v3.3.7
 * http://getbootstrap.com/javascript/#collapse
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* jshint latedef: false */

+function ($) {
  'use strict';

  // COLLAPSE PUBLIC CLASS DEFINITION
  // ================================

  var Collapse = function (element, options) {
    this.$element      = $(element)
    this.options       = $.extend({}, Collapse.DEFAULTS, options)
    this.$trigger      = $('[data-toggle="collapse"][href="#' + element.id + '"],' +
                           '[data-toggle="collapse"][data-target="#' + element.id + '"]')
    this.transitioning = null

    if (this.options.parent) {
      this.$parent = this.getParent()
    } else {
      this.addAriaAndCollapsedClass(this.$element, this.$trigger)
    }

    if (this.options.toggle) this.toggle()
  }

  Collapse.VERSION  = '3.3.7'

  Collapse.TRANSITION_DURATION = 350

  Collapse.DEFAULTS = {
    toggle: true
  }

  Collapse.prototype.dimension = function () {
    var hasWidth = this.$element.hasClass('width')
    return hasWidth ? 'width' : 'height'
  }

  Collapse.prototype.show = function () {
    if (this.transitioning || this.$element.hasClass('in')) return

    var activesData
    var actives = this.$parent && this.$parent.children('.panel').children('.in, .collapsing')

    if (actives && actives.length) {
      activesData = actives.data('bs.collapse')
      if (activesData && activesData.transitioning) return
    }

    var startEvent = $.Event('show.bs.collapse')
    this.$element.trigger(startEvent)
    if (startEvent.isDefaultPrevented()) return

    if (actives && actives.length) {
      Plugin.call(actives, 'hide')
      activesData || actives.data('bs.collapse', null)
    }

    var dimension = this.dimension()

    this.$element
      .removeClass('collapse')
      .addClass('collapsing')[dimension](0)
      .attr('aria-expanded', true)

    this.$trigger
      .removeClass('collapsed')
      .attr('aria-expanded', true)

    this.transitioning = 1

    var complete = function () {
      this.$element
        .removeClass('collapsing')
        .addClass('collapse in')[dimension]('')
      this.transitioning = 0
      this.$element
        .trigger('shown.bs.collapse')
    }

    if (!$.support.transition) return complete.call(this)

    var scrollSize = $.camelCase(['scroll', dimension].join('-'))

    this.$element
      .one('bsTransitionEnd', $.proxy(complete, this))
      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])
  }

  Collapse.prototype.hide = function () {
    if (this.transitioning || !this.$element.hasClass('in')) return

    var startEvent = $.Event('hide.bs.collapse')
    this.$element.trigger(startEvent)
    if (startEvent.isDefaultPrevented()) return

    var dimension = this.dimension()

    this.$element[dimension](this.$element[dimension]())[0].offsetHeight

    this.$element
      .addClass('collapsing')
      .removeClass('collapse in')
      .attr('aria-expanded', false)

    this.$trigger
      .addClass('collapsed')
      .attr('aria-expanded', false)

    this.transitioning = 1

    var complete = function () {
      this.transitioning = 0
      this.$element
        .removeClass('collapsing')
        .addClass('collapse')
        .trigger('hidden.bs.collapse')
    }

    if (!$.support.transition) return complete.call(this)

    this.$element
      [dimension](0)
      .one('bsTransitionEnd', $.proxy(complete, this))
      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)
  }

  Collapse.prototype.toggle = function () {
    this[this.$element.hasClass('in') ? 'hide' : 'show']()
  }

  Collapse.prototype.getParent = function () {
    return $(this.options.parent)
      .find('[data-toggle="collapse"][data-parent="' + this.options.parent + '"]')
      .each($.proxy(function (i, element) {
        var $element = $(element)
        this.addAriaAndCollapsedClass(getTargetFromTrigger($element), $element)
      }, this))
      .end()
  }

  Collapse.prototype.addAriaAndCollapsedClass = function ($element, $trigger) {
    var isOpen = $element.hasClass('in')

    $element.attr('aria-expanded', isOpen)
    $trigger
      .toggleClass('collapsed', !isOpen)
      .attr('aria-expanded', isOpen)
  }

  function getTargetFromTrigger($trigger) {
    var href
    var target = $trigger.attr('data-target')
      || (href = $trigger.attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '') // strip for ie7

    return $(target)
  }


  // COLLAPSE PLUGIN DEFINITION
  // ==========================

  function Plugin(option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.collapse')
      var options = $.extend({}, Collapse.DEFAULTS, $this.data(), typeof option == 'object' && option)

      if (!data && options.toggle && /show|hide/.test(option)) options.toggle = false
      if (!data) $this.data('bs.collapse', (data = new Collapse(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  var old = $.fn.collapse

  $.fn.collapse             = Plugin
  $.fn.collapse.Constructor = Collapse


  // COLLAPSE NO CONFLICT
  // ====================

  $.fn.collapse.noConflict = function () {
    $.fn.collapse = old
    return this
  }


  // COLLAPSE DATA-API
  // =================

  $(document).on('click.bs.collapse.data-api', '[data-toggle="collapse"]', function (e) {
    var $this   = $(this)

    if (!$this.attr('data-target')) e.preventDefault()

    var $target = getTargetFromTrigger($this)
    var data    = $target.data('bs.collapse')
    var option  = data ? 'toggle' : $this.data()

    Plugin.call($target, option)
  })

}(jQuery);
</script>
<script>
window.initializeCodeFolding = function(show) {

  // handlers for show-all and hide all
  $("#rmd-show-all-code").click(function() {
    // close the dropdown menu when an option is clicked
    $("#allCodeButton").dropdown("toggle");
    $('div.r-code-collapse').each(function() {
      $(this).collapse('show');
    });
  });
  $("#rmd-hide-all-code").click(function() {
    // close the dropdown menu when an option is clicked
    $("#allCodeButton").dropdown("toggle");
    $('div.r-code-collapse').each(function() {
      $(this).collapse('hide');
    });
  });

  // index for unique code element ids
  var currentIndex = 1;

  // select all R code blocks
  var rCodeBlocks = $('pre.sourceCode, pre.r, pre.python, pre.bash, pre.sql, pre.cpp, pre.stan');
  rCodeBlocks.each(function() {

    // if code block has been labeled with class `fold-show`, show the code on init!
    var classList = $(this).attr('class').split(/\s+/);
    for (var i = 0; i < classList.length; i++) {
    if (classList[i] === 'fold-show') {
        show = true;
      }
    }

    // create a collapsable div to wrap the code in
    var div = $('<div class="collapse r-code-collapse"></div>');
    if (show)
      div.addClass('in');
    var id = 'rcode-643E0F36' + currentIndex++;
    div.attr('id', id);
    $(this).before(div);
    $(this).detach().appendTo(div);

    // add a show code button right above
    var showCodeText = $('<span>' + (show ? 'Hide' : 'Code') + '</span>');
    var showCodeButton = $('<button type="button" class="btn btn-default btn-xs code-folding-btn pull-right"></button>');
    showCodeButton.append(showCodeText);
    showCodeButton
        .attr('data-toggle', 'collapse')
        .attr('data-target', '#' + id)
        .attr('aria-expanded', show)
        .attr('aria-controls', id);

    var buttonRow = $('<div class="row"></div>');
    var buttonCol = $('<div class="col-md-12"></div>');

    buttonCol.append(showCodeButton);
    buttonRow.append(buttonCol);

    div.before(buttonRow);

    // hack: return show to false, otherwise all next codeBlocks will be shown!
    show = false;

    // update state of button on show/hide
    div.on('hidden.bs.collapse', function () {
      showCodeText.text('Code');
    });
    div.on('show.bs.collapse', function () {
      showCodeText.text('Hide');
    });
  });

}
</script>
<script>
/* ========================================================================
 * Bootstrap: dropdown.js v3.3.7
 * http://getbootstrap.com/javascript/#dropdowns
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // DROPDOWN CLASS DEFINITION
  // =========================

  var backdrop = '.dropdown-backdrop'
  var toggle   = '[data-toggle="dropdown"]'
  var Dropdown = function (element) {
    $(element).on('click.bs.dropdown', this.toggle)
  }

  Dropdown.VERSION = '3.3.7'

  function getParent($this) {
    var selector = $this.attr('data-target')

    if (!selector) {
      selector = $this.attr('href')
      selector = selector && /#[A-Za-z]/.test(selector) && selector.replace(/.*(?=#[^\s]*$)/, '') // strip for ie7
    }

    var $parent = selector && $(selector)

    return $parent && $parent.length ? $parent : $this.parent()
  }

  function clearMenus(e) {
    if (e && e.which === 3) return
    $(backdrop).remove()
    $(toggle).each(function () {
      var $this         = $(this)
      var $parent       = getParent($this)
      var relatedTarget = { relatedTarget: this }

      if (!$parent.hasClass('open')) return

      if (e && e.type == 'click' && /input|textarea/i.test(e.target.tagName) && $.contains($parent[0], e.target)) return

      $parent.trigger(e = $.Event('hide.bs.dropdown', relatedTarget))

      if (e.isDefaultPrevented()) return

      $this.attr('aria-expanded', 'false')
      $parent.removeClass('open').trigger($.Event('hidden.bs.dropdown', relatedTarget))
    })
  }

  Dropdown.prototype.toggle = function (e) {
    var $this = $(this)

    if ($this.is('.disabled, :disabled')) return

    var $parent  = getParent($this)
    var isActive = $parent.hasClass('open')

    clearMenus()

    if (!isActive) {
      if ('ontouchstart' in document.documentElement && !$parent.closest('.navbar-nav').length) {
        // if mobile we use a backdrop because click events don't delegate
        $(document.createElement('div'))
          .addClass('dropdown-backdrop')
          .insertAfter($(this))
          .on('click', clearMenus)
      }

      var relatedTarget = { relatedTarget: this }
      $parent.trigger(e = $.Event('show.bs.dropdown', relatedTarget))

      if (e.isDefaultPrevented()) return

      $this
        .trigger('focus')
        .attr('aria-expanded', 'true')

      $parent
        .toggleClass('open')
        .trigger($.Event('shown.bs.dropdown', relatedTarget))
    }

    return false
  }

  Dropdown.prototype.keydown = function (e) {
    if (!/(38|40|27|32)/.test(e.which) || /input|textarea/i.test(e.target.tagName)) return

    var $this = $(this)

    e.preventDefault()
    e.stopPropagation()

    if ($this.is('.disabled, :disabled')) return

    var $parent  = getParent($this)
    var isActive = $parent.hasClass('open')

    if (!isActive && e.which != 27 || isActive && e.which == 27) {
      if (e.which == 27) $parent.find(toggle).trigger('focus')
      return $this.trigger('click')
    }

    var desc = ' li:not(.disabled):visible a'
    var $items = $parent.find('.dropdown-menu' + desc)

    if (!$items.length) return

    var index = $items.index(e.target)

    if (e.which == 38 && index > 0)                 index--         // up
    if (e.which == 40 && index < $items.length - 1) index++         // down
    if (!~index)                                    index = 0

    $items.eq(index).trigger('focus')
  }


  // DROPDOWN PLUGIN DEFINITION
  // ==========================

  function Plugin(option) {
    return this.each(function () {
      var $this = $(this)
      var data  = $this.data('bs.dropdown')

      if (!data) $this.data('bs.dropdown', (data = new Dropdown(this)))
      if (typeof option == 'string') data[option].call($this)
    })
  }

  var old = $.fn.dropdown

  $.fn.dropdown             = Plugin
  $.fn.dropdown.Constructor = Dropdown


  // DROPDOWN NO CONFLICT
  // ====================

  $.fn.dropdown.noConflict = function () {
    $.fn.dropdown = old
    return this
  }


  // APPLY TO STANDARD DROPDOWN ELEMENTS
  // ===================================

  $(document)
    .on('click.bs.dropdown.data-api', clearMenus)
    .on('click.bs.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() })
    .on('click.bs.dropdown.data-api', toggle, Dropdown.prototype.toggle)
    .on('keydown.bs.dropdown.data-api', toggle, Dropdown.prototype.keydown)
    .on('keydown.bs.dropdown.data-api', '.dropdown-menu', Dropdown.prototype.keydown)

}(jQuery);
</script>
<style type="text/css">
.code-folding-btn {
  margin-bottom: 4px;
}

.row { display: flex; }
.collapse { display: none; }
.in { display:block }
.pull-right > .dropdown-menu {
    right: 0;
    left: auto;
}

.dropdown-menu {
    position: absolute;
    top: 100%;
    left: 0;
    z-index: 1000;
    display: none;
    float: left;
    min-width: 160px;
    padding: 5px 0;
    margin: 2px 0 0;
    font-size: 14px;
    text-align: left;
    list-style: none;
    background-color: #fff;
    -webkit-background-clip: padding-box;
    background-clip: padding-box;
    border: 1px solid #ccc;
    border: 1px solid rgba(0,0,0,.15);
    border-radius: 4px;
    -webkit-box-shadow: 0 6px 12px rgba(0,0,0,.175);
    box-shadow: 0 6px 12px rgba(0,0,0,.175);
}

.open > .dropdown-menu {
    display: block;
    color: #ffffff;
    background-color: #ffffff;
    background-image: none;
    border-color: #92897e;
}

.dropdown-menu > li > a {
  display: block;
  padding: 3px 20px;
  clear: both;
  font-weight: 400;
  line-height: 1.42857143;
  color: #000000;
  white-space: nowrap;
}

.dropdown-menu > li > a:hover,
.dropdown-menu > li > a:focus {
  color: #ffffff;
  text-decoration: none;
  background-color: #e95420;
}

.dropdown-menu > .active > a,
.dropdown-menu > .active > a:hover,
.dropdown-menu > .active > a:focus {
  color: #ffffff;
  text-decoration: none;
  background-color: #e95420;
  outline: 0;
}
.dropdown-menu > .disabled > a,
.dropdown-menu > .disabled > a:hover,
.dropdown-menu > .disabled > a:focus {
  color: #aea79f;
}

.dropdown-menu > .disabled > a:hover,
.dropdown-menu > .disabled > a:focus {
  text-decoration: none;
  cursor: not-allowed;
  background-color: transparent;
  background-image: none;
  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
}

.btn {
  display: inline-block;
  margin-bottom: 1;
  font-weight: normal;
  text-align: center;
  white-space: nowrap;
  vertical-align: middle;
  -ms-touch-action: manipulation;
      touch-action: manipulation;
  cursor: pointer;
  background-image: none;
  border: 1px solid transparent;
  padding: 4px 8px;
  font-size: 14px;
  line-height: 1.42857143;
  border-radius: 4px;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.btn:focus,
.btn:active:focus,
.btn.active:focus,
.btn.focus,
.btn:active.focus,
.btn.active.focus {
  outline: 5px auto -webkit-focus-ring-color;
  outline-offset: -2px;
}
.btn:hover,
.btn:focus,
.btn.focus {
  color: #ffffff;
  text-decoration: none;
}
.btn:active,
.btn.active {
  background-image: none;
  outline: 0;
  box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
}
.btn.disabled,
.btn[disabled],
fieldset[disabled] .btn {
  cursor: not-allowed;
  filter: alpha(opacity=65);
  opacity: 0.65;
  box-shadow: none;
}
a.btn.disabled,
fieldset[disabled] a.btn {
  pointer-events: none;
}
.btn-default {
  color: #ffffff;
  background-color: #aea79f; #important
  border-color: #aea79f;
}

.btn-default:focus,
.btn-default.focus {
  color: #ffffff;
  background-color: #978e83;
  border-color: #6f675e;
}

.btn-default:hover {
  color: #ffffff;
  background-color: #978e83;
  border-color: #92897e;
}
.btn-default:active,
.btn-default.active,
.btn-group > .btn:not(:first-child):not(:last-child):not(.dropdown-toggle) {
  border-radius: 0;
}
.btn-group > .btn:first-child {
  margin-left: 0;
}
.btn-group > .btn:first-child:not(:last-child):not(.dropdown-toggle) {
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
}
.btn-group > .btn:last-child:not(:first-child),
.btn-group > .dropdown-toggle:not(:first-child) {
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
}
.btn-group > .btn-group {
  float: left;
}
.btn-group > .btn-group:not(:first-child):not(:last-child) > .btn {
  border-radius: 0;
}
.btn-group > .btn-group:first-child:not(:last-child) > .btn:last-child,
.btn-group > .btn-group:first-child:not(:last-child) > .dropdown-toggle {
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
}
.btn-group > .btn-group:last-child:not(:first-child) > .btn:first-child {
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
}
.btn-group .dropdown-toggle:active,
.btn-group.open .dropdown-toggle {
  outline: 0;
}
.btn-group > .btn + .dropdown-toggle {
  padding-right: 8px;
  padding-left: 8px;
}
.btn-group > .btn-lg + .dropdown-toggle {
  padding-right: 12px;
  padding-left: 12px;
}
.btn-group.open .dropdown-toggle {
  box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
}
.btn-group.open .dropdown-toggle.btn-link {
  box-shadow: none;
}

</style>
<script>
var str = '<div class="btn-group pull-right" style="position: fixed; right: 50px; top: 10px; z-index: 200"><button type="button" class="btn btn-default btn-xs dropdown-toggle" id="allCodeButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" data-_extension-text-contrast=""><span>Code</span> <span class="caret"></span></button><ul class="dropdown-menu" style="min-width: 50px;"><li><a id="rmd-show-all-code" href="#">Show All Code</a></li><li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li></ul></div>';
document.write(str);
</script>
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "hide");
});
</script>

<script>
function unrolltab(evt, tabName) {
  var i, tabcontent, tablinks;
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }
  document.getElementById(tabName).style.display = "block";
  evt.currentTarget.className += " active";
}
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="tabs.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Measuring A Path Forward</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="digital-divide.html"><a href="digital-divide.html"><i class="fa fa-check"></i><b>2</b> Digital Divide</a>
<ul>
<li class="chapter" data-level="2.1" data-path="digital-divide.html"><a href="digital-divide.html#overall-access"><i class="fa fa-check"></i><b>2.1</b> Overall Access</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="digital-divide.html"><a href="digital-divide.html#high-speed-internet"><i class="fa fa-check"></i><b>2.1.1</b> High Speed Internet</a></li>
<li class="chapter" data-level="2.1.2" data-path="digital-divide.html"><a href="digital-divide.html#digital-devices"><i class="fa fa-check"></i><b>2.1.2</b> Digital Devices</a></li>
<li class="chapter" data-level="2.1.3" data-path="digital-divide.html"><a href="digital-divide.html#internet-and-devices"><i class="fa fa-check"></i><b>2.1.3</b> Internet and Devices</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="digital-divide.html"><a href="digital-divide.html#across-louisville"><i class="fa fa-check"></i><b>2.2</b> Across Louisville</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="digital-divide.html"><a href="digital-divide.html#internet-speed"><i class="fa fa-check"></i><b>2.2.1</b> Internet Speed</a></li>
<li class="chapter" data-level="2.2.2" data-path="digital-divide.html"><a href="digital-divide.html#poverty"><i class="fa fa-check"></i><b>2.2.2</b> Poverty</a></li>
<li class="chapter" data-level="2.2.3" data-path="digital-divide.html"><a href="digital-divide.html#race"><i class="fa fa-check"></i><b>2.2.3</b> Race</a></li>
<li class="chapter" data-level="2.2.4" data-path="digital-divide.html"><a href="digital-divide.html#age"><i class="fa fa-check"></i><b>2.2.4</b> Age</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="digital-divide.html"><a href="digital-divide.html#child-internet-access"><i class="fa fa-check"></i><b>2.3</b> Child Internet Access</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="digital-divide.html"><a href="digital-divide.html#school-age-children"><i class="fa fa-check"></i><b>2.3.1</b> School Age Children</a></li>
<li class="chapter" data-level="2.3.2" data-path="digital-divide.html"><a href="digital-divide.html#metro-council-districts"><i class="fa fa-check"></i><b>2.3.2</b> Metro Council Districts</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="digital-divide.html"><a href="digital-divide.html#internet-as-a-public-utility"><i class="fa fa-check"></i><b>2.4</b> Internet as a Public Utility</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="digital-divide.html"><a href="digital-divide.html#local-efforts"><i class="fa fa-check"></i><b>2.4.1</b> Local Efforts</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="housing-instability.html"><a href="housing-instability.html"><i class="fa fa-check"></i><b>3</b> Housing Instability</a>
<ul>
<li class="chapter" data-level="3.1" data-path="housing-instability.html"><a href="housing-instability.html#methods-and-definitions"><i class="fa fa-check"></i><b>3.1</b> Methods and Definitions</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="housing-instability.html"><a href="housing-instability.html#housing-instability-index"><i class="fa fa-check"></i><b>3.1.1</b> Housing Instability Index</a></li>
<li class="chapter" data-level="3.1.2" data-path="housing-instability.html"><a href="housing-instability.html#covid-index"><i class="fa fa-check"></i><b>3.1.2</b> Covid Index</a></li>
<li class="chapter" data-level="3.1.3" data-path="housing-instability.html"><a href="housing-instability.html#equity-index"><i class="fa fa-check"></i><b>3.1.3</b> Equity Index</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="housing-instability.html"><a href="housing-instability.html#rental-insecurity-index"><i class="fa fa-check"></i><b>3.2</b> Rental Insecurity Index</a></li>
<li class="chapter" data-level="3.3" data-path="housing-instability.html"><a href="housing-instability.html#housing-instability-indicators"><i class="fa fa-check"></i><b>3.3</b> Housing Instability Indicators</a></li>
<li class="chapter" data-level="3.4" data-path="housing-instability.html"><a href="housing-instability.html#covid-indicators"><i class="fa fa-check"></i><b>3.4</b> Covid Indicators</a></li>
<li class="chapter" data-level="3.7" data-path="housing-instability.html"><a href="housing-instability.html#metro-council-district-maps"><i class="fa fa-check"></i><b>3.7</b> Metro Council District Maps</a></li>
<li class="chapter" data-level="3.8" data-path="housing-instability.html"><a href="housing-instability.html#metro-council-tables"><i class="fa fa-check"></i><b>3.8</b> Metro Council Tables</a></li>
<li class="chapter" data-level="3.9" data-path="housing-instability.html"><a href="housing-instability.html#home-mortgages"><i class="fa fa-check"></i><b>3.9</b> Home Mortgages</a>
<ul>
<li class="chapter" data-level="3.9.1" data-path="housing-instability.html"><a href="housing-instability.html#mortgages-by-geography"><i class="fa fa-check"></i><b>3.9.1</b> Mortgages by geography</a></li>
<li class="chapter" data-level="3.9.2" data-path="housing-instability.html"><a href="housing-instability.html#mortgages-by-race"><i class="fa fa-check"></i><b>3.9.2</b> Mortgages by race</a></li>
<li class="chapter" data-level="3.9.3" data-path="housing-instability.html"><a href="housing-instability.html#mortgage-dollars-by-race"><i class="fa fa-check"></i><b>3.9.3</b> Mortgage Dollars by race</a></li>
<li class="chapter" data-level="3.9.4" data-path="housing-instability.html"><a href="housing-instability.html#denial-rates-by-race"><i class="fa fa-check"></i><b>3.9.4</b> Denial Rates by Race</a></li>
<li class="chapter" data-level="3.9.5" data-path="housing-instability.html"><a href="housing-instability.html#denial-rates-by-geography"><i class="fa fa-check"></i><b>3.9.5</b> Denial Rates by Geography</a></li>
<li class="chapter" data-level="3.9.6" data-path="housing-instability.html"><a href="housing-instability.html#interest-rates-by-geography"><i class="fa fa-check"></i><b>3.9.6</b> Interest Rates by geography</a></li>
</ul></li>
<li class="chapter" data-level="3.10" data-path="housing-instability.html"><a href="housing-instability.html#housing-price-changes"><i class="fa fa-check"></i><b>3.10</b> Housing Price Changes</a>
<ul>
<li class="chapter" data-level="3.10.1" data-path="housing-instability.html"><a href="housing-instability.html#long-term-appreciation"><i class="fa fa-check"></i><b>3.10.1</b> Long-term appreciation</a></li>
<li class="chapter" data-level="3.10.2" data-path="housing-instability.html"><a href="housing-instability.html#short-term-appreciation"><i class="fa fa-check"></i><b>3.10.2</b> Short-term appreciation</a></li>
</ul></li>
<li class="chapter" data-level="3.11" data-path="housing-instability.html"><a href="housing-instability.html#housing-availability"><i class="fa fa-check"></i><b>3.11</b> Housing Availability</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="early-childhood.html"><a href="early-childhood.html"><i class="fa fa-check"></i><b>4</b> Early Childhood</a>
<ul>
<li class="chapter" data-level="4.1" data-path="early-childhood.html"><a href="early-childhood.html#introduction-1"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="early-childhood.html"><a href="early-childhood.html#kindergarten-readiness"><i class="fa fa-check"></i><b>4.2</b> Kindergarten Readiness</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="early-childhood.html"><a href="early-childhood.html#overall-readiness"><i class="fa fa-check"></i><b>4.2.1</b> Overall Readiness</a></li>
<li class="chapter" data-level="4.2.2" data-path="early-childhood.html"><a href="early-childhood.html#by-race"><i class="fa fa-check"></i><b>4.2.2</b> by Race</a></li>
<li class="chapter" data-level="4.2.3" data-path="early-childhood.html"><a href="early-childhood.html#by-prior-setting"><i class="fa fa-check"></i><b>4.2.3</b> by Prior Setting</a></li>
<li class="chapter" data-level="4.2.4" data-path="early-childhood.html"><a href="early-childhood.html#by-race-and-prior-setting"><i class="fa fa-check"></i><b>4.2.4</b> by Race and Prior setting</a></li>
<li class="chapter" data-level="4.2.5" data-path="early-childhood.html"><a href="early-childhood.html#by-geography"><i class="fa fa-check"></i><b>4.2.5</b> by Geography</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="early-childhood.html"><a href="early-childhood.html#early-child-care"><i class="fa fa-check"></i><b>4.3</b> Early Child Care</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="early-childhood.html"><a href="early-childhood.html#cost"><i class="fa fa-check"></i><b>4.3.1</b> Cost</a></li>
<li class="chapter" data-level="4.3.2" data-path="early-childhood.html"><a href="early-childhood.html#location"><i class="fa fa-check"></i><b>4.3.2</b> Location</a></li>
<li class="chapter" data-level="4.3.3" data-path="early-childhood.html"><a href="early-childhood.html#hours"><i class="fa fa-check"></i><b>4.3.3</b> Hours</a></li>
<li class="chapter" data-level="4.3.4" data-path="early-childhood.html"><a href="early-childhood.html#compensation-of-child-care-workers"><i class="fa fa-check"></i><b>4.3.4</b> Compensation of Child Care Workers</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="early-childhood.html"><a href="early-childhood.html#child-health"><i class="fa fa-check"></i><b>4.4</b> Child Health</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="early-childhood.html"><a href="early-childhood.html#adverse-childhood-experiences"><i class="fa fa-check"></i><b>4.4.1</b> Adverse Childhood Experiences</a></li>
<li class="chapter" data-level="4.4.2" data-path="early-childhood.html"><a href="early-childhood.html#child-food-security"><i class="fa fa-check"></i><b>4.4.2</b> Child Food Security</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="black-wealth.html"><a href="black-wealth.html"><i class="fa fa-check"></i><b>5</b> Black Wealth</a>
<ul>
<li class="chapter" data-level="5.1" data-path="black-wealth.html"><a href="black-wealth.html#introduction-2"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="black-wealth.html"><a href="black-wealth.html#wealth-national"><i class="fa fa-check"></i><b>5.2</b> Wealth (National)</a></li>
<li class="chapter" data-level="5.3" data-path="black-wealth.html"><a href="black-wealth.html#business-ownership-local"><i class="fa fa-check"></i><b>5.3</b> Business Ownership (Local)</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="black-wealth.html"><a href="black-wealth.html#comparison-to-peer-cities"><i class="fa fa-check"></i><b>5.3.1</b> Comparison to peer cities</a></li>
<li class="chapter" data-level="5.3.2" data-path="black-wealth.html"><a href="black-wealth.html#peer-ranking"><i class="fa fa-check"></i><b>5.3.2</b> Peer Ranking</a></li>
<li class="chapter" data-level="5.3.3" data-path="black-wealth.html"><a href="black-wealth.html#local-business-creation"><i class="fa fa-check"></i><b>5.3.3</b> Local business creation</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="black-wealth.html"><a href="black-wealth.html#homeownership-local"><i class="fa fa-check"></i><b>5.4</b> Homeownership (Local)</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="black-wealth.html"><a href="black-wealth.html#home-mortgages-1"><i class="fa fa-check"></i><b>5.4.1</b> Home Mortgages</a></li>
<li class="chapter" data-level="5.4.2" data-path="black-wealth.html"><a href="black-wealth.html#housing-price-changes-1"><i class="fa fa-check"></i><b>5.4.2</b> Housing Price Changes</a></li>
<li class="chapter" data-level="5.4.3" data-path="black-wealth.html"><a href="black-wealth.html#home-valuation-by-geography"><i class="fa fa-check"></i><b>5.4.3</b> Home Valuation by Geography</a></li>
<li class="chapter" data-level="5.4.4" data-path="black-wealth.html"><a href="black-wealth.html#property-taxes"><i class="fa fa-check"></i><b>5.4.4</b> Property Taxes</a></li>
<li class="chapter" data-level="5.4.5" data-path="black-wealth.html"><a href="black-wealth.html#undervaluation-and-overtaxation"><i class="fa fa-check"></i><b>5.4.5</b> Undervaluation and Overtaxation</a></li>
<li class="chapter" data-level="5.4.6" data-path="black-wealth.html"><a href="black-wealth.html#homeownership-rates"><i class="fa fa-check"></i><b>5.4.6</b> Homeownership Rates</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="black-wealth.html"><a href="black-wealth.html#household-income-local"><i class="fa fa-check"></i><b>5.5</b> Household Income (Local)</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="black-wealth.html"><a href="black-wealth.html#trendline"><i class="fa fa-check"></i><b>5.5.1</b> Trendline</a></li>
<li class="chapter" data-level="5.5.2" data-path="black-wealth.html"><a href="black-wealth.html#map-1"><i class="fa fa-check"></i><b>5.5.2</b> Map</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="black-wealth.html"><a href="black-wealth.html#the-tip-of-the-iceberg"><i class="fa fa-check"></i><b>5.6</b> The Tip of the Iceberg</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Black Wealth in Louisville</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="housing-instability" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Housing Instability</h1>
<p>This recreates the Urban Institute’s <a href="https://www.urban.org/features/where-prioritize-emergency-rental-assistance-keep-renters-their-homes">Emergency Rental Assistance Priority Index</a> for Louisville. The original index compares Louisville to the rest of Kentucky. At Greater Louisville Project, we think the more appropriate comparison is to our other peer cities. While the maps below show Louisville, the index values are based on a comparison to all census tracts in the core counties of our peer cities.</p>
<p>Greater Louisville Project has also aggregated the data up to the metro council district level. That data is available in both maps and tables.</p>
<p>In addition to the indexes, the indicators that make up the indexes are also mapped below. Navigation is based on tabs, so clicking on the small blue titles brings up the map related to each title.</p>
<div id="methods-and-definitions" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Methods and Definitions</h2>
<p>To produce an index with multiple indicators on different scales we used z-scores, which are a measure of how far away from average an observation is. For example, if looking at unemployment, we start with the unemployment rate in all tracts and the score for an individual tract is the number of standard deviations it is away from the average tract.</p>
<p>Data is from the Urban Institute’s <a href="https://www.urban.org/features/where-prioritize-emergency-rental-assistance-keep-renters-their-homes">Emergency Rental Assistance Priority Index</a> and in most cases is tract level census data from 2018. The low income jobs lost to Covid is an <a href="https://www.urban.org/features/where-low-income-jobs-are-being-lost-covid-19">Urban Institute constructed indicator</a>. Complete details on the indicators can be found in the <a href="https://www.urban.org/sites/default/files/2020/08/24/where_to_prioritize_emergency_rental_assistance_to_keep_renters_in_their_homes_technical_appendix.pdf">technical appendix</a>, but they are summarized here for convenience.</p>
<div id="housing-instability-index" class="section level3" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Housing Instability Index</h3>
<ul>
<li>Poverty: Under the poverty line in the last 12 months</li>
<li>Percent Renting: The percent of households in the area who rent</li>
<li>Cost Burdened: Households making less than 35,000 and paying more than 50% of their income in rent</li>
<li>Overcrowding: Households renting and with more than 1.5 people per room.</li>
<li>Unemployed: In the labor force but not currently employed.</li>
</ul>
</div>
<div id="covid-index" class="section level3" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Covid Index</h3>
<ul>
<li>Health Insurance: Based on the noninstitutionalized population ages 19-64.</li>
<li>Low Income Job Loss from Covid: Estimated jobs lost to Covid based on previous <a href="https://www.urban.org/features/where-low-income-jobs-are-being-lost-covid-19">Urban Institute Study</a></li>
</ul>
</div>
<div id="equity-index" class="section level3" number="3.1.3">
<h3><span class="header-section-number">3.1.3</span> Equity Index</h3>
<ul>
<li>Percent Persons of Color: Percent of people in the area who identify as persons of color</li>
<li>Extremely Low Income: Renter occupied household making less than 30 percent of area median income</li>
<li>Public Assistance: Percent receiving some form of public assistance like SNAP or TANF</li>
<li>Foreign Born: Percent born outside the U.S.</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="housing-instability.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glpdata)</span>
<span id="cb1-2"><a href="housing-instability.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glptools)</span>
<span id="cb1-3"><a href="housing-instability.html#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="housing-instability.html#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(home_loan_county, home_loan_tract,</span>
<span id="cb1-5"><a href="housing-instability.html#cb1-5" aria-hidden="true" tabindex="-1"></a>     HPI_county, HPI_zip,</span>
<span id="cb1-6"><a href="housing-instability.html#cb1-6" aria-hidden="true" tabindex="-1"></a>     map_zip, </span>
<span id="cb1-7"><a href="housing-instability.html#cb1-7" aria-hidden="true" tabindex="-1"></a>     clean_acs_micro,</span>
<span id="cb1-8"><a href="housing-instability.html#cb1-8" aria-hidden="true" tabindex="-1"></a>     <span class="at">file =</span> <span class="st">&quot;glptools_exports.RData&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="housing-instability.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-2"><a href="housing-instability.html#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rgdal)</span>
<span id="cb2-3"><a href="housing-instability.html#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb2-4"><a href="housing-instability.html#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)</span>
<span id="cb2-5"><a href="housing-instability.html#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb2-6"><a href="housing-instability.html#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="housing-instability.html#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;housing_data/glptools_exports.RData&quot;</span>)</span>
<span id="cb2-8"><a href="housing-instability.html#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="housing-instability.html#cb2-9" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;housing_data/housing_index_raw.csv&quot;</span>)</span>
<span id="cb2-10"><a href="housing-instability.html#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="housing-instability.html#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter to just peers</span></span>
<span id="cb2-12"><a href="housing-instability.html#cb2-12" aria-hidden="true" tabindex="-1"></a>df_peer <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> </span>
<span id="cb2-13"><a href="housing-instability.html#cb2-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(county_fips <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;1073&quot;</span>, <span class="st">&quot;18097&quot;</span>, <span class="st">&quot;21111&quot;</span>, <span class="st">&quot;26081&quot;</span>, <span class="st">&quot;29095&quot;</span>, <span class="st">&quot;29189&quot;</span>,</span>
<span id="cb2-14"><a href="housing-instability.html#cb2-14" aria-hidden="true" tabindex="-1"></a>                            <span class="st">&quot;29510&quot;</span>, <span class="st">&quot;31055&quot;</span>, <span class="st">&quot;37081&quot;</span>, <span class="st">&quot;37119&quot;</span>, <span class="st">&quot;39049&quot;</span>, <span class="st">&quot;39061&quot;</span>,</span>
<span id="cb2-15"><a href="housing-instability.html#cb2-15" aria-hidden="true" tabindex="-1"></a>                            <span class="st">&quot;40109&quot;</span>, <span class="st">&quot;40143&quot;</span>, <span class="st">&quot;45045&quot;</span>, <span class="st">&quot;47037&quot;</span>, <span class="st">&quot;47093&quot;</span>, <span class="st">&quot;47157&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb2-16"><a href="housing-instability.html#cb2-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">contains</span>(<span class="st">&quot;z_score&quot;</span>), <span class="sc">-</span><span class="fu">contains</span>(<span class="st">&quot;index&quot;</span>)) <span class="co">#drop index and z_score terms so we can recreate them</span></span>
<span id="cb2-17"><a href="housing-instability.html#cb2-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-18"><a href="housing-instability.html#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Make z scores</span></span>
<span id="cb2-19"><a href="housing-instability.html#cb2-19" aria-hidden="true" tabindex="-1"></a>make_z <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb2-20"><a href="housing-instability.html#cb2-20" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> (x <span class="sc">-</span> <span class="fu">mean</span>(x)) <span class="sc">/</span> <span class="fu">sd</span>(x)</span>
<span id="cb2-21"><a href="housing-instability.html#cb2-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-22"><a href="housing-instability.html#cb2-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-23"><a href="housing-instability.html#cb2-23" aria-hidden="true" tabindex="-1"></a>df_z <span class="ot">&lt;-</span> df_peer <span class="sc">%&gt;%</span></span>
<span id="cb2-24"><a href="housing-instability.html#cb2-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), make_z, <span class="at">.names =</span> <span class="st">&quot;z_{.col}&quot;</span>))</span>
<span id="cb2-25"><a href="housing-instability.html#cb2-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-26"><a href="housing-instability.html#cb2-26" aria-hidden="true" tabindex="-1"></a>df_index <span class="ot">&lt;-</span> df_z <span class="sc">%&gt;%</span></span>
<span id="cb2-27"><a href="housing-instability.html#cb2-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb2-28"><a href="housing-instability.html#cb2-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">housing_instability_index =</span> z_perc_poverty_12mnth <span class="sc">*</span> .<span class="dv">2</span> <span class="sc">+</span> z_perc_renters <span class="sc">*</span> .<span class="dv">2</span> <span class="sc">+</span> z_perc_cost_burdened_under_35k <span class="sc">*</span> .<span class="dv">2</span> <span class="sc">+</span> z_perc_overcrowding_renter_1<span class="fl">.50</span>_or_more <span class="sc">*</span> .<span class="dv">2</span> <span class="sc">+</span> z_perc_unemployed_laborforce <span class="sc">*</span> .<span class="dv">2</span>,</span>
<span id="cb2-29"><a href="housing-instability.html#cb2-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">covid_index =</span> z_perc_no_hinsure <span class="sc">*</span> .<span class="dv">5</span> <span class="sc">+</span> z_perc_low_income_jobs_lost <span class="sc">*</span> .<span class="dv">5</span>,</span>
<span id="cb2-30"><a href="housing-instability.html#cb2-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">equity_index =</span> z_perc_person_of_color <span class="sc">*</span> .<span class="dv">5</span> <span class="sc">+</span> z_perc_30hamfi <span class="sc">*</span> .<span class="dv">167</span> <span class="sc">+</span> z_perc_public_assistance <span class="sc">*</span> .<span class="dv">167</span> <span class="sc">+</span> z_perc_foreign_born <span class="sc">*</span> .<span class="dv">167</span>,</span>
<span id="cb2-31"><a href="housing-instability.html#cb2-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">overall_index =</span> housing_instability_index <span class="sc">*</span> .<span class="dv">5</span> <span class="sc">+</span> covid_index <span class="sc">*</span> .<span class="dv">1</span> <span class="sc">+</span> equity_index <span class="sc">*</span> .<span class="dv">4</span></span>
<span id="cb2-32"><a href="housing-instability.html#cb2-32" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
</div>
</div>
<div id="rental-insecurity-index" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Rental Insecurity Index</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="housing-instability.html#cb3-1" aria-hidden="true" tabindex="-1"></a>jfco_shp <span class="ot">&lt;-</span> <span class="fu">readOGR</span>(<span class="st">&quot;housing_data/JC Tracts&quot;</span>, <span class="at">layer =</span> <span class="st">&quot;JC Tracts&quot;</span>,</span>
<span id="cb3-2"><a href="housing-instability.html#cb3-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">GDAL1_integer64_policy =</span> <span class="cn">TRUE</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb3-3"><a href="housing-instability.html#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="housing-instability.html#cb3-4" aria-hidden="true" tabindex="-1"></a>jfco_sf <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(jfco_shp) <span class="sc">%&gt;%</span></span>
<span id="cb3-5"><a href="housing-instability.html#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">GEOID =</span> <span class="fu">str_sub</span>(GEO_ID, <span class="at">start =</span> <span class="sc">-</span><span class="dv">11</span>))</span>
<span id="cb3-6"><a href="housing-instability.html#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="housing-instability.html#cb3-7" aria-hidden="true" tabindex="-1"></a>jfco_index <span class="ot">&lt;-</span> df_index <span class="sc">%&gt;%</span> </span>
<span id="cb3-8"><a href="housing-instability.html#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(county_fips <span class="sc">==</span> <span class="st">&quot;21111&quot;</span>) </span>
<span id="cb3-9"><a href="housing-instability.html#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="housing-instability.html#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Urban institute includes a greyed out flag for tracts without enough data</span></span>
<span id="cb3-11"><a href="housing-instability.html#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co"># It&#39;s easier to set the values to NA because the graphing framework has the ability to easily assign NA a different color</span></span>
<span id="cb3-12"><a href="housing-instability.html#cb3-12" aria-hidden="true" tabindex="-1"></a>jfco_index <span class="ot">&lt;-</span> jfco_index <span class="sc">%&gt;%</span></span>
<span id="cb3-13"><a href="housing-instability.html#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span><span class="fu">if_else</span>(jfco_index<span class="sc">$</span>grayed_out <span class="sc">==</span> <span class="dv">1</span>, <span class="cn">NA_real_</span>, .)))</span>
<span id="cb3-14"><a href="housing-instability.html#cb3-14" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb3-15"><a href="housing-instability.html#cb3-15" aria-hidden="true" tabindex="-1"></a>jfco_sf <span class="ot">&lt;-</span> <span class="fu">full_join</span>(jfco_sf, jfco_index, <span class="at">by =</span> <span class="st">&quot;GEOID&quot;</span>)</span>
<span id="cb3-16"><a href="housing-instability.html#cb3-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-17"><a href="housing-instability.html#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Transform the percents</span></span>
<span id="cb3-18"><a href="housing-instability.html#cb3-18" aria-hidden="true" tabindex="-1"></a>mult100 <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb3-19"><a href="housing-instability.html#cb3-19" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> x <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb3-20"><a href="housing-instability.html#cb3-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-21"><a href="housing-instability.html#cb3-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-22"><a href="housing-instability.html#cb3-22" aria-hidden="true" tabindex="-1"></a>jfco_sf <span class="ot">&lt;-</span> jfco_sf <span class="sc">%&gt;%</span></span>
<span id="cb3-23"><a href="housing-instability.html#cb3-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">&quot;perc_&quot;</span>), mult100))</span>
<span id="cb3-24"><a href="housing-instability.html#cb3-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-25"><a href="housing-instability.html#cb3-25" aria-hidden="true" tabindex="-1"></a>make_map <span class="ot">&lt;-</span> <span class="cf">function</span>(indicator, <span class="at">title =</span> <span class="st">&quot;&quot;</span>, <span class="at">legend =</span> <span class="st">&quot;&quot;</span>, <span class="at">caption =</span> <span class="st">&quot;&quot;</span>, <span class="at">no_legend =</span> <span class="cn">FALSE</span>, <span class="at">vir_dir =</span> <span class="dv">1</span>){</span>
<span id="cb3-26"><a href="housing-instability.html#cb3-26" aria-hidden="true" tabindex="-1"></a>  plt <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(jfco_sf) <span class="sc">+</span> </span>
<span id="cb3-27"><a href="housing-instability.html#cb3-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill=</span>{{ indicator }} )) <span class="sc">+</span></span>
<span id="cb3-28"><a href="housing-instability.html#cb3-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># scale_fill_gradient(low = &quot;#323844&quot;, high = &quot;#d63631&quot;, name = &quot;Percent&quot;) +</span></span>
<span id="cb3-29"><a href="housing-instability.html#cb3-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis</span>(<span class="at">na.value =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">name =</span> legend, <span class="at">direction =</span> vir_dir) <span class="sc">+</span></span>
<span id="cb3-30"><a href="housing-instability.html#cb3-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">22</span>) <span class="sc">+</span></span>
<span id="cb3-31"><a href="housing-instability.html#cb3-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">lineheight =</span> .<span class="dv">5</span>)) <span class="sc">+</span></span>
<span id="cb3-32"><a href="housing-instability.html#cb3-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">&quot;Montserrat&quot;</span>),</span>
<span id="cb3-33"><a href="housing-instability.html#cb3-33" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb3-34"><a href="housing-instability.html#cb3-34" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb3-35"><a href="housing-instability.html#cb3-35" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb3-36"><a href="housing-instability.html#cb3-36" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb3-37"><a href="housing-instability.html#cb3-37" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.border =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb3-38"><a href="housing-instability.html#cb3-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> title,</span>
<span id="cb3-39"><a href="housing-instability.html#cb3-39" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> caption)</span>
<span id="cb3-40"><a href="housing-instability.html#cb3-40" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-41"><a href="housing-instability.html#cb3-41" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (no_legend <span class="sc">==</span> <span class="cn">TRUE</span>){</span>
<span id="cb3-42"><a href="housing-instability.html#cb3-42" aria-hidden="true" tabindex="-1"></a>    plt <span class="ot">&lt;-</span> plt <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span>
<span id="cb3-43"><a href="housing-instability.html#cb3-43" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-44"><a href="housing-instability.html#cb3-44" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-45"><a href="housing-instability.html#cb3-45" aria-hidden="true" tabindex="-1"></a>  plt <span class="ot">&lt;-</span> plt <span class="sc">+</span></span>
<span id="cb3-46"><a href="housing-instability.html#cb3-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb3-47"><a href="housing-instability.html#cb3-47" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>), <span class="co"># bg of the panel</span></span>
<span id="cb3-48"><a href="housing-instability.html#cb3-48" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>), <span class="co"># bg of the plot</span></span>
<span id="cb3-49"><a href="housing-instability.html#cb3-49" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="st">&quot;transparent&quot;</span>), <span class="co"># get rid of legend bg</span></span>
<span id="cb3-50"><a href="housing-instability.html#cb3-50" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.box.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="st">&quot;transparent&quot;</span>), <span class="co"># get rid of legend panel bg</span></span>
<span id="cb3-51"><a href="housing-instability.html#cb3-51" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>,<span class="at">colour =</span> <span class="cn">NA</span>))</span>
<span id="cb3-52"><a href="housing-instability.html#cb3-52" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-53"><a href="housing-instability.html#cb3-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(plt)</span>
<span id="cb3-54"><a href="housing-instability.html#cb3-54" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-55"><a href="housing-instability.html#cb3-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-56"><a href="housing-instability.html#cb3-56" aria-hidden="true" tabindex="-1"></a><span class="fu">make_map</span>(overall_index, <span class="at">title =</span> <span class="st">&quot;Rental Insecurity Index&quot;</span>, </span>
<span id="cb3-57"><a href="housing-instability.html#cb3-57" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Compared to </span><span class="sc">\n</span><span class="st"> other tracts&quot;</span>, </span>
<span id="cb3-58"><a href="housing-instability.html#cb3-58" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Lighter shades indicate higher rental insecurity. </span><span class="sc">\n</span><span class="st"> This is the Urban Institute&#39;s Emergency Rental Assistance Priority Index modified </span><span class="sc">\n</span><span class="st">to compare Louisville to its peer cities (instead of to other areas in Kentucky). </span><span class="sc">\n</span><span class="st"> Greyed out areas had insufficient data for the index&quot;</span>,</span>
<span id="cb3-59"><a href="housing-instability.html#cb3-59" aria-hidden="true" tabindex="-1"></a>         <span class="at">no_legend =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/rental_insecurity_index-1.png" width="672" /></p>
<p>You can flip through the tabs below to see each of the three subindexes that make up the overall rental index.</p>
<div class="panelset">
<div id="housing-instability-subindex" class="section level3 panel unnumbered">
<h3>Housing Instability Subindex</h3>
<ul>
<li>Share of people living in poverty</li>
<li>Share of renter-occupied housing units</li>
<li>Share of severely cost-burdened low-income renters</li>
<li>Share of severely overcrowded households</li>
<li>Share of unemployed people</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="housing-instability.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make_map</span>(housing_instability_index, <span class="at">title =</span> <span class="st">&quot;Housing Instability Subindex&quot;</span>, </span>
<span id="cb4-2"><a href="housing-instability.html#cb4-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Compared to </span><span class="sc">\n</span><span class="st"> other tracts&quot;</span>, </span>
<span id="cb4-3"><a href="housing-instability.html#cb4-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Lighter shades indicate higher housing instability. </span><span class="sc">\n</span><span class="st"> This is the Urban Institute&#39;s Housing Instability subindex modified </span><span class="sc">\n</span><span class="st">to compare Louisville to its peer cities (instead of to other areas in Kentucky). </span><span class="sc">\n</span><span class="st"> Greyed out areas had insufficient data for the index&quot;</span>,</span>
<span id="cb4-4"><a href="housing-instability.html#cb4-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">no_legend =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/housing_instability_subindex-1.png" width="672" /></p>
</div>
<div id="covid-19-impact-subindex" class="section level3 panel unnumbered">
<h3>Covid 19 Impact Subindex</h3>
<ul>
<li>Share of adults without health insurance</li>
<li>Share of low-income jobs lost to Covid-19</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="housing-instability.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make_map</span>(covid_index, <span class="at">title =</span> <span class="st">&quot;Covid Instability Subindex&quot;</span>, </span>
<span id="cb5-2"><a href="housing-instability.html#cb5-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Compared to </span><span class="sc">\n</span><span class="st"> other tracts&quot;</span>, </span>
<span id="cb5-3"><a href="housing-instability.html#cb5-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Lighter shades indicate higher covid instability. </span><span class="sc">\n</span><span class="st"> This is the Urban Institute&#39;s Covid Instability subindex modified </span><span class="sc">\n</span><span class="st">to compare Louisville to its peer cities (instead of to other areas in Kentucky). </span><span class="sc">\n</span><span class="st"> Greyed out areas had insufficient data for the index&quot;</span>,</span>
<span id="cb5-4"><a href="housing-instability.html#cb5-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">no_legend =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/covid_19_impact_subindex-1.png" width="672" /></p>
</div>
<div id="equity-subindex" class="section level3 panel unnumbered">
<h3>Equity Subindex</h3>
<ul>
<li>Share of people of color</li>
<li>Share of extremely low-income renter households</li>
<li>Share of households receiving public assistance</li>
<li>Share of people born outside the United States</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="housing-instability.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make_map</span>(equity_index, <span class="at">title =</span> <span class="st">&quot;Equity Subindex&quot;</span>, </span>
<span id="cb6-2"><a href="housing-instability.html#cb6-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Compared to </span><span class="sc">\n</span><span class="st"> other tracts&quot;</span>, </span>
<span id="cb6-3"><a href="housing-instability.html#cb6-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Lighter shades indicate higher prioritization based on equity. </span><span class="sc">\n</span><span class="st"> This is the Urban Institute&#39;s Equity subindex modified </span><span class="sc">\n</span><span class="st">to compare Louisville to its peer cities (instead of to other areas in Kentucky). </span><span class="sc">\n</span><span class="st"> Greyed out areas had insufficient data for the index&quot;</span>,</span>
<span id="cb6-4"><a href="housing-instability.html#cb6-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">no_legend =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/equity_subindex-1.png" width="672" /></p>
</div>
</div>
</div>
<div id="housing-instability-indicators" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Housing Instability Indicators</h2>
<div class="panelset">
<div id="poverty-1" class="section level3 panel unnumbered">
<h3>Poverty</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="housing-instability.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make_map</span>(perc_poverty_12mnth, <span class="at">title =</span> <span class="st">&quot;Poverty&quot;</span>, </span>
<span id="cb7-2"><a href="housing-instability.html#cb7-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Percent&quot;</span>, </span>
<span id="cb7-3"><a href="housing-instability.html#cb7-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Percent of each census tract that is in poverty. </span><span class="sc">\n</span><span class="st"> Data from Urban Institute.&quot;</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/poverty-1.png" width="672" /></p>
</div>
<div id="percent-renting" class="section level3 panel unnumbered">
<h3>Percent Renting</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="housing-instability.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make_map</span>(perc_renters, <span class="at">title =</span> <span class="st">&quot;Percent of Renter Occupied Housing Units&quot;</span>, </span>
<span id="cb8-2"><a href="housing-instability.html#cb8-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Percent&quot;</span>, </span>
<span id="cb8-3"><a href="housing-instability.html#cb8-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Percent of each tract that rents. </span><span class="sc">\n</span><span class="st"> Data from Urban Institute&quot;</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/renting-1.png" width="672" /></p>
</div>
<div id="cost-burdened-housholds" class="section level3 panel unnumbered">
<h3>Cost-burdened housholds</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="housing-instability.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make_map</span>(perc_cost_burdened_under_35k, <span class="at">title =</span> <span class="st">&quot;Costburdened Households making under 35k&quot;</span>, </span>
<span id="cb9-2"><a href="housing-instability.html#cb9-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Percent&quot;</span>, </span>
<span id="cb9-3"><a href="housing-instability.html#cb9-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Percent of households making less than 35,000 and paying more than 50% of their income in rent. </span><span class="sc">\n</span><span class="st"> Data from Urban Institute&quot;</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/cost_burdened-1.png" width="672" /></p>
</div>
<div id="overcrowding" class="section level3 panel unnumbered">
<h3>Overcrowding</h3>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="housing-instability.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make_map</span>(perc_overcrowding_renter_1<span class="fl">.50</span>_or_more, <span class="at">title =</span> <span class="st">&quot;Overcrowding in Rental Housing&quot;</span>, </span>
<span id="cb10-2"><a href="housing-instability.html#cb10-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Percent&quot;</span>, </span>
<span id="cb10-3"><a href="housing-instability.html#cb10-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Percent of households renting and with more than 1.5 people per room. </span><span class="sc">\n</span><span class="st"> Data from Urban Institute&quot;</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/overcrowding-1.png" width="672" /></p>
</div>
<div id="unemployed" class="section level3 panel unnumbered">
<h3>Unemployed</h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="housing-instability.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make_map</span>(perc_unemployed_laborforce, <span class="at">title =</span> <span class="st">&quot;Unemployment&quot;</span>, </span>
<span id="cb11-2"><a href="housing-instability.html#cb11-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Percent&quot;</span>, </span>
<span id="cb11-3"><a href="housing-instability.html#cb11-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Percent of people unemployed but still in the labor force (actively seeking work). </span><span class="sc">\n</span><span class="st"> Data from Urban Institute&quot;</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/unemployment-1.png" width="672" /></p>
</div>
</div>
</div>
<div id="covid-indicators" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Covid Indicators</h2>
<div class="panelset">
<div id="no-health-insurance" class="section level3 panel unnumbered">
<h3>No Health Insurance</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="housing-instability.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make_map</span>(perc_no_hinsure, <span class="at">title =</span> <span class="st">&quot;No Health Insurance&quot;</span>, </span>
<span id="cb12-2"><a href="housing-instability.html#cb12-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Percent&quot;</span>, </span>
<span id="cb12-3"><a href="housing-instability.html#cb12-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Percent without health insurance. </span><span class="sc">\n</span><span class="st"> Data from Urban Institute&quot;</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/no_health_insurance-1.png" width="672" /></p>
</div>
<div id="low-income-jobs-lost-to-covid" class="section level3 panel unnumbered">
<h3>Low Income Jobs Lost to Covid</h3>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="housing-instability.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make_map</span>(perc_low_income_jobs_lost, <span class="at">title =</span> <span class="st">&quot;Low Income Jobs Lost to Covid&quot;</span>, </span>
<span id="cb13-2"><a href="housing-instability.html#cb13-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Percent&quot;</span>, </span>
<span id="cb13-3"><a href="housing-instability.html#cb13-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Estimate from the Urban Institute based on job categories in the each tract. </span><span class="sc">\n</span><span class="st"> Data from Urban Institute&quot;</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/low_income_job_loss-1.png" width="672" /></p>
</div>
<div id="equity-index-1" class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> Equity Index</h2>
</div>
</div>
<div class="panelset">
<div id="percent-poc" class="section level3 panel unnumbered">
<h3>Percent PoC</h3>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="housing-instability.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make_map</span>(perc_person_of_color, <span class="at">title =</span> <span class="st">&quot;Percent Persons of Color&quot;</span>, </span>
<span id="cb14-2"><a href="housing-instability.html#cb14-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Percent&quot;</span>, </span>
<span id="cb14-3"><a href="housing-instability.html#cb14-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Percent of persons in the area who identify as persons of color. </span><span class="sc">\n</span><span class="st"> Data from Urban Institute&quot;</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/people_of_color-1.png" width="672" /></p>
</div>
<div id="extremely-low-income" class="section level3 panel unnumbered">
<h3>Extremely Low Income</h3>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="housing-instability.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make_map</span>(perc_30hamfi, <span class="at">title =</span> <span class="st">&quot;Extremely Low Income&quot;</span>, </span>
<span id="cb15-2"><a href="housing-instability.html#cb15-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Percent&quot;</span>, </span>
<span id="cb15-3"><a href="housing-instability.html#cb15-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Renter occupied household making less than 30 percent of area median income. </span><span class="sc">\n</span><span class="st"> Data from Urban Institute&quot;</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/extremely_low_income-1.png" width="672" /></p>
</div>
<div id="public-assistance" class="section level3 panel unnumbered">
<h3>Public Assistance</h3>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="housing-instability.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make_map</span>(perc_public_assistance, <span class="at">title =</span> <span class="st">&quot;Recieving Public Assistance&quot;</span>, </span>
<span id="cb16-2"><a href="housing-instability.html#cb16-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Percent&quot;</span>, </span>
<span id="cb16-3"><a href="housing-instability.html#cb16-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Percent receiving some form of public assistance like SNAP or TANF. </span><span class="sc">\n</span><span class="st"> Data from Urban Institute&quot;</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/public_assistance-1.png" width="672" /></p>
</div>
<div id="foreign-born" class="section level3 panel unnumbered">
<h3>Foreign Born</h3>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="housing-instability.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make_map</span>(perc_foreign_born, <span class="at">title =</span> <span class="st">&quot;Foreign Born&quot;</span>, </span>
<span id="cb17-2"><a href="housing-instability.html#cb17-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Percent&quot;</span>, </span>
<span id="cb17-3"><a href="housing-instability.html#cb17-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Percent born outside the U.S. </span><span class="sc">\n</span><span class="st"> Data from Urban Institute&quot;</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/foreign_born-1.png" width="672" /></p>
</div>
<div id="peer-city-data" class="section level2" number="3.6">
<h2><span class="header-section-number">3.6</span> Peer City Data</h2>
<p>Peer city data is available for the housing stability subindex.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="housing-instability.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ranking graph function</span></span>
<span id="cb18-2"><a href="housing-instability.html#cb18-2" aria-hidden="true" tabindex="-1"></a>ranking <span class="ot">&lt;-</span> <span class="cf">function</span>(df, var, <span class="at">plot_title =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb18-3"><a href="housing-instability.html#cb18-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">year =</span> <span class="cn">NULL</span>, <span class="at">sex =</span> <span class="st">&quot;total&quot;</span>, <span class="at">race =</span> <span class="st">&quot;total&quot;</span>,</span>
<span id="cb18-4"><a href="housing-instability.html#cb18-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">order =</span> <span class="st">&quot;Descending&quot;</span>,</span>
<span id="cb18-5"><a href="housing-instability.html#cb18-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">y_title =</span> <span class="st">&quot;Percent&quot;</span>, <span class="at">caption_text =</span> <span class="st">&quot;&quot;</span>, <span class="at">subtitle_text =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb18-6"><a href="housing-instability.html#cb18-6" aria-hidden="true" tabindex="-1"></a>                    <span class="at">bar_label =</span> <span class="cn">TRUE</span>, <span class="at">sigfig =</span> <span class="dv">3</span>, <span class="at">accuracy =</span> <span class="fl">0.1</span>,</span>
<span id="cb18-7"><a href="housing-instability.html#cb18-7" aria-hidden="true" tabindex="-1"></a>                    label_function, <span class="at">alternate_text =</span> <span class="cn">NULL</span>,</span>
<span id="cb18-8"><a href="housing-instability.html#cb18-8" aria-hidden="true" tabindex="-1"></a>                    <span class="at">ranking_colors =</span> <span class="cn">TRUE</span>, text_size){</span>
<span id="cb18-9"><a href="housing-instability.html#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Copy variable var to a new column for use with the &#39;$&#39; operator</span></span>
<span id="cb18-10"><a href="housing-instability.html#cb18-10" aria-hidden="true" tabindex="-1"></a>  var <span class="ot">&lt;-</span> dplyr<span class="sc">:::</span><span class="fu">tbl_at_vars</span>(df, <span class="fu">vars</span>(<span class="sc">!!</span><span class="fu">enquo</span>(var)))</span>
<span id="cb18-11"><a href="housing-instability.html#cb18-11" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>var <span class="ot">&lt;-</span> df[[var]]</span>
<span id="cb18-12"><a href="housing-instability.html#cb18-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Filter to sex, race, and year</span></span>
<span id="cb18-13"><a href="housing-instability.html#cb18-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="st">&quot;sex&quot;</span> <span class="sc">%in%</span> <span class="fu">names</span>(df)) df <span class="ot">&lt;-</span> df[df<span class="sc">$</span>sex <span class="sc">==</span> sex,]</span>
<span id="cb18-14"><a href="housing-instability.html#cb18-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="st">&quot;race&quot;</span> <span class="sc">%in%</span> <span class="fu">names</span>(df)) df <span class="ot">&lt;-</span> df[df<span class="sc">$</span>race <span class="sc">==</span> race,]</span>
<span id="cb18-15"><a href="housing-instability.html#cb18-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="st">&quot;year&quot;</span> <span class="sc">%in%</span> <span class="fu">names</span>(df)) {</span>
<span id="cb18-16"><a href="housing-instability.html#cb18-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">is.null</span>(year)) year <span class="ot">&lt;-</span> <span class="fu">max</span>(<span class="fu">years_in_df</span>(df, var))</span>
<span id="cb18-17"><a href="housing-instability.html#cb18-17" aria-hidden="true" tabindex="-1"></a>    df <span class="ot">&lt;-</span> df[df<span class="sc">$</span>year <span class="sc">%in%</span> year,]</span>
<span id="cb18-18"><a href="housing-instability.html#cb18-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">length</span>(year) <span class="sc">&gt;</span> <span class="dv">1</span>) {</span>
<span id="cb18-19"><a href="housing-instability.html#cb18-19" aria-hidden="true" tabindex="-1"></a>      df <span class="sc">%&lt;&gt;%</span></span>
<span id="cb18-20"><a href="housing-instability.html#cb18-20" aria-hidden="true" tabindex="-1"></a>        <span class="fu">group_by_at</span>(df <span class="sc">%cols_in%</span> <span class="fu">c</span>(<span class="st">&quot;MSA&quot;</span>, <span class="st">&quot;FIPS&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb18-21"><a href="housing-instability.html#cb18-21" aria-hidden="true" tabindex="-1"></a>        <span class="fu">summarise</span>(<span class="at">var =</span> <span class="fu">mean</span>(var, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb18-22"><a href="housing-instability.html#cb18-22" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ungroup</span>()</span>
<span id="cb18-23"><a href="housing-instability.html#cb18-23" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb18-24"><a href="housing-instability.html#cb18-24" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb18-25"><a href="housing-instability.html#cb18-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add peer data if not already present</span></span>
<span id="cb18-26"><a href="housing-instability.html#cb18-26" aria-hidden="true" tabindex="-1"></a>  <span class="co"># if (df_type(df) %in% c(&quot;FIPS&quot;, &quot;MSA&quot;) &amp; &quot;current&quot; %not_in% names(df)) df %&lt;&gt;% pull_peers(add_info = T)</span></span>
<span id="cb18-27"><a href="housing-instability.html#cb18-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-28"><a href="housing-instability.html#cb18-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Sort according to order parameter</span></span>
<span id="cb18-29"><a href="housing-instability.html#cb18-29" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (order <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;descending&quot;</span>, <span class="st">&quot;Descending&quot;</span>)) df <span class="sc">%&lt;&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(var))</span>
<span id="cb18-30"><a href="housing-instability.html#cb18-30" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (order <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;ascending&quot;</span>, <span class="st">&quot;Ascending&quot;</span>))   df <span class="sc">%&lt;&gt;%</span> <span class="fu">arrange</span>(var)</span>
<span id="cb18-31"><a href="housing-instability.html#cb18-31" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">%&lt;&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(var))</span>
<span id="cb18-32"><a href="housing-instability.html#cb18-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create numbered city labels for left side of graph</span></span>
<span id="cb18-33"><a href="housing-instability.html#cb18-33" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">%&lt;&gt;%</span></span>
<span id="cb18-34"><a href="housing-instability.html#cb18-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb18-35"><a href="housing-instability.html#cb18-35" aria-hidden="true" tabindex="-1"></a>      <span class="at">rank =</span> <span class="fu">row_number</span>(),</span>
<span id="cb18-36"><a href="housing-instability.html#cb18-36" aria-hidden="true" tabindex="-1"></a>      <span class="at">names =</span> <span class="fu">paste0</span>(rank, <span class="st">&quot;. &quot;</span>, city))</span>
<span id="cb18-37"><a href="housing-instability.html#cb18-37" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Set bar colors</span></span>
<span id="cb18-38"><a href="housing-instability.html#cb18-38" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (ranking_colors) {</span>
<span id="cb18-39"><a href="housing-instability.html#cb18-39" aria-hidden="true" tabindex="-1"></a>    <span class="co"># color_values &lt;- c(&quot;#96ca4f&quot;, &quot;#ffd600&quot;, &quot;#db2834&quot;)</span></span>
<span id="cb18-40"><a href="housing-instability.html#cb18-40" aria-hidden="true" tabindex="-1"></a>    <span class="co"># color_names &lt;- c(&quot;green&quot;, &quot;yellow&quot;, &quot;red&quot;)</span></span>
<span id="cb18-41"><a href="housing-instability.html#cb18-41" aria-hidden="true" tabindex="-1"></a>    <span class="co"># if (order %in% c(&quot;descending&quot;, &quot;Descending&quot;)) {color_names  = rev(color_names)}</span></span>
<span id="cb18-42"><a href="housing-instability.html#cb18-42" aria-hidden="true" tabindex="-1"></a>    <span class="co"># </span></span>
<span id="cb18-43"><a href="housing-instability.html#cb18-43" aria-hidden="true" tabindex="-1"></a>    <span class="co"># breaks &lt;- classInt::classIntervals(na.omit(df$var), 3, style = &quot;jenks&quot;)</span></span>
<span id="cb18-44"><a href="housing-instability.html#cb18-44" aria-hidden="true" tabindex="-1"></a>    <span class="co"># df$color &lt;- NA</span></span>
<span id="cb18-45"><a href="housing-instability.html#cb18-45" aria-hidden="true" tabindex="-1"></a>    <span class="co"># df$color[df$var &lt;= breaks$brks[2]] &lt;- color_names[1]</span></span>
<span id="cb18-46"><a href="housing-instability.html#cb18-46" aria-hidden="true" tabindex="-1"></a>    <span class="co"># df$color[df$var &gt; breaks$brks[2] &amp; df$var &lt;= breaks$brks[3]] &lt;- color_names[2]</span></span>
<span id="cb18-47"><a href="housing-instability.html#cb18-47" aria-hidden="true" tabindex="-1"></a>    <span class="co"># df$color[df$var &gt; breaks$brks[3]] &lt;- color_names[3]</span></span>
<span id="cb18-48"><a href="housing-instability.html#cb18-48" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb18-49"><a href="housing-instability.html#cb18-49" aria-hidden="true" tabindex="-1"></a>    color_values <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;#d63631&quot;</span>, <span class="st">&quot;#323844&quot;</span>)</span>
<span id="cb18-50"><a href="housing-instability.html#cb18-50" aria-hidden="true" tabindex="-1"></a>    color_names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;gray&quot;</span>, <span class="st">&quot;red&quot;</span>)</span>
<span id="cb18-51"><a href="housing-instability.html#cb18-51" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb18-52"><a href="housing-instability.html#cb18-52" aria-hidden="true" tabindex="-1"></a>    df<span class="sc">$</span>color <span class="ot">&lt;-</span> <span class="st">&quot;red&quot;</span></span>
<span id="cb18-53"><a href="housing-instability.html#cb18-53" aria-hidden="true" tabindex="-1"></a>    df<span class="sc">$</span>color[df<span class="sc">$</span>city <span class="sc">==</span> <span class="st">&quot;Louisville&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;gray&quot;</span></span>
<span id="cb18-54"><a href="housing-instability.html#cb18-54" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb18-55"><a href="housing-instability.html#cb18-55" aria-hidden="true" tabindex="-1"></a>    df<span class="sc">$</span>color <span class="ot">&lt;-</span> <span class="st">&quot;blue&quot;</span></span>
<span id="cb18-56"><a href="housing-instability.html#cb18-56" aria-hidden="true" tabindex="-1"></a>    color_values <span class="ot">&lt;-</span> <span class="st">&quot;#f58021&quot;</span></span>
<span id="cb18-57"><a href="housing-instability.html#cb18-57" aria-hidden="true" tabindex="-1"></a>    color_names <span class="ot">&lt;-</span> <span class="st">&quot;blue&quot;</span></span>
<span id="cb18-58"><a href="housing-instability.html#cb18-58" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb18-59"><a href="housing-instability.html#cb18-59" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (order <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;descending&quot;</span>, <span class="st">&quot;Descending&quot;</span>)) color_values <span class="ot">=</span> <span class="fu">rev</span>(color_values)</span>
<span id="cb18-60"><a href="housing-instability.html#cb18-60" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create numeric labels</span></span>
<span id="cb18-61"><a href="housing-instability.html#cb18-61" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create numeric labels</span></span>
<span id="cb18-62"><a href="housing-instability.html#cb18-62" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">missing</span>(label_function)) {</span>
<span id="cb18-63"><a href="housing-instability.html#cb18-63" aria-hidden="true" tabindex="-1"></a>    label_text <span class="ot">&lt;-</span> df<span class="sc">$</span>var <span class="sc">%&gt;%</span> <span class="fu">signif</span>(sigfig) <span class="sc">%&gt;%</span> <span class="fu">label_function</span>()</span>
<span id="cb18-64"><a href="housing-instability.html#cb18-64" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (y_title <span class="sc">==</span> <span class="st">&quot;Dollars&quot;</span>) {</span>
<span id="cb18-65"><a href="housing-instability.html#cb18-65" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">mean</span>(df<span class="sc">$</span>var, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">&gt;</span> <span class="dv">10000</span>) {</span>
<span id="cb18-66"><a href="housing-instability.html#cb18-66" aria-hidden="true" tabindex="-1"></a>      label_text <span class="ot">&lt;-</span> df<span class="sc">$</span>var <span class="sc">%&gt;%</span> <span class="fu">signif</span>(sigfig) <span class="sc">%&gt;%</span> scales<span class="sc">::</span><span class="fu">dollar</span>(<span class="at">accuracy =</span> accuracy, <span class="at">scale =</span> .<span class="dv">001</span>, <span class="at">suffix =</span> <span class="st">&quot;k&quot;</span>)</span>
<span id="cb18-67"><a href="housing-instability.html#cb18-67" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb18-68"><a href="housing-instability.html#cb18-68" aria-hidden="true" tabindex="-1"></a>      label_text <span class="ot">&lt;-</span> df<span class="sc">$</span>var <span class="sc">%&gt;%</span> <span class="fu">signif</span>(sigfig) <span class="sc">%&gt;%</span> scales<span class="sc">::</span><span class="fu">dollar</span>(<span class="at">accuracy =</span> .<span class="dv">01</span>)</span>
<span id="cb18-69"><a href="housing-instability.html#cb18-69" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb18-70"><a href="housing-instability.html#cb18-70" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (stringr<span class="sc">::</span><span class="fu">str_detect</span>(y_title, <span class="st">&quot;Percent&quot;</span>)) {</span>
<span id="cb18-71"><a href="housing-instability.html#cb18-71" aria-hidden="true" tabindex="-1"></a>    label_text <span class="ot">&lt;-</span> df<span class="sc">$</span>var <span class="sc">%&gt;%</span> <span class="fu">signif</span>(sigfig) <span class="sc">%&gt;%</span> scales<span class="sc">::</span><span class="fu">percent</span>(<span class="at">accuracy =</span> accuracy, <span class="at">scale =</span> <span class="dv">1</span>, <span class="at">suffix =</span> <span class="st">&quot;%&quot;</span>)</span>
<span id="cb18-72"><a href="housing-instability.html#cb18-72" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb18-73"><a href="housing-instability.html#cb18-73" aria-hidden="true" tabindex="-1"></a>    label_text <span class="ot">&lt;-</span> df<span class="sc">$</span>var <span class="sc">%&gt;%</span> <span class="fu">signif</span>(sigfig) <span class="sc">%&gt;%</span> scales<span class="sc">::</span><span class="fu">comma</span>(<span class="at">accuracy =</span> accuracy)</span>
<span id="cb18-74"><a href="housing-instability.html#cb18-74" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb18-75"><a href="housing-instability.html#cb18-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-76"><a href="housing-instability.html#cb18-76" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Set text format, highlight and italicise Louisville text, highlight Louisville bar</span></span>
<span id="cb18-77"><a href="housing-instability.html#cb18-77" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>textcolor <span class="ot">&lt;-</span> <span class="st">&quot;#000000&quot;</span></span>
<span id="cb18-78"><a href="housing-instability.html#cb18-78" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>textcolor[df<span class="sc">$</span>city <span class="sc">==</span> <span class="st">&quot;Louisville&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;#000000&quot;</span></span>
<span id="cb18-79"><a href="housing-instability.html#cb18-79" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-80"><a href="housing-instability.html#cb18-80" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>textfont <span class="ot">&lt;-</span> <span class="st">&quot;Montserrat&quot;</span></span>
<span id="cb18-81"><a href="housing-instability.html#cb18-81" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>textfont[df<span class="sc">$</span>city <span class="sc">==</span> <span class="st">&quot;Louisville&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;Montserrat Bold&quot;</span></span>
<span id="cb18-82"><a href="housing-instability.html#cb18-82" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-83"><a href="housing-instability.html#cb18-83" aria-hidden="true" tabindex="-1"></a>  label_color_names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;white&quot;</span>, <span class="st">&quot;black&quot;</span>)</span>
<span id="cb18-84"><a href="housing-instability.html#cb18-84" aria-hidden="true" tabindex="-1"></a>  label_color_values <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;#000000&quot;</span>, <span class="st">&quot;#ffffff&quot;</span>)</span>
<span id="cb18-85"><a href="housing-instability.html#cb18-85" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-86"><a href="housing-instability.html#cb18-86" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>label_color <span class="ot">&lt;-</span> <span class="st">&quot;white&quot;</span></span>
<span id="cb18-87"><a href="housing-instability.html#cb18-87" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>label_color[df<span class="sc">$</span>city <span class="sc">==</span> <span class="st">&quot;Louisville&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;black&quot;</span></span>
<span id="cb18-88"><a href="housing-instability.html#cb18-88" aria-hidden="true" tabindex="-1"></a>  <span class="co">#df$linecolor &lt;- &quot;#ffffff&quot;</span></span>
<span id="cb18-89"><a href="housing-instability.html#cb18-89" aria-hidden="true" tabindex="-1"></a>  <span class="co">#df$linecolor[df$city == &quot;Louisville&quot;] &lt;- &quot;#00a9b7&quot;</span></span>
<span id="cb18-90"><a href="housing-instability.html#cb18-90" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>lou <span class="ot">&lt;-</span> <span class="fu">if_else</span>(df<span class="sc">$</span>city <span class="sc">==</span> <span class="st">&quot;Louisville&quot;</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb18-91"><a href="housing-instability.html#cb18-91" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>text_alignment <span class="ot">&lt;-</span> <span class="fl">1.1</span></span>
<span id="cb18-92"><a href="housing-instability.html#cb18-92" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(alternate_text)) df<span class="sc">$</span>text_alignment[df<span class="sc">$</span>rank <span class="sc">%in%</span> alternate_text] <span class="ot">&lt;-</span> <span class="sc">-</span><span class="fl">0.1</span></span>
<span id="cb18-93"><a href="housing-instability.html#cb18-93" aria-hidden="true" tabindex="-1"></a>  <span class="do">### PLOT GRAPH</span></span>
<span id="cb18-94"><a href="housing-instability.html#cb18-94" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-95"><a href="housing-instability.html#cb18-95" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Initial plot</span></span>
<span id="cb18-96"><a href="housing-instability.html#cb18-96" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> df,</span>
<span id="cb18-97"><a href="housing-instability.html#cb18-97" aria-hidden="true" tabindex="-1"></a>              <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(names, <span class="at">levels =</span> <span class="fu">rev</span>(names)),</span>
<span id="cb18-98"><a href="housing-instability.html#cb18-98" aria-hidden="true" tabindex="-1"></a>                  <span class="at">y =</span> var,</span>
<span id="cb18-99"><a href="housing-instability.html#cb18-99" aria-hidden="true" tabindex="-1"></a>                  <span class="at">fill  =</span> <span class="fu">factor</span>(color, <span class="at">levels =</span> color_names, <span class="at">ordered =</span> <span class="cn">TRUE</span>)))</span>
<span id="cb18-100"><a href="housing-instability.html#cb18-100" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">fill =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> <span class="cn">FALSE</span>)</span>
<span id="cb18-101"><a href="housing-instability.html#cb18-101" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add bars</span></span>
<span id="cb18-102"><a href="housing-instability.html#cb18-102" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> p <span class="sc">+</span></span>
<span id="cb18-103"><a href="housing-instability.html#cb18-103" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>,</span>
<span id="cb18-104"><a href="housing-instability.html#cb18-104" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> text_size) <span class="sc">+</span></span>
<span id="cb18-105"><a href="housing-instability.html#cb18-105" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb18-106"><a href="housing-instability.html#cb18-106" aria-hidden="true" tabindex="-1"></a>    ggthemes<span class="sc">::</span><span class="fu">theme_tufte</span>()</span>
<span id="cb18-107"><a href="housing-instability.html#cb18-107" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> color_values)</span>
<span id="cb18-108"><a href="housing-instability.html#cb18-108" aria-hidden="true" tabindex="-1"></a>  <span class="co">#p &lt;- p + scale_color_manual(values = c(&quot;#ffffff&quot;, &quot;#00a9b7&quot;))</span></span>
<span id="cb18-109"><a href="housing-instability.html#cb18-109" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add features</span></span>
<span id="cb18-110"><a href="housing-instability.html#cb18-110" aria-hidden="true" tabindex="-1"></a>  title_scale <span class="ot">&lt;-</span> <span class="fu">min</span>(<span class="dv">1</span>, <span class="dv">48</span> <span class="sc">/</span> <span class="fu">nchar</span>(plot_title))</span>
<span id="cb18-111"><a href="housing-instability.html#cb18-111" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">&quot;Montserrat&quot;</span>),</span>
<span id="cb18-112"><a href="housing-instability.html#cb18-112" aria-hidden="true" tabindex="-1"></a>                 <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span> <span class="sc">*</span> title_scale <span class="sc">*</span> text_size, <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">b =</span> <span class="dv">10</span>, <span class="at">unit =</span> <span class="st">&quot;pt&quot;</span>)),</span>
<span id="cb18-113"><a href="housing-instability.html#cb18-113" aria-hidden="true" tabindex="-1"></a>                 <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>,</span>
<span id="cb18-114"><a href="housing-instability.html#cb18-114" aria-hidden="true" tabindex="-1"></a>                                            <span class="at">size =</span> <span class="dv">10</span> <span class="sc">*</span> text_size, </span>
<span id="cb18-115"><a href="housing-instability.html#cb18-115" aria-hidden="true" tabindex="-1"></a>                                            <span class="at">color =</span> <span class="fu">rev</span>(df<span class="sc">$</span>textcolor),</span>
<span id="cb18-116"><a href="housing-instability.html#cb18-116" aria-hidden="true" tabindex="-1"></a>                                            <span class="at">family =</span> <span class="fu">rev</span>(df<span class="sc">$</span>textfont)),</span>
<span id="cb18-117"><a href="housing-instability.html#cb18-117" aria-hidden="true" tabindex="-1"></a>                 <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span> <span class="sc">*</span> text_size),</span>
<span id="cb18-118"><a href="housing-instability.html#cb18-118" aria-hidden="true" tabindex="-1"></a>                 <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb18-119"><a href="housing-instability.html#cb18-119" aria-hidden="true" tabindex="-1"></a>                 <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb18-120"><a href="housing-instability.html#cb18-120" aria-hidden="true" tabindex="-1"></a>                 <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">5</span> <span class="sc">*</span> text_size, <span class="at">lineheight =</span> <span class="fl">0.5</span>))</span>
<span id="cb18-121"><a href="housing-instability.html#cb18-121" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(subtitle_text <span class="sc">!=</span> <span class="st">&quot;&quot;</span>){</span>
<span id="cb18-122"><a href="housing-instability.html#cb18-122" aria-hidden="true" tabindex="-1"></a>    p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">5</span> <span class="sc">*</span> text_size)) <span class="sc">+</span></span>
<span id="cb18-123"><a href="housing-instability.html#cb18-123" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">subtitle =</span> subtitle_text)</span>
<span id="cb18-124"><a href="housing-instability.html#cb18-124" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb18-125"><a href="housing-instability.html#cb18-125" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add numeric labels to bars based on bar_label parameter</span></span>
<span id="cb18-126"><a href="housing-instability.html#cb18-126" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (y_title <span class="sc">!=</span> <span class="st">&quot;&quot;</span> <span class="sc">&amp;</span> bar_label) {</span>
<span id="cb18-127"><a href="housing-instability.html#cb18-127" aria-hidden="true" tabindex="-1"></a>    p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> label_text, </span>
<span id="cb18-128"><a href="housing-instability.html#cb18-128" aria-hidden="true" tabindex="-1"></a>                           <span class="at">hjust =</span> text_alignment, </span>
<span id="cb18-129"><a href="housing-instability.html#cb18-129" aria-hidden="true" tabindex="-1"></a>                           <span class="at">color =</span> <span class="fu">factor</span>(label_color),</span>
<span id="cb18-130"><a href="housing-instability.html#cb18-130" aria-hidden="true" tabindex="-1"></a>                           <span class="at">family =</span> textfont),</span>
<span id="cb18-131"><a href="housing-instability.html#cb18-131" aria-hidden="true" tabindex="-1"></a>                       <span class="at">size =</span> <span class="fl">4.5</span> <span class="sc">*</span> text_size) <span class="sc">+</span></span>
<span id="cb18-132"><a href="housing-instability.html#cb18-132" aria-hidden="true" tabindex="-1"></a>       <span class="fu">scale_colour_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">&quot;#000000&quot;</span>, <span class="st">&quot;#ffffff&quot;</span>))</span>
<span id="cb18-133"><a href="housing-instability.html#cb18-133" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb18-134"><a href="housing-instability.html#cb18-134" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add vertical line to the left side of the bars based on the h_line parameter</span></span>
<span id="cb18-135"><a href="housing-instability.html#cb18-135" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">min</span>(df<span class="sc">$</span>var, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">&lt;</span> <span class="dv">0</span>) p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">&quot;longdash&quot;</span>, <span class="at">size =</span> <span class="dv">2</span>)</span>
<span id="cb18-136"><a href="housing-instability.html#cb18-136" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add remaining text</span></span>
<span id="cb18-137"><a href="housing-instability.html#cb18-137" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> p <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> plot_title, <span class="at">y =</span> y_title,</span>
<span id="cb18-138"><a href="housing-instability.html#cb18-138" aria-hidden="true" tabindex="-1"></a>                <span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">caption =</span> caption_text)</span>
<span id="cb18-139"><a href="housing-instability.html#cb18-139" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-140"><a href="housing-instability.html#cb18-140" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> p <span class="sc">+</span></span>
<span id="cb18-141"><a href="housing-instability.html#cb18-141" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb18-142"><a href="housing-instability.html#cb18-142" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>), <span class="co"># bg of the panel</span></span>
<span id="cb18-143"><a href="housing-instability.html#cb18-143" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>), <span class="co"># bg of the plot</span></span>
<span id="cb18-144"><a href="housing-instability.html#cb18-144" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="st">&quot;transparent&quot;</span>), <span class="co"># get rid of legend bg</span></span>
<span id="cb18-145"><a href="housing-instability.html#cb18-145" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.box.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="st">&quot;transparent&quot;</span>), <span class="co"># get rid of legend panel bg</span></span>
<span id="cb18-146"><a href="housing-instability.html#cb18-146" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>,<span class="at">colour =</span> <span class="cn">NA</span>))</span>
<span id="cb18-147"><a href="housing-instability.html#cb18-147" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-148"><a href="housing-instability.html#cb18-148" aria-hidden="true" tabindex="-1"></a>  p</span>
<span id="cb18-149"><a href="housing-instability.html#cb18-149" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
</div>
<div class="panelset">
<div id="cost-burdened-renters" class="section level3 panel unnumbered">
<h3>Cost Burdened Renters</h3>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="housing-instability.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Data was pulled in Python file get_data.py and written to .csv</span></span>
<span id="cb19-2"><a href="housing-instability.html#cb19-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;housing_data/low_income_renters.csv&quot;</span>)</span>
<span id="cb19-3"><a href="housing-instability.html#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="housing-instability.html#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="do">## This code is modified from the urban institute: https://github.com/UrbanInstitute/covid-rental-risk-index/blob/master/scripts/01_generate_index_variables.R</span></span>
<span id="cb19-5"><a href="housing-instability.html#cb19-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-6"><a href="housing-instability.html#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate percent of households making under 35k who pay more than 50% of their</span></span>
<span id="cb19-7"><a href="housing-instability.html#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="co"># income on rent</span></span>
<span id="cb19-8"><a href="housing-instability.html#cb19-8" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb19-9"><a href="housing-instability.html#cb19-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># select ACS table variables w/ attached GEOID</span></span>
<span id="cb19-10"><a href="housing-instability.html#cb19-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb19-11"><a href="housing-instability.html#cb19-11" aria-hidden="true" tabindex="-1"></a>    NAME,</span>
<span id="cb19-12"><a href="housing-instability.html#cb19-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># These are all the peolpe making under 35k (denominator)</span></span>
<span id="cb19-13"><a href="housing-instability.html#cb19-13" aria-hidden="true" tabindex="-1"></a>    B25074_002E,</span>
<span id="cb19-14"><a href="housing-instability.html#cb19-14" aria-hidden="true" tabindex="-1"></a>    B25074_011E,</span>
<span id="cb19-15"><a href="housing-instability.html#cb19-15" aria-hidden="true" tabindex="-1"></a>    B25074_020E,</span>
<span id="cb19-16"><a href="housing-instability.html#cb19-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># These are all the people making under 35k who pay more than 50% of their income on rent (numerator)</span></span>
<span id="cb19-17"><a href="housing-instability.html#cb19-17" aria-hidden="true" tabindex="-1"></a>    B25074_009E,</span>
<span id="cb19-18"><a href="housing-instability.html#cb19-18" aria-hidden="true" tabindex="-1"></a>    B25074_018E,</span>
<span id="cb19-19"><a href="housing-instability.html#cb19-19" aria-hidden="true" tabindex="-1"></a>    B25074_027E,</span>
<span id="cb19-20"><a href="housing-instability.html#cb19-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># These are the people making under 35k for whom this metric wasn&#39;t computed</span></span>
<span id="cb19-21"><a href="housing-instability.html#cb19-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># and they therefore need to be subtracted from the denominator</span></span>
<span id="cb19-22"><a href="housing-instability.html#cb19-22" aria-hidden="true" tabindex="-1"></a>    B25074_010E,</span>
<span id="cb19-23"><a href="housing-instability.html#cb19-23" aria-hidden="true" tabindex="-1"></a>    B25074_019E,</span>
<span id="cb19-24"><a href="housing-instability.html#cb19-24" aria-hidden="true" tabindex="-1"></a>    B25074_028E</span>
<span id="cb19-25"><a href="housing-instability.html#cb19-25" aria-hidden="true" tabindex="-1"></a>  )  <span class="sc">%&gt;%</span></span>
<span id="cb19-26"><a href="housing-instability.html#cb19-26" aria-hidden="true" tabindex="-1"></a>  <span class="co">#rename both county and city to just St. Louis</span></span>
<span id="cb19-27"><a href="housing-instability.html#cb19-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">NAME =</span> <span class="fu">if_else</span>(<span class="fu">str_detect</span>(NAME, <span class="st">&quot;St. Louis&quot;</span>), <span class="st">&quot;St. Louis&quot;</span>, NAME)) <span class="sc">%&gt;%</span></span>
<span id="cb19-28"><a href="housing-instability.html#cb19-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(NAME) <span class="sc">%&gt;%</span></span>
<span id="cb19-29"><a href="housing-instability.html#cb19-29" aria-hidden="true" tabindex="-1"></a>  <span class="co">#use summarize across instead to save space and make reusable in a function</span></span>
<span id="cb19-30"><a href="housing-instability.html#cb19-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb19-31"><a href="housing-instability.html#cb19-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">B25074_002E =</span> <span class="fu">sum</span>(B25074_002E),</span>
<span id="cb19-32"><a href="housing-instability.html#cb19-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">B25074_011E =</span> <span class="fu">sum</span>(B25074_011E),</span>
<span id="cb19-33"><a href="housing-instability.html#cb19-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">B25074_020E =</span> <span class="fu">sum</span>(B25074_020E),</span>
<span id="cb19-34"><a href="housing-instability.html#cb19-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">B25074_009E =</span> <span class="fu">sum</span>(B25074_009E),</span>
<span id="cb19-35"><a href="housing-instability.html#cb19-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">B25074_018E =</span> <span class="fu">sum</span>(B25074_018E),</span>
<span id="cb19-36"><a href="housing-instability.html#cb19-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">B25074_027E =</span> <span class="fu">sum</span>(B25074_027E),</span>
<span id="cb19-37"><a href="housing-instability.html#cb19-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">B25074_010E =</span> <span class="fu">sum</span>(B25074_010E),</span>
<span id="cb19-38"><a href="housing-instability.html#cb19-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">B25074_019E =</span> <span class="fu">sum</span>(B25074_019E),</span>
<span id="cb19-39"><a href="housing-instability.html#cb19-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">B25074_028E =</span> <span class="fu">sum</span>(B25074_028E)</span>
<span id="cb19-40"><a href="housing-instability.html#cb19-40" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb19-41"><a href="housing-instability.html#cb19-41" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create cost burden variable w/ calculation</span></span>
<span id="cb19-42"><a href="housing-instability.html#cb19-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb19-43"><a href="housing-instability.html#cb19-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">perc_cost_burdened_under_35k =</span> (B25074_009E <span class="sc">+</span> B25074_018E <span class="sc">+</span> B25074_027E) <span class="sc">/</span></span>
<span id="cb19-44"><a href="housing-instability.html#cb19-44" aria-hidden="true" tabindex="-1"></a>      (</span>
<span id="cb19-45"><a href="housing-instability.html#cb19-45" aria-hidden="true" tabindex="-1"></a>        B25074_002E <span class="sc">+</span> B25074_011E <span class="sc">+</span> B25074_020E <span class="sc">-</span> B25074_010E <span class="sc">-</span> B25074_019E <span class="sc">-</span></span>
<span id="cb19-46"><a href="housing-instability.html#cb19-46" aria-hidden="true" tabindex="-1"></a>          B25074_028E</span>
<span id="cb19-47"><a href="housing-instability.html#cb19-47" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb19-48"><a href="housing-instability.html#cb19-48" aria-hidden="true" tabindex="-1"></a>    <span class="co">#cd add</span></span>
<span id="cb19-49"><a href="housing-instability.html#cb19-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">perc_cost_burdened_under_35k =</span></span>
<span id="cb19-50"><a href="housing-instability.html#cb19-50" aria-hidden="true" tabindex="-1"></a>      <span class="fu">if_else</span>(</span>
<span id="cb19-51"><a href="housing-instability.html#cb19-51" aria-hidden="true" tabindex="-1"></a>        B25074_002E <span class="sc">+</span> B25074_011E <span class="sc">+</span> B25074_020E <span class="sc">==</span> <span class="dv">0</span>,</span>
<span id="cb19-52"><a href="housing-instability.html#cb19-52" aria-hidden="true" tabindex="-1"></a>        <span class="dv">0</span>,</span>
<span id="cb19-53"><a href="housing-instability.html#cb19-53" aria-hidden="true" tabindex="-1"></a>        perc_cost_burdened_under_35k</span>
<span id="cb19-54"><a href="housing-instability.html#cb19-54" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb19-55"><a href="housing-instability.html#cb19-55" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb19-56"><a href="housing-instability.html#cb19-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-57"><a href="housing-instability.html#cb19-57" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up for graph</span></span>
<span id="cb19-58"><a href="housing-instability.html#cb19-58" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb19-59"><a href="housing-instability.html#cb19-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">city =</span> <span class="fu">recode</span>(NAME,</span>
<span id="cb19-60"><a href="housing-instability.html#cb19-60" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Davidson County, Tennessee</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Nashville&quot;</span>,</span>
<span id="cb19-61"><a href="housing-instability.html#cb19-61" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Douglas County, Nebraska</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Omaha&quot;</span>,</span>
<span id="cb19-62"><a href="housing-instability.html#cb19-62" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Franklin County, Ohio</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Columbus&quot;</span>,</span>
<span id="cb19-63"><a href="housing-instability.html#cb19-63" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Greenville County, South Carolina</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Greenville&quot;</span>,</span>
<span id="cb19-64"><a href="housing-instability.html#cb19-64" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Guilford County, North Carolina</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Greensboro&quot;</span>,</span>
<span id="cb19-65"><a href="housing-instability.html#cb19-65" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Hamilton County, Ohio</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Cincinnati&quot;</span>,</span>
<span id="cb19-66"><a href="housing-instability.html#cb19-66" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Jackson County, Missouri</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Kansas City&quot;</span>,</span>
<span id="cb19-67"><a href="housing-instability.html#cb19-67" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Jefferson County, Alabama</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Birmingham&quot;</span>,</span>
<span id="cb19-68"><a href="housing-instability.html#cb19-68" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Jefferson County, Kentucky</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Louisville&quot;</span>,</span>
<span id="cb19-69"><a href="housing-instability.html#cb19-69" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Kent County, Michigan</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Grand Rapids&quot;</span>,</span>
<span id="cb19-70"><a href="housing-instability.html#cb19-70" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Knox County, Tennessee</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Knoxville&quot;</span>,</span>
<span id="cb19-71"><a href="housing-instability.html#cb19-71" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Marion County, Indiana</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Indianapolis&quot;</span>,</span>
<span id="cb19-72"><a href="housing-instability.html#cb19-72" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Mecklenburg County, North Carolina</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Charlotte&quot;</span>,</span>
<span id="cb19-73"><a href="housing-instability.html#cb19-73" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Oklahoma County, Oklahoma</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Oklahoma City&quot;</span>,</span>
<span id="cb19-74"><a href="housing-instability.html#cb19-74" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Shelby County, Tennessee</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Memphis&quot;</span>,</span>
<span id="cb19-75"><a href="housing-instability.html#cb19-75" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Tulsa County, Oklahoma</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Tulsa&quot;</span>),</span>
<span id="cb19-76"><a href="housing-instability.html#cb19-76" aria-hidden="true" tabindex="-1"></a>         <span class="at">perc_cost_burdened_under_35k =</span> <span class="dv">100</span> <span class="sc">*</span> perc_cost_burdened_under_35k) </span>
<span id="cb19-77"><a href="housing-instability.html#cb19-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-78"><a href="housing-instability.html#cb19-78" aria-hidden="true" tabindex="-1"></a>plt_cost_burdened <span class="ot">&lt;-</span> <span class="fu">ranking</span>(df, <span class="st">&quot;perc_cost_burdened_under_35k&quot;</span>, <span class="at">text_size =</span> <span class="dv">2</span>, <span class="at">order =</span> <span class="st">&quot;ascending&quot;</span>,</span>
<span id="cb19-79"><a href="housing-instability.html#cb19-79" aria-hidden="true" tabindex="-1"></a>                             <span class="at">plot_title =</span> <span class="st">&quot;Cost Burdened Renters in Households Making Under 35k &quot;</span>)</span>
<span id="cb19-80"><a href="housing-instability.html#cb19-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-81"><a href="housing-instability.html#cb19-81" aria-hidden="true" tabindex="-1"></a>plt_cost_burdened</span></code></pre></div>
<p><img src="urban_index_files/figure-html/cost_burdened_renters_ranking-1.png" width="672" /></p>
</div>
<div id="overcrowding-1" class="section level3 panel unnumbered">
<h3>Overcrowding</h3>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="housing-instability.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Data was pulled in Python file get_data.py and written to .csv</span></span>
<span id="cb20-2"><a href="housing-instability.html#cb20-2" aria-hidden="true" tabindex="-1"></a>oc_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;housing_data/overcrowding.csv&quot;</span>)</span>
<span id="cb20-3"><a href="housing-instability.html#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="housing-instability.html#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="do">## This code is modified from the urban institute: https://github.com/UrbanInstitute/covid-rental-risk-index/blob/master/scripts/01_generate_index_variables.R</span></span>
<span id="cb20-5"><a href="housing-instability.html#cb20-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-6"><a href="housing-instability.html#cb20-6" aria-hidden="true" tabindex="-1"></a>oc_df <span class="ot">&lt;-</span> oc_df <span class="sc">%&gt;%</span></span>
<span id="cb20-7"><a href="housing-instability.html#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># select ACS table variables w/ attached GEOID</span></span>
<span id="cb20-8"><a href="housing-instability.html#cb20-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(NAME, B25014_013E, B25014_012E, B25014_008E)  <span class="sc">%&gt;%</span></span>
<span id="cb20-9"><a href="housing-instability.html#cb20-9" aria-hidden="true" tabindex="-1"></a>  <span class="co">#rename both county and city to just St. Louis</span></span>
<span id="cb20-10"><a href="housing-instability.html#cb20-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">NAME =</span> <span class="fu">if_else</span>(<span class="fu">str_detect</span>(NAME, <span class="st">&quot;St. Louis&quot;</span>), <span class="st">&quot;St. Louis&quot;</span>, NAME)) <span class="sc">%&gt;%</span></span>
<span id="cb20-11"><a href="housing-instability.html#cb20-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(NAME) <span class="sc">%&gt;%</span></span>
<span id="cb20-12"><a href="housing-instability.html#cb20-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), sum)) <span class="sc">%&gt;%</span></span>
<span id="cb20-13"><a href="housing-instability.html#cb20-13" aria-hidden="true" tabindex="-1"></a>   <span class="co"># create cost burden variable w/ calculation</span></span>
<span id="cb20-14"><a href="housing-instability.html#cb20-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">perc_overcrowding_renter_1.50_or_more =</span> ((B25014_012E <span class="sc">+</span> B25014_013E) <span class="sc">/</span> B25014_008E),</span>
<span id="cb20-15"><a href="housing-instability.html#cb20-15" aria-hidden="true" tabindex="-1"></a>         <span class="at">perc_overcrowding_renter_1.50_or_more =</span> </span>
<span id="cb20-16"><a href="housing-instability.html#cb20-16" aria-hidden="true" tabindex="-1"></a>           <span class="fu">if_else</span>(B25014_008E <span class="sc">==</span> <span class="dv">0</span>, <span class="dv">0</span>, perc_overcrowding_renter_1<span class="fl">.50</span>_or_more))</span>
<span id="cb20-17"><a href="housing-instability.html#cb20-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-18"><a href="housing-instability.html#cb20-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up for graph</span></span>
<span id="cb20-19"><a href="housing-instability.html#cb20-19" aria-hidden="true" tabindex="-1"></a>oc_df <span class="ot">&lt;-</span> oc_df <span class="sc">%&gt;%</span></span>
<span id="cb20-20"><a href="housing-instability.html#cb20-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">city =</span> <span class="fu">recode</span>(NAME,</span>
<span id="cb20-21"><a href="housing-instability.html#cb20-21" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Davidson County, Tennessee</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Nashville&quot;</span>,</span>
<span id="cb20-22"><a href="housing-instability.html#cb20-22" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Douglas County, Nebraska</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Omaha&quot;</span>,</span>
<span id="cb20-23"><a href="housing-instability.html#cb20-23" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Franklin County, Ohio</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Columbus&quot;</span>,</span>
<span id="cb20-24"><a href="housing-instability.html#cb20-24" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Greenville County, South Carolina</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Greenville&quot;</span>,</span>
<span id="cb20-25"><a href="housing-instability.html#cb20-25" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Guilford County, North Carolina</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Greensboro&quot;</span>,</span>
<span id="cb20-26"><a href="housing-instability.html#cb20-26" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Hamilton County, Ohio</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Cincinnati&quot;</span>,</span>
<span id="cb20-27"><a href="housing-instability.html#cb20-27" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Jackson County, Missouri</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Kansas City&quot;</span>,</span>
<span id="cb20-28"><a href="housing-instability.html#cb20-28" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Jefferson County, Alabama</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Birmingham&quot;</span>,</span>
<span id="cb20-29"><a href="housing-instability.html#cb20-29" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Jefferson County, Kentucky</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Louisville&quot;</span>,</span>
<span id="cb20-30"><a href="housing-instability.html#cb20-30" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Kent County, Michigan</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Grand Rapids&quot;</span>,</span>
<span id="cb20-31"><a href="housing-instability.html#cb20-31" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Knox County, Tennessee</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Knoxville&quot;</span>,</span>
<span id="cb20-32"><a href="housing-instability.html#cb20-32" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Marion County, Indiana</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Indianapolis&quot;</span>,</span>
<span id="cb20-33"><a href="housing-instability.html#cb20-33" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Mecklenburg County, North Carolina</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Charlotte&quot;</span>,</span>
<span id="cb20-34"><a href="housing-instability.html#cb20-34" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Oklahoma County, Oklahoma</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Oklahoma City&quot;</span>,</span>
<span id="cb20-35"><a href="housing-instability.html#cb20-35" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Shelby County, Tennessee</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Memphis&quot;</span>,</span>
<span id="cb20-36"><a href="housing-instability.html#cb20-36" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Tulsa County, Oklahoma</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Tulsa&quot;</span>),</span>
<span id="cb20-37"><a href="housing-instability.html#cb20-37" aria-hidden="true" tabindex="-1"></a>         <span class="at">perc_overcrowding_renter_1.50_or_more =</span> <span class="dv">100</span> <span class="sc">*</span> perc_overcrowding_renter_1<span class="fl">.50</span>_or_more) </span>
<span id="cb20-38"><a href="housing-instability.html#cb20-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-39"><a href="housing-instability.html#cb20-39" aria-hidden="true" tabindex="-1"></a>plt_oc <span class="ot">&lt;-</span> <span class="fu">ranking</span>(oc_df, <span class="st">&quot;perc_overcrowding_renter_1.50_or_more&quot;</span>, <span class="at">text_size =</span> <span class="dv">2</span>, <span class="at">order =</span> <span class="st">&quot;ascending&quot;</span>,</span>
<span id="cb20-40"><a href="housing-instability.html#cb20-40" aria-hidden="true" tabindex="-1"></a>                             <span class="at">plot_title =</span> <span class="st">&quot;Overcrowding&quot;</span>)</span>
<span id="cb20-41"><a href="housing-instability.html#cb20-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-42"><a href="housing-instability.html#cb20-42" aria-hidden="true" tabindex="-1"></a>plt_oc</span></code></pre></div>
<p><img src="urban_index_files/figure-html/overcrowding_ranking-1.png" width="672" /></p>
</div>
<div id="unemployment" class="section level3 panel unnumbered">
<h3>Unemployment</h3>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="housing-instability.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Data was pulled in Python file get_data.py and written to .csv</span></span>
<span id="cb21-2"><a href="housing-instability.html#cb21-2" aria-hidden="true" tabindex="-1"></a>un_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;housing_data/unemployed.csv&quot;</span>)</span>
<span id="cb21-3"><a href="housing-instability.html#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="housing-instability.html#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="do">## This code is modified from the urban institute: https://github.com/UrbanInstitute/covid-rental-risk-index/blob/master/scripts/01_generate_index_variables.R</span></span>
<span id="cb21-5"><a href="housing-instability.html#cb21-5" aria-hidden="true" tabindex="-1"></a>un_df <span class="ot">&lt;-</span> un_df <span class="sc">%&gt;%</span></span>
<span id="cb21-6"><a href="housing-instability.html#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># select ACS table variables w/ attached GEOID</span></span>
<span id="cb21-7"><a href="housing-instability.html#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(B12006_055E, B12006_050E, B12006_011E, B12006_006E, B12006_022E, B12006_017E, B12006_033E, B12006_028E, B12006_044E, B12006_039E, B12006_053E, B12006_048E, B12006_009E, B12006_004E, B12006_020E, B12006_015E, B12006_031E, B12006_026E, B12006_042E, B12006_037E, NAME) <span class="sc">%&gt;%</span></span>
<span id="cb21-8"><a href="housing-instability.html#cb21-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># collapse St. Louis into one</span></span>
<span id="cb21-9"><a href="housing-instability.html#cb21-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">NAME =</span> <span class="fu">if_else</span>(<span class="fu">str_detect</span>(NAME, <span class="st">&quot;St. Louis&quot;</span>), <span class="st">&quot;St. Louis&quot;</span>, NAME)) <span class="sc">%&gt;%</span></span>
<span id="cb21-10"><a href="housing-instability.html#cb21-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(NAME) <span class="sc">%&gt;%</span></span>
<span id="cb21-11"><a href="housing-instability.html#cb21-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), sum)) <span class="sc">%&gt;%</span></span>
<span id="cb21-12"><a href="housing-instability.html#cb21-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create unemployed variable w/ calculation</span></span>
<span id="cb21-13"><a href="housing-instability.html#cb21-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">perc_unemployed_laborforce =</span> ((B12006_055E <span class="sc">+</span> B12006_050E <span class="sc">+</span> B12006_011E <span class="sc">+</span> B12006_006E <span class="sc">+</span> B12006_022E <span class="sc">+</span> B12006_017E <span class="sc">+</span> B12006_033E <span class="sc">+</span> B12006_028E <span class="sc">+</span> B12006_044E <span class="sc">+</span> B12006_039E) <span class="sc">/</span> (B12006_053E <span class="sc">+</span> B12006_048E <span class="sc">+</span> B12006_009E <span class="sc">+</span> B12006_004E <span class="sc">+</span> B12006_020E <span class="sc">+</span> B12006_015E <span class="sc">+</span> B12006_031E <span class="sc">+</span> B12006_026E <span class="sc">+</span> B12006_042E <span class="sc">+</span> B12006_037E)),</span>
<span id="cb21-14"><a href="housing-instability.html#cb21-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">perc_unemployed_laborforce =</span> </span>
<span id="cb21-15"><a href="housing-instability.html#cb21-15" aria-hidden="true" tabindex="-1"></a>           <span class="fu">if_else</span>(B12006_053E <span class="sc">+</span> B12006_048E <span class="sc">+</span> B12006_009E <span class="sc">+</span> B12006_004E <span class="sc">+</span> B12006_020E <span class="sc">+</span> B12006_015E <span class="sc">+</span> B12006_031E <span class="sc">+</span> B12006_026E <span class="sc">+</span> B12006_042E <span class="sc">+</span> B12006_037E <span class="sc">==</span> <span class="dv">0</span>, <span class="dv">0</span>,</span>
<span id="cb21-16"><a href="housing-instability.html#cb21-16" aria-hidden="true" tabindex="-1"></a>                   perc_unemployed_laborforce))</span>
<span id="cb21-17"><a href="housing-instability.html#cb21-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-18"><a href="housing-instability.html#cb21-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up for graph</span></span>
<span id="cb21-19"><a href="housing-instability.html#cb21-19" aria-hidden="true" tabindex="-1"></a>un_df <span class="ot">&lt;-</span> un_df <span class="sc">%&gt;%</span></span>
<span id="cb21-20"><a href="housing-instability.html#cb21-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">city =</span> <span class="fu">recode</span>(NAME,</span>
<span id="cb21-21"><a href="housing-instability.html#cb21-21" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Davidson County, Tennessee</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Nashville&quot;</span>,</span>
<span id="cb21-22"><a href="housing-instability.html#cb21-22" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Douglas County, Nebraska</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Omaha&quot;</span>,</span>
<span id="cb21-23"><a href="housing-instability.html#cb21-23" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Franklin County, Ohio</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Columbus&quot;</span>,</span>
<span id="cb21-24"><a href="housing-instability.html#cb21-24" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Greenville County, South Carolina</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Greenville&quot;</span>,</span>
<span id="cb21-25"><a href="housing-instability.html#cb21-25" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Guilford County, North Carolina</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Greensboro&quot;</span>,</span>
<span id="cb21-26"><a href="housing-instability.html#cb21-26" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Hamilton County, Ohio</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Cincinnati&quot;</span>,</span>
<span id="cb21-27"><a href="housing-instability.html#cb21-27" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Jackson County, Missouri</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Kansas City&quot;</span>,</span>
<span id="cb21-28"><a href="housing-instability.html#cb21-28" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Jefferson County, Alabama</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Birmingham&quot;</span>,</span>
<span id="cb21-29"><a href="housing-instability.html#cb21-29" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Jefferson County, Kentucky</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Louisville&quot;</span>,</span>
<span id="cb21-30"><a href="housing-instability.html#cb21-30" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Kent County, Michigan</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Grand Rapids&quot;</span>,</span>
<span id="cb21-31"><a href="housing-instability.html#cb21-31" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Knox County, Tennessee</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Knoxville&quot;</span>,</span>
<span id="cb21-32"><a href="housing-instability.html#cb21-32" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Marion County, Indiana</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Indianapolis&quot;</span>,</span>
<span id="cb21-33"><a href="housing-instability.html#cb21-33" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Mecklenburg County, North Carolina</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Charlotte&quot;</span>,</span>
<span id="cb21-34"><a href="housing-instability.html#cb21-34" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Oklahoma County, Oklahoma</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Oklahoma City&quot;</span>,</span>
<span id="cb21-35"><a href="housing-instability.html#cb21-35" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Shelby County, Tennessee</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Memphis&quot;</span>,</span>
<span id="cb21-36"><a href="housing-instability.html#cb21-36" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Tulsa County, Oklahoma</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Tulsa&quot;</span>),</span>
<span id="cb21-37"><a href="housing-instability.html#cb21-37" aria-hidden="true" tabindex="-1"></a>         <span class="at">perc_unemployed_laborforce =</span> <span class="dv">100</span> <span class="sc">*</span> perc_unemployed_laborforce) </span>
<span id="cb21-38"><a href="housing-instability.html#cb21-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-39"><a href="housing-instability.html#cb21-39" aria-hidden="true" tabindex="-1"></a>plt_un <span class="ot">&lt;-</span> <span class="fu">ranking</span>(un_df, <span class="st">&quot;perc_unemployed_laborforce&quot;</span>, <span class="at">text_size =</span> <span class="dv">2</span>, <span class="at">order =</span> <span class="st">&quot;ascending&quot;</span>,</span>
<span id="cb21-40"><a href="housing-instability.html#cb21-40" aria-hidden="true" tabindex="-1"></a>                             <span class="at">plot_title =</span> <span class="st">&quot;Unemployed&quot;</span>)</span>
<span id="cb21-41"><a href="housing-instability.html#cb21-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-42"><a href="housing-instability.html#cb21-42" aria-hidden="true" tabindex="-1"></a>plt_un</span></code></pre></div>
<p><img src="urban_index_files/figure-html/unemployment_ranking-1.png" width="672" /></p>
</div>
<div id="share-renting" class="section level3 panel unnumbered">
<h3>Share renting</h3>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="housing-instability.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Data was pulled in Python file get_data.py and written to .csv</span></span>
<span id="cb22-2"><a href="housing-instability.html#cb22-2" aria-hidden="true" tabindex="-1"></a>sr_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;housing_data/share_renting.csv&quot;</span>)</span>
<span id="cb22-3"><a href="housing-instability.html#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="housing-instability.html#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="do">## This code is modified from the urban institute: https://github.com/UrbanInstitute/covid-rental-risk-index/blob/master/scripts/01_generate_index_variables.R</span></span>
<span id="cb22-5"><a href="housing-instability.html#cb22-5" aria-hidden="true" tabindex="-1"></a>sr_df <span class="ot">&lt;-</span> sr_df <span class="sc">%&gt;%</span></span>
<span id="cb22-6"><a href="housing-instability.html#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># select ACS table variables w/ attached GEOID</span></span>
<span id="cb22-7"><a href="housing-instability.html#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(B25003_003E, B25003_001E, NAME) <span class="sc">%&gt;%</span></span>
<span id="cb22-8"><a href="housing-instability.html#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># collapse St. Louis into one</span></span>
<span id="cb22-9"><a href="housing-instability.html#cb22-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">NAME =</span> <span class="fu">if_else</span>(<span class="fu">str_detect</span>(NAME, <span class="st">&quot;St. Louis&quot;</span>), <span class="st">&quot;St. Louis&quot;</span>, NAME)) <span class="sc">%&gt;%</span></span>
<span id="cb22-10"><a href="housing-instability.html#cb22-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(NAME) <span class="sc">%&gt;%</span></span>
<span id="cb22-11"><a href="housing-instability.html#cb22-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), sum)) <span class="sc">%&gt;%</span></span>
<span id="cb22-12"><a href="housing-instability.html#cb22-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create perc_renters variable w/ calculation</span></span>
<span id="cb22-13"><a href="housing-instability.html#cb22-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">perc_renters =</span> (B25003_003E <span class="sc">/</span> B25003_001E),</span>
<span id="cb22-14"><a href="housing-instability.html#cb22-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">perc_renters =</span> <span class="fu">if_else</span>(B25003_001E <span class="sc">==</span> <span class="dv">0</span>, <span class="dv">0</span>, perc_renters),</span>
<span id="cb22-15"><a href="housing-instability.html#cb22-15" aria-hidden="true" tabindex="-1"></a>         <span class="at">num_renters =</span> B25003_003E)</span>
<span id="cb22-16"><a href="housing-instability.html#cb22-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-17"><a href="housing-instability.html#cb22-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up for graph</span></span>
<span id="cb22-18"><a href="housing-instability.html#cb22-18" aria-hidden="true" tabindex="-1"></a>sr_df <span class="ot">&lt;-</span> sr_df <span class="sc">%&gt;%</span></span>
<span id="cb22-19"><a href="housing-instability.html#cb22-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">city =</span> <span class="fu">recode</span>(NAME,</span>
<span id="cb22-20"><a href="housing-instability.html#cb22-20" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Davidson County, Tennessee</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Nashville&quot;</span>,</span>
<span id="cb22-21"><a href="housing-instability.html#cb22-21" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Douglas County, Nebraska</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Omaha&quot;</span>,</span>
<span id="cb22-22"><a href="housing-instability.html#cb22-22" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Franklin County, Ohio</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Columbus&quot;</span>,</span>
<span id="cb22-23"><a href="housing-instability.html#cb22-23" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Greenville County, South Carolina</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Greenville&quot;</span>,</span>
<span id="cb22-24"><a href="housing-instability.html#cb22-24" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Guilford County, North Carolina</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Greensboro&quot;</span>,</span>
<span id="cb22-25"><a href="housing-instability.html#cb22-25" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Hamilton County, Ohio</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Cincinnati&quot;</span>,</span>
<span id="cb22-26"><a href="housing-instability.html#cb22-26" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Jackson County, Missouri</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Kansas City&quot;</span>,</span>
<span id="cb22-27"><a href="housing-instability.html#cb22-27" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Jefferson County, Alabama</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Birmingham&quot;</span>,</span>
<span id="cb22-28"><a href="housing-instability.html#cb22-28" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Jefferson County, Kentucky</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Louisville&quot;</span>,</span>
<span id="cb22-29"><a href="housing-instability.html#cb22-29" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Kent County, Michigan</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Grand Rapids&quot;</span>,</span>
<span id="cb22-30"><a href="housing-instability.html#cb22-30" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Knox County, Tennessee</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Knoxville&quot;</span>,</span>
<span id="cb22-31"><a href="housing-instability.html#cb22-31" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Marion County, Indiana</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Indianapolis&quot;</span>,</span>
<span id="cb22-32"><a href="housing-instability.html#cb22-32" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Mecklenburg County, North Carolina</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Charlotte&quot;</span>,</span>
<span id="cb22-33"><a href="housing-instability.html#cb22-33" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Oklahoma County, Oklahoma</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Oklahoma City&quot;</span>,</span>
<span id="cb22-34"><a href="housing-instability.html#cb22-34" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Shelby County, Tennessee</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Memphis&quot;</span>,</span>
<span id="cb22-35"><a href="housing-instability.html#cb22-35" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Tulsa County, Oklahoma</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Tulsa&quot;</span>),</span>
<span id="cb22-36"><a href="housing-instability.html#cb22-36" aria-hidden="true" tabindex="-1"></a>         <span class="at">perc_renters =</span> <span class="dv">100</span> <span class="sc">*</span> perc_renters) </span>
<span id="cb22-37"><a href="housing-instability.html#cb22-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-38"><a href="housing-instability.html#cb22-38" aria-hidden="true" tabindex="-1"></a>plt_sr <span class="ot">&lt;-</span> <span class="fu">ranking</span>(sr_df, <span class="st">&quot;perc_renters&quot;</span>, <span class="at">text_size =</span> <span class="dv">2</span>, <span class="at">order =</span> <span class="st">&quot;ascending&quot;</span>,</span>
<span id="cb22-39"><a href="housing-instability.html#cb22-39" aria-hidden="true" tabindex="-1"></a>                             <span class="at">plot_title =</span> <span class="st">&quot;Percent Renters&quot;</span>)</span>
<span id="cb22-40"><a href="housing-instability.html#cb22-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-41"><a href="housing-instability.html#cb22-41" aria-hidden="true" tabindex="-1"></a>plt_sr</span></code></pre></div>
<p><img src="urban_index_files/figure-html/renters_ranking-1.png" width="672" /></p>
</div>
<div id="poverty-2" class="section level3 panel unnumbered">
<h3>Poverty</h3>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="housing-instability.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Data was pulled in Python file get_data.py and written to .csv</span></span>
<span id="cb23-2"><a href="housing-instability.html#cb23-2" aria-hidden="true" tabindex="-1"></a>pv_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;housing_data/poverty.csv&quot;</span>)</span>
<span id="cb23-3"><a href="housing-instability.html#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="housing-instability.html#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="do">## This code is modified from the urban institute: https://github.com/UrbanInstitute/covid-rental-risk-index/blob/master/scripts/01_generate_index_variables.R</span></span>
<span id="cb23-5"><a href="housing-instability.html#cb23-5" aria-hidden="true" tabindex="-1"></a>pv_df <span class="ot">&lt;-</span> pv_df <span class="sc">%&gt;%</span></span>
<span id="cb23-6"><a href="housing-instability.html#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># select ACS table variables w/ attached GEOID</span></span>
<span id="cb23-7"><a href="housing-instability.html#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(C17002_002E, C17002_003E, C17002_001E, NAME) <span class="sc">%&gt;%</span>  </span>
<span id="cb23-8"><a href="housing-instability.html#cb23-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># collapse St. Louis into one</span></span>
<span id="cb23-9"><a href="housing-instability.html#cb23-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">NAME =</span> <span class="fu">if_else</span>(<span class="fu">str_detect</span>(NAME, <span class="st">&quot;St. Louis&quot;</span>), <span class="st">&quot;St. Louis&quot;</span>, NAME)) <span class="sc">%&gt;%</span></span>
<span id="cb23-10"><a href="housing-instability.html#cb23-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(NAME) <span class="sc">%&gt;%</span></span>
<span id="cb23-11"><a href="housing-instability.html#cb23-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), sum)) <span class="sc">%&gt;%</span></span>
<span id="cb23-12"><a href="housing-instability.html#cb23-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create poverty variable w/ calculation</span></span>
<span id="cb23-13"><a href="housing-instability.html#cb23-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">perc_poverty_12mnth =</span> ((C17002_002E <span class="sc">+</span> C17002_003E) <span class="sc">/</span> C17002_001E),</span>
<span id="cb23-14"><a href="housing-instability.html#cb23-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">perc_poverty_12mnth =</span> </span>
<span id="cb23-15"><a href="housing-instability.html#cb23-15" aria-hidden="true" tabindex="-1"></a>           <span class="fu">if_else</span>(C17002_001E <span class="sc">==</span> <span class="dv">0</span>, <span class="dv">0</span>, perc_poverty_12mnth))</span>
<span id="cb23-16"><a href="housing-instability.html#cb23-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-17"><a href="housing-instability.html#cb23-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up for graph</span></span>
<span id="cb23-18"><a href="housing-instability.html#cb23-18" aria-hidden="true" tabindex="-1"></a>pv_df <span class="ot">&lt;-</span> pv_df <span class="sc">%&gt;%</span></span>
<span id="cb23-19"><a href="housing-instability.html#cb23-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">city =</span> <span class="fu">recode</span>(NAME,</span>
<span id="cb23-20"><a href="housing-instability.html#cb23-20" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Davidson County, Tennessee</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Nashville&quot;</span>,</span>
<span id="cb23-21"><a href="housing-instability.html#cb23-21" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Douglas County, Nebraska</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Omaha&quot;</span>,</span>
<span id="cb23-22"><a href="housing-instability.html#cb23-22" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Franklin County, Ohio</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Columbus&quot;</span>,</span>
<span id="cb23-23"><a href="housing-instability.html#cb23-23" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Greenville County, South Carolina</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Greenville&quot;</span>,</span>
<span id="cb23-24"><a href="housing-instability.html#cb23-24" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Guilford County, North Carolina</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Greensboro&quot;</span>,</span>
<span id="cb23-25"><a href="housing-instability.html#cb23-25" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Hamilton County, Ohio</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Cincinnati&quot;</span>,</span>
<span id="cb23-26"><a href="housing-instability.html#cb23-26" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Jackson County, Missouri</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Kansas City&quot;</span>,</span>
<span id="cb23-27"><a href="housing-instability.html#cb23-27" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Jefferson County, Alabama</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Birmingham&quot;</span>,</span>
<span id="cb23-28"><a href="housing-instability.html#cb23-28" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Jefferson County, Kentucky</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Louisville&quot;</span>,</span>
<span id="cb23-29"><a href="housing-instability.html#cb23-29" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Kent County, Michigan</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Grand Rapids&quot;</span>,</span>
<span id="cb23-30"><a href="housing-instability.html#cb23-30" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Knox County, Tennessee</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Knoxville&quot;</span>,</span>
<span id="cb23-31"><a href="housing-instability.html#cb23-31" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Marion County, Indiana</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Indianapolis&quot;</span>,</span>
<span id="cb23-32"><a href="housing-instability.html#cb23-32" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Mecklenburg County, North Carolina</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Charlotte&quot;</span>,</span>
<span id="cb23-33"><a href="housing-instability.html#cb23-33" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Oklahoma County, Oklahoma</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Oklahoma City&quot;</span>,</span>
<span id="cb23-34"><a href="housing-instability.html#cb23-34" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Shelby County, Tennessee</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Memphis&quot;</span>,</span>
<span id="cb23-35"><a href="housing-instability.html#cb23-35" aria-hidden="true" tabindex="-1"></a>                       <span class="st">`</span><span class="at">Tulsa County, Oklahoma</span><span class="st">`</span> <span class="ot">=</span> <span class="st">&quot;Tulsa&quot;</span>),</span>
<span id="cb23-36"><a href="housing-instability.html#cb23-36" aria-hidden="true" tabindex="-1"></a>         <span class="at">perc_poverty_12mnth =</span> <span class="dv">100</span> <span class="sc">*</span> perc_poverty_12mnth) </span>
<span id="cb23-37"><a href="housing-instability.html#cb23-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-38"><a href="housing-instability.html#cb23-38" aria-hidden="true" tabindex="-1"></a>plt_pv <span class="ot">&lt;-</span> <span class="fu">ranking</span>(pv_df, <span class="st">&quot;perc_poverty_12mnth&quot;</span>, <span class="at">text_size =</span> <span class="dv">2</span>, <span class="at">order =</span> <span class="st">&quot;ascending&quot;</span>,</span>
<span id="cb23-39"><a href="housing-instability.html#cb23-39" aria-hidden="true" tabindex="-1"></a>                             <span class="at">plot_title =</span> <span class="st">&quot;Poverty&quot;</span>)</span>
<span id="cb23-40"><a href="housing-instability.html#cb23-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-41"><a href="housing-instability.html#cb23-41" aria-hidden="true" tabindex="-1"></a>plt_pv</span></code></pre></div>
<p><img src="urban_index_files/figure-html/poverty_ranking-1.png" width="672" /></p>
</div>
</div>
</div>
<div id="metro-council-district-maps" class="section level2" number="3.7">
<h2><span class="header-section-number">3.7</span> Metro Council District Maps</h2>
<div class="panelset">
<div id="rental-insecurity-index-1" class="section level3 panel unnumbered">
<h3>Rental Insecurity Index</h3>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="housing-instability.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in cross walk</span></span>
<span id="cb24-2"><a href="housing-instability.html#cb24-2" aria-hidden="true" tabindex="-1"></a>tract_to_district <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;housing_data/district_tract_crosswalk.csv&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-3"><a href="housing-instability.html#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tract =</span> <span class="fu">as.character</span>(tract))</span>
<span id="cb24-4"><a href="housing-instability.html#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-5"><a href="housing-instability.html#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Join to data</span></span>
<span id="cb24-6"><a href="housing-instability.html#cb24-6" aria-hidden="true" tabindex="-1"></a>district_level <span class="ot">&lt;-</span> df_index <span class="sc">%&gt;%</span></span>
<span id="cb24-7"><a href="housing-instability.html#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">tract =</span> GEOID) <span class="sc">%&gt;%</span></span>
<span id="cb24-8"><a href="housing-instability.html#cb24-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Remove airport to avoid dividing by zero</span></span>
<span id="cb24-9"><a href="housing-instability.html#cb24-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(tract<span class="sc">!=</span> <span class="st">&quot;21111980100&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-10"><a href="housing-instability.html#cb24-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># join crosswalk data to dataframe</span></span>
<span id="cb24-11"><a href="housing-instability.html#cb24-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(tract_to_district, <span class="at">by =</span> <span class="st">&quot;tract&quot;</span>) <span class="sc">%&gt;%</span>   </span>
<span id="cb24-12"><a href="housing-instability.html#cb24-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Group by district</span></span>
<span id="cb24-13"><a href="housing-instability.html#cb24-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(district) <span class="sc">%&gt;%</span></span>
<span id="cb24-14"><a href="housing-instability.html#cb24-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># join crosswalk data to dataframe</span></span>
<span id="cb24-15"><a href="housing-instability.html#cb24-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span><span class="fu">sum</span>(. <span class="sc">*</span> total)), <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span>)</span>
<span id="cb24-16"><a href="housing-instability.html#cb24-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-17"><a href="housing-instability.html#cb24-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Shape files</span></span>
<span id="cb24-18"><a href="housing-instability.html#cb24-18" aria-hidden="true" tabindex="-1"></a>metro_shp <span class="ot">&lt;-</span> <span class="fu">readOGR</span>(<span class="st">&quot;housing_data/Council_Districts&quot;</span>, <span class="at">layer =</span> <span class="st">&quot;council_districts&quot;</span>,</span>
<span id="cb24-19"><a href="housing-instability.html#cb24-19" aria-hidden="true" tabindex="-1"></a>                     <span class="at">GDAL1_integer64_policy =</span> <span class="cn">TRUE</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb24-20"><a href="housing-instability.html#cb24-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-21"><a href="housing-instability.html#cb24-21" aria-hidden="true" tabindex="-1"></a>metro_sf <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(metro_shp) <span class="sc">%&gt;%</span></span>
<span id="cb24-22"><a href="housing-instability.html#cb24-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">district =</span> coundist)</span>
<span id="cb24-23"><a href="housing-instability.html#cb24-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-24"><a href="housing-instability.html#cb24-24" aria-hidden="true" tabindex="-1"></a>metro_sf <span class="ot">&lt;-</span> <span class="fu">full_join</span>(metro_sf, district_level, <span class="at">by =</span> <span class="st">&quot;district&quot;</span>)</span>
<span id="cb24-25"><a href="housing-instability.html#cb24-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-26"><a href="housing-instability.html#cb24-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Transform the percents</span></span>
<span id="cb24-27"><a href="housing-instability.html#cb24-27" aria-hidden="true" tabindex="-1"></a>mult100 <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb24-28"><a href="housing-instability.html#cb24-28" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> x <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb24-29"><a href="housing-instability.html#cb24-29" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb24-30"><a href="housing-instability.html#cb24-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-31"><a href="housing-instability.html#cb24-31" aria-hidden="true" tabindex="-1"></a>metro_sf <span class="ot">&lt;-</span> metro_sf <span class="sc">%&gt;%</span></span>
<span id="cb24-32"><a href="housing-instability.html#cb24-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">&quot;perc_&quot;</span>), mult100))</span>
<span id="cb24-33"><a href="housing-instability.html#cb24-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-34"><a href="housing-instability.html#cb24-34" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;housing_data/district_label_points.RData&quot;</span>)</span>
<span id="cb24-35"><a href="housing-instability.html#cb24-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-36"><a href="housing-instability.html#cb24-36" aria-hidden="true" tabindex="-1"></a>district_label_points <span class="sc">%&lt;&gt;%</span></span>
<span id="cb24-37"><a href="housing-instability.html#cb24-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb24-38"><a href="housing-instability.html#cb24-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fu">unname</span>(<span class="fu">st_coordinates</span>(.)[,<span class="dv">1</span>]),</span>
<span id="cb24-39"><a href="housing-instability.html#cb24-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">unname</span>(<span class="fu">st_coordinates</span>(.)[,<span class="dv">2</span>]))</span>
<span id="cb24-40"><a href="housing-instability.html#cb24-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-41"><a href="housing-instability.html#cb24-41" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(<span class="fu">st_drop_geometry</span>(metro_sf), <span class="st">&quot;metro_data.csv&quot;</span>)</span>
<span id="cb24-42"><a href="housing-instability.html#cb24-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-43"><a href="housing-instability.html#cb24-43" aria-hidden="true" tabindex="-1"></a>metro_map <span class="ot">&lt;-</span> <span class="cf">function</span>(indicator, <span class="at">title =</span> <span class="st">&quot;&quot;</span>, <span class="at">legend =</span> <span class="st">&quot;&quot;</span>, <span class="at">caption =</span> <span class="st">&quot;&quot;</span>, <span class="at">no_legend =</span> <span class="cn">FALSE</span>){</span>
<span id="cb24-44"><a href="housing-instability.html#cb24-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-45"><a href="housing-instability.html#cb24-45" aria-hidden="true" tabindex="-1"></a>  plt <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(metro_sf) <span class="sc">+</span> </span>
<span id="cb24-46"><a href="housing-instability.html#cb24-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill=</span>{{ indicator }} )) <span class="sc">+</span></span>
<span id="cb24-47"><a href="housing-instability.html#cb24-47" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Add District labels </span></span>
<span id="cb24-48"><a href="housing-instability.html#cb24-48" aria-hidden="true" tabindex="-1"></a>    shadowtext<span class="sc">::</span><span class="fu">geom_shadowtext</span>(<span class="at">data =</span> district_label_points,</span>
<span id="cb24-49"><a href="housing-instability.html#cb24-49" aria-hidden="true" tabindex="-1"></a>                                <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y=</span>y, <span class="at">label =</span> district),</span>
<span id="cb24-50"><a href="housing-instability.html#cb24-50" aria-hidden="true" tabindex="-1"></a>                                <span class="at">family =</span> <span class="st">&quot;Montserrat Bold&quot;</span>, <span class="at">size =</span> <span class="dv">8</span>,</span>
<span id="cb24-51"><a href="housing-instability.html#cb24-51" aria-hidden="true" tabindex="-1"></a>                                <span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">bg.color=</span><span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb24-52"><a href="housing-instability.html#cb24-52" aria-hidden="true" tabindex="-1"></a>    <span class="co">#geom_sf(data = district_label_points, aes(color =district)) +</span></span>
<span id="cb24-53"><a href="housing-instability.html#cb24-53" aria-hidden="true" tabindex="-1"></a>    <span class="co">#geom_sf_text(aes(label = district), color = &quot;white&quot;) +</span></span>
<span id="cb24-54"><a href="housing-instability.html#cb24-54" aria-hidden="true" tabindex="-1"></a>    <span class="co">#geom_sf_text(aes(label = district), size = 6, color = &quot;#ffffff&quot;,</span></span>
<span id="cb24-55"><a href="housing-instability.html#cb24-55" aria-hidden="true" tabindex="-1"></a>    <span class="co">#             fun.geometry = function(x) st_buffer(x, dist = buffers, singleSide = T) %&gt;% st_point_on_surface()) +</span></span>
<span id="cb24-56"><a href="housing-instability.html#cb24-56" aria-hidden="true" tabindex="-1"></a>    <span class="co"># scale_fill_gradient(low = &quot;#323844&quot;, high = &quot;#d63631&quot;, name = legend) +</span></span>
<span id="cb24-57"><a href="housing-instability.html#cb24-57" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_viridis</span>(<span class="at">na.value =</span> <span class="st">&quot;grey&quot;</span>, <span class="at">name =</span> legend) <span class="sc">+</span></span>
<span id="cb24-58"><a href="housing-instability.html#cb24-58" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">22</span>, <span class="at">base_family =</span> <span class="st">&quot;Montserrat&quot;</span>) <span class="sc">+</span></span>
<span id="cb24-59"><a href="housing-instability.html#cb24-59" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">lineheight =</span> .<span class="dv">5</span>)) <span class="sc">+</span></span>
<span id="cb24-60"><a href="housing-instability.html#cb24-60" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb24-61"><a href="housing-instability.html#cb24-61" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb24-62"><a href="housing-instability.html#cb24-62" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb24-63"><a href="housing-instability.html#cb24-63" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb24-64"><a href="housing-instability.html#cb24-64" aria-hidden="true" tabindex="-1"></a>          <span class="at">panel.border =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb24-65"><a href="housing-instability.html#cb24-65" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> title,</span>
<span id="cb24-66"><a href="housing-instability.html#cb24-66" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> caption)</span>
<span id="cb24-67"><a href="housing-instability.html#cb24-67" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-68"><a href="housing-instability.html#cb24-68" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (no_legend <span class="sc">==</span> <span class="cn">TRUE</span>){</span>
<span id="cb24-69"><a href="housing-instability.html#cb24-69" aria-hidden="true" tabindex="-1"></a>    plt <span class="ot">&lt;-</span> plt <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span>
<span id="cb24-70"><a href="housing-instability.html#cb24-70" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb24-71"><a href="housing-instability.html#cb24-71" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-72"><a href="housing-instability.html#cb24-72" aria-hidden="true" tabindex="-1"></a>  plt <span class="ot">&lt;-</span> plt <span class="sc">+</span></span>
<span id="cb24-73"><a href="housing-instability.html#cb24-73" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb24-74"><a href="housing-instability.html#cb24-74" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>), <span class="co"># bg of the panel</span></span>
<span id="cb24-75"><a href="housing-instability.html#cb24-75" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>), <span class="co"># bg of the plot</span></span>
<span id="cb24-76"><a href="housing-instability.html#cb24-76" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="st">&quot;transparent&quot;</span>), <span class="co"># get rid of legend bg</span></span>
<span id="cb24-77"><a href="housing-instability.html#cb24-77" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.box.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="st">&quot;transparent&quot;</span>), <span class="co"># get rid of legend panel bg</span></span>
<span id="cb24-78"><a href="housing-instability.html#cb24-78" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>,<span class="at">colour =</span> <span class="cn">NA</span>))</span>
<span id="cb24-79"><a href="housing-instability.html#cb24-79" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-80"><a href="housing-instability.html#cb24-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(plt)</span>
<span id="cb24-81"><a href="housing-instability.html#cb24-81" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb24-82"><a href="housing-instability.html#cb24-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-83"><a href="housing-instability.html#cb24-83" aria-hidden="true" tabindex="-1"></a><span class="fu">metro_map</span>(overall_index, <span class="at">title =</span> <span class="st">&quot;Rental Insecurity Index&quot;</span>, </span>
<span id="cb24-84"><a href="housing-instability.html#cb24-84" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Compared to </span><span class="sc">\n</span><span class="st"> other tracts&quot;</span>, </span>
<span id="cb24-85"><a href="housing-instability.html#cb24-85" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Lighter shades indicate higher rental insecurity. </span><span class="sc">\n</span><span class="st"> This is the Urban Institute&#39;s Emergency Rental Assistance Priority Index modified </span><span class="sc">\n</span><span class="st">to compare Louisville to its peer cities (instead of to other areas in Kentucky). </span><span class="sc">\n</span><span class="st"> Greyed out areas had insufficient data for the index&quot;</span>,</span>
<span id="cb24-86"><a href="housing-instability.html#cb24-86" aria-hidden="true" tabindex="-1"></a>         <span class="at">no_legend =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/rental_insecurity_index_council-1.png" width="672" /></p>
</div>
<div id="housing-instability-subindex-1" class="section level3 panel unnumbered">
<h3>Housing Instability Subindex</h3>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="housing-instability.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">metro_map</span>(housing_instability_index, <span class="at">title =</span> <span class="st">&quot;Housing Instability Subindex&quot;</span>, </span>
<span id="cb25-2"><a href="housing-instability.html#cb25-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Compared to </span><span class="sc">\n</span><span class="st"> other tracts&quot;</span>, </span>
<span id="cb25-3"><a href="housing-instability.html#cb25-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Lighter shades indicate higher housing instability. </span><span class="sc">\n</span><span class="st"> This is the Urban Institute&#39;s Housing Instability subindex modified </span><span class="sc">\n</span><span class="st">to compare Louisville to its peer cities (instead of to other areas in Kentucky). </span><span class="sc">\n</span><span class="st"> Greyed out areas had insufficient data for the index&quot;</span>,</span>
<span id="cb25-4"><a href="housing-instability.html#cb25-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">no_legend =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/housing_instability_subindex_council-1.png" width="672" /></p>
</div>
<div id="covid-19-impact-subindex-1" class="section level3 panel unnumbered">
<h3>Covid 19 Impact Subindex</h3>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="housing-instability.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">metro_map</span>(covid_index, <span class="at">title =</span> <span class="st">&quot;Covid Instability Subindex&quot;</span>, </span>
<span id="cb26-2"><a href="housing-instability.html#cb26-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Compared to </span><span class="sc">\n</span><span class="st"> other tracts&quot;</span>, </span>
<span id="cb26-3"><a href="housing-instability.html#cb26-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Lighter shades indicate higher covid instability. </span><span class="sc">\n</span><span class="st"> This is the Urban Institute&#39;s Covid Instability subindex modified </span><span class="sc">\n</span><span class="st">to compare Louisville to its peer cities (instead of to other areas in Kentucky). </span><span class="sc">\n</span><span class="st"> Greyed out areas had insufficient data for the index&quot;</span>,</span>
<span id="cb26-4"><a href="housing-instability.html#cb26-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">no_legend =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/covid_19_impact_subindex_council-1.png" width="672" /></p>
</div>
<div id="equity-subindex-1" class="section level3 panel unnumbered">
<h3>Equity Subindex</h3>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="housing-instability.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">metro_map</span>(equity_index, <span class="at">title =</span> <span class="st">&quot;Equity Subindex&quot;</span>, </span>
<span id="cb27-2"><a href="housing-instability.html#cb27-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Compared to </span><span class="sc">\n</span><span class="st"> other tracts&quot;</span>, </span>
<span id="cb27-3"><a href="housing-instability.html#cb27-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Lighter shades indicate higher prioritization based on equity. </span><span class="sc">\n</span><span class="st"> This is the Urban Institute&#39;s Equity subindex modified </span><span class="sc">\n</span><span class="st">to compare Louisville to its peer cities (instead of to other areas in Kentucky). </span><span class="sc">\n</span><span class="st"> Greyed out areas had insufficient data for the index&quot;</span>,</span>
<span id="cb27-4"><a href="housing-instability.html#cb27-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">no_legend =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/equity_subindex_council-1.png" width="672" /></p>
</div>
<div id="poverty-3" class="section level3 panel unnumbered">
<h3>Poverty</h3>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="housing-instability.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">metro_map</span>(perc_poverty_12mnth, <span class="at">title =</span> <span class="st">&quot;Poverty&quot;</span>, </span>
<span id="cb28-2"><a href="housing-instability.html#cb28-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Percent&quot;</span>, </span>
<span id="cb28-3"><a href="housing-instability.html#cb28-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Percent of each census tract that is in poverty. </span><span class="sc">\n</span><span class="st"> Data from Urban Institute.&quot;</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/poverty_council-1.png" width="672" /></p>
</div>
<div id="percent-renting-1" class="section level3 panel unnumbered">
<h3>Percent Renting</h3>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="housing-instability.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">metro_map</span>(perc_renters, <span class="at">title =</span> <span class="st">&quot;Percent of Renter Occupied Housing Units&quot;</span>, </span>
<span id="cb29-2"><a href="housing-instability.html#cb29-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Percent&quot;</span>, </span>
<span id="cb29-3"><a href="housing-instability.html#cb29-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Percent of each tract that rents. </span><span class="sc">\n</span><span class="st"> Data from Urban Institute&quot;</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/renting_council-1.png" width="672" /></p>
</div>
<div id="cost-burdened-housholds-1" class="section level3 panel unnumbered">
<h3>Cost-burdened housholds</h3>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="housing-instability.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">metro_map</span>(perc_cost_burdened_under_35k, <span class="at">title =</span> <span class="st">&quot;Costburdened Households making under 35k&quot;</span>, </span>
<span id="cb30-2"><a href="housing-instability.html#cb30-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Percent&quot;</span>, </span>
<span id="cb30-3"><a href="housing-instability.html#cb30-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Percent of households making less than 35,000 and paying more than 50% of their income in rent. </span><span class="sc">\n</span><span class="st"> Data from Urban Institute&quot;</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/cost_burdened_council-1.png" width="672" /></p>
</div>
<div id="overcrowding-2" class="section level3 panel unnumbered">
<h3>Overcrowding</h3>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="housing-instability.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">metro_map</span>(perc_overcrowding_renter_1<span class="fl">.50</span>_or_more, <span class="at">title =</span> <span class="st">&quot;Overcrowding in Rental Housing&quot;</span>, </span>
<span id="cb31-2"><a href="housing-instability.html#cb31-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Percent&quot;</span>, </span>
<span id="cb31-3"><a href="housing-instability.html#cb31-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Percent of households renting and with more than 1.5 people per room. </span><span class="sc">\n</span><span class="st"> Data from Urban Institute&quot;</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/overcrowding_council-1.png" width="672" /></p>
</div>
<div id="unemployed-1" class="section level3 panel unnumbered">
<h3>Unemployed</h3>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="housing-instability.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">metro_map</span>(perc_unemployed_laborforce, <span class="at">title =</span> <span class="st">&quot;Unemployment&quot;</span>, </span>
<span id="cb32-2"><a href="housing-instability.html#cb32-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Percent&quot;</span>, </span>
<span id="cb32-3"><a href="housing-instability.html#cb32-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Percent of people unemployed but still in the labor force (actively seeking work). </span><span class="sc">\n</span><span class="st"> Data from Urban Institute&quot;</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/unemployed_council-1.png" width="672" /></p>
</div>
<div id="no-health-insurance-1" class="section level3 panel unnumbered">
<h3>No Health Insurance</h3>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="housing-instability.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">metro_map</span>(perc_no_hinsure, <span class="at">title =</span> <span class="st">&quot;No Health Insurance&quot;</span>, </span>
<span id="cb33-2"><a href="housing-instability.html#cb33-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Percent&quot;</span>, </span>
<span id="cb33-3"><a href="housing-instability.html#cb33-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Percent without health insurance. </span><span class="sc">\n</span><span class="st"> Data from Urban Institute&quot;</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/no_health_insurance_council-1.png" width="672" /></p>
</div>
<div id="low-income-jobs-lost-to-covid-1" class="section level3 panel unnumbered">
<h3>Low Income Jobs Lost to Covid</h3>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="housing-instability.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">metro_map</span>(perc_low_income_jobs_lost, <span class="at">title =</span> <span class="st">&quot;Low Income Jobs Lost to Covid&quot;</span>, </span>
<span id="cb34-2"><a href="housing-instability.html#cb34-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Percent&quot;</span>, </span>
<span id="cb34-3"><a href="housing-instability.html#cb34-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Estimate from the Urban Institute based on job categories in the each tract. </span><span class="sc">\n</span><span class="st"> Data from Urban Institute&quot;</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/low_income_job_loss_council-1.png" width="672" /></p>
</div>
<div id="percent-poc-1" class="section level3 panel unnumbered">
<h3>Percent PoC</h3>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="housing-instability.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">metro_map</span>(perc_person_of_color, <span class="at">title =</span> <span class="st">&quot;Percent Persons of Color&quot;</span>, </span>
<span id="cb35-2"><a href="housing-instability.html#cb35-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Percent&quot;</span>, </span>
<span id="cb35-3"><a href="housing-instability.html#cb35-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Percent of persons in the area who identify as persons of color. </span><span class="sc">\n</span><span class="st"> Data from Urban Institute&quot;</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/people_of_color_council-1.png" width="672" /></p>
</div>
<div id="extremely-low-income-1" class="section level3 panel unnumbered">
<h3>Extremely Low Income</h3>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="housing-instability.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">metro_map</span>(perc_30hamfi, <span class="at">title =</span> <span class="st">&quot;Extremely Low Income&quot;</span>, </span>
<span id="cb36-2"><a href="housing-instability.html#cb36-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Percent&quot;</span>, </span>
<span id="cb36-3"><a href="housing-instability.html#cb36-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Renter occupied household making less than 30 percent of area median income. </span><span class="sc">\n</span><span class="st"> Data from Urban Institute&quot;</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/extremely_low_income_council-1.png" width="672" /></p>
</div>
<div id="public-assistance-1" class="section level3 panel unnumbered">
<h3>Public Assistance</h3>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="housing-instability.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">metro_map</span>(perc_public_assistance, <span class="at">title =</span> <span class="st">&quot;Recieving Public Assistance&quot;</span>, </span>
<span id="cb37-2"><a href="housing-instability.html#cb37-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Percent&quot;</span>, </span>
<span id="cb37-3"><a href="housing-instability.html#cb37-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Percent receiving some form of public assistance like SNAP or TANF. </span><span class="sc">\n</span><span class="st"> Data from Urban Institute&quot;</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/public_assistance_council-1.png" width="672" /></p>
</div>
<div id="foreign-born-1" class="section level3 panel unnumbered">
<h3>Foreign Born</h3>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="housing-instability.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">metro_map</span>(perc_foreign_born, <span class="at">title =</span> <span class="st">&quot;Foreign Born&quot;</span>, </span>
<span id="cb38-2"><a href="housing-instability.html#cb38-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Percent&quot;</span>, </span>
<span id="cb38-3"><a href="housing-instability.html#cb38-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Percent born outside the U.S. </span><span class="sc">\n</span><span class="st"> Data from Urban Institute&quot;</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/foreign_born_council-1.png" width="672" /></p>
</div>
</div>
</div>
<div id="metro-council-tables" class="section level2" number="3.8">
<h2><span class="header-section-number">3.8</span> Metro Council Tables</h2>
<div class="panelset">
<div id="housing-subindex" class="section level3 panel unnumbered">
<h3>Housing Subindex</h3>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="housing-instability.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb39-2"><a href="housing-instability.html#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="housing-instability.html#cb39-3" aria-hidden="true" tabindex="-1"></a>metro_house_tbl <span class="ot">&lt;-</span> metro_sf <span class="sc">%&gt;%</span></span>
<span id="cb39-4"><a href="housing-instability.html#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb39-5"><a href="housing-instability.html#cb39-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(district)) <span class="sc">%&gt;%</span></span>
<span id="cb39-6"><a href="housing-instability.html#cb39-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(district, perc_cost_burdened_under_35k, perc_renters, perc_poverty_12mnth, perc_unemployed_laborforce, perc_overcrowding_renter_1<span class="fl">.50</span>_or_more, housing_instability_index) <span class="sc">%&gt;%</span></span>
<span id="cb39-7"><a href="housing-instability.html#cb39-7" aria-hidden="true" tabindex="-1"></a>  <span class="co">#GT fmt_percent expects percents as decimals</span></span>
<span id="cb39-8"><a href="housing-instability.html#cb39-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">&quot;perc&quot;</span>), <span class="sc">~</span> .<span class="sc">/</span><span class="dv">100</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb39-9"><a href="housing-instability.html#cb39-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb39-10"><a href="housing-instability.html#cb39-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">&quot;Table 1: Housing Indicators&quot;</span>,</span>
<span id="cb39-11"><a href="housing-instability.html#cb39-11" aria-hidden="true" tabindex="-1"></a>             <span class="at">subtitle =</span> <span class="st">&quot;Components of the Housing Instability Subindex&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-12"><a href="housing-instability.html#cb39-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="at">columns =</span> <span class="fu">vars</span>(housing_instability_index),</span>
<span id="cb39-13"><a href="housing-instability.html#cb39-13" aria-hidden="true" tabindex="-1"></a>             <span class="at">n_sigfig =</span> <span class="dv">2</span>,</span>
<span id="cb39-14"><a href="housing-instability.html#cb39-14" aria-hidden="true" tabindex="-1"></a>             <span class="at">suffixing =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-15"><a href="housing-instability.html#cb39-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_percent</span>(<span class="at">columns =</span> <span class="fu">vars</span>(perc_cost_burdened_under_35k, perc_renters, perc_poverty_12mnth, perc_unemployed_laborforce, perc_overcrowding_renter_1<span class="fl">.50</span>_or_more),</span>
<span id="cb39-16"><a href="housing-instability.html#cb39-16" aria-hidden="true" tabindex="-1"></a>              <span class="at">decimals =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-17"><a href="housing-instability.html#cb39-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(<span class="at">district =</span> <span class="st">&quot;Metro District&quot;</span>,</span>
<span id="cb39-18"><a href="housing-instability.html#cb39-18" aria-hidden="true" tabindex="-1"></a>             <span class="at">perc_cost_burdened_under_35k =</span> <span class="st">&quot;Cost Burdened&quot;</span>,</span>
<span id="cb39-19"><a href="housing-instability.html#cb39-19" aria-hidden="true" tabindex="-1"></a>             <span class="at">perc_renters =</span> <span class="st">&quot;Renting&quot;</span>, </span>
<span id="cb39-20"><a href="housing-instability.html#cb39-20" aria-hidden="true" tabindex="-1"></a>             <span class="at">perc_poverty_12mnth =</span> <span class="st">&quot;Poverty&quot;</span>, </span>
<span id="cb39-21"><a href="housing-instability.html#cb39-21" aria-hidden="true" tabindex="-1"></a>             <span class="at">perc_unemployed_laborforce =</span> <span class="st">&quot;Unemployed&quot;</span>, </span>
<span id="cb39-22"><a href="housing-instability.html#cb39-22" aria-hidden="true" tabindex="-1"></a>             <span class="at">perc_overcrowding_renter_1.50_or_more =</span> <span class="st">&quot;Overcrowding&quot;</span>,</span>
<span id="cb39-23"><a href="housing-instability.html#cb39-23" aria-hidden="true" tabindex="-1"></a>             <span class="at">housing_instability_index =</span> <span class="st">&quot;Index&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-24"><a href="housing-instability.html#cb39-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_move</span>(<span class="at">columns =</span> <span class="fu">vars</span>(perc_cost_burdened_under_35k, perc_renters, perc_poverty_12mnth, perc_unemployed_laborforce, perc_overcrowding_renter_1<span class="fl">.50</span>_or_more, housing_instability_index),</span>
<span id="cb39-25"><a href="housing-instability.html#cb39-25" aria-hidden="true" tabindex="-1"></a>            <span class="at">after =</span> <span class="fu">vars</span>(district)) <span class="sc">%&gt;%</span></span>
<span id="cb39-26"><a href="housing-instability.html#cb39-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb39-27"><a href="housing-instability.html#cb39-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">&quot;Index&quot;</span>,</span>
<span id="cb39-28"><a href="housing-instability.html#cb39-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">vars</span>(housing_instability_index)</span>
<span id="cb39-29"><a href="housing-instability.html#cb39-29" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb39-30"><a href="housing-instability.html#cb39-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb39-31"><a href="housing-instability.html#cb39-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">&quot;Percent&quot;</span>,</span>
<span id="cb39-32"><a href="housing-instability.html#cb39-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">vars</span>(perc_cost_burdened_under_35k, perc_renters, perc_poverty_12mnth, perc_unemployed_laborforce, perc_overcrowding_renter_1<span class="fl">.50</span>_or_more)</span>
<span id="cb39-33"><a href="housing-instability.html#cb39-33" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb39-34"><a href="housing-instability.html#cb39-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(<span class="at">align =</span> <span class="st">&quot;center&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-35"><a href="housing-instability.html#cb39-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_source_note</span>(</span>
<span id="cb39-36"><a href="housing-instability.html#cb39-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">source_note =</span> <span class="fu">md</span>(<span class="st">&quot;Greater Louisville Project&quot;</span>)</span>
<span id="cb39-37"><a href="housing-instability.html#cb39-37" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb39-38"><a href="housing-instability.html#cb39-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_source_note</span>(</span>
<span id="cb39-39"><a href="housing-instability.html#cb39-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">source_note =</span> <span class="fu">md</span>(<span class="st">&quot;Metro Council Districts are estimated from tract level data. Data is from the Urban Institute.&quot;</span>)</span>
<span id="cb39-40"><a href="housing-instability.html#cb39-40" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb39-41"><a href="housing-instability.html#cb39-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">opt_row_striping</span>(<span class="at">row_striping =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-42"><a href="housing-instability.html#cb39-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">opt_table_outline</span>() <span class="sc">%&gt;%</span></span>
<span id="cb39-43"><a href="housing-instability.html#cb39-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(</span>
<span id="cb39-44"><a href="housing-instability.html#cb39-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.font.size =</span> <span class="fu">px</span>(<span class="dv">12</span>),</span>
<span id="cb39-45"><a href="housing-instability.html#cb39-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.width =</span> <span class="fu">pct</span>(<span class="dv">50</span>)</span>
<span id="cb39-46"><a href="housing-instability.html#cb39-46" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb39-47"><a href="housing-instability.html#cb39-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-48"><a href="housing-instability.html#cb39-48" aria-hidden="true" tabindex="-1"></a>metro_house_tbl</span></code></pre></div>
<div id="zxfgnhqnxf" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#zxfgnhqnxf .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 12px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 50%;
  border-top-style: solid;
  border-top-width: 3px;
  border-top-color: #D3D3D3;
  border-right-style: solid;
  border-right-width: 3px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 3px;
  border-bottom-color: #D3D3D3;
  border-left-style: solid;
  border-left-width: 3px;
  border-left-color: #D3D3D3;
}

#zxfgnhqnxf .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zxfgnhqnxf .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#zxfgnhqnxf .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#zxfgnhqnxf .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zxfgnhqnxf .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zxfgnhqnxf .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#zxfgnhqnxf .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#zxfgnhqnxf .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#zxfgnhqnxf .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#zxfgnhqnxf .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#zxfgnhqnxf .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#zxfgnhqnxf .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#zxfgnhqnxf .gt_from_md > :first-child {
  margin-top: 0;
}

#zxfgnhqnxf .gt_from_md > :last-child {
  margin-bottom: 0;
}

#zxfgnhqnxf .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#zxfgnhqnxf .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#zxfgnhqnxf .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zxfgnhqnxf .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#zxfgnhqnxf .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zxfgnhqnxf .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#zxfgnhqnxf .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#zxfgnhqnxf .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zxfgnhqnxf .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zxfgnhqnxf .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#zxfgnhqnxf .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zxfgnhqnxf .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#zxfgnhqnxf .gt_left {
  text-align: left;
}

#zxfgnhqnxf .gt_center {
  text-align: center;
}

#zxfgnhqnxf .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#zxfgnhqnxf .gt_font_normal {
  font-weight: normal;
}

#zxfgnhqnxf .gt_font_bold {
  font-weight: bold;
}

#zxfgnhqnxf .gt_font_italic {
  font-style: italic;
}

#zxfgnhqnxf .gt_super {
  font-size: 65%;
}

#zxfgnhqnxf .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  <thead class="gt_header">
    <tr>
      <th colspan="7" class="gt_heading gt_title gt_font_normal" style>Table 1: Housing Indicators</th>
    </tr>
    <tr>
      <th colspan="7" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>Components of the Housing Instability Subindex</th>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1">Metro District</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="5">
        <span class="gt_column_spanner">Percent</span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="1">
        <span class="gt_column_spanner">Index</span>
      </th>
    </tr>
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Cost Burdened</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Renting</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Poverty</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Unemployed</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Overcrowding</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Index</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">47&percnt;</td>
<td class="gt_row gt_center">45&percnt;</td>
<td class="gt_row gt_center">24&percnt;</td>
<td class="gt_row gt_center">12&percnt;</td>
<td class="gt_row gt_center">0&percnt;</td>
<td class="gt_row gt_center">0.22</td></tr>
    <tr><td class="gt_row gt_center gt_striped">2</td>
<td class="gt_row gt_center gt_striped">51&percnt;</td>
<td class="gt_row gt_center gt_striped">50&percnt;</td>
<td class="gt_row gt_center gt_striped">20&percnt;</td>
<td class="gt_row gt_center gt_striped">8&percnt;</td>
<td class="gt_row gt_center gt_striped">3&percnt;</td>
<td class="gt_row gt_center gt_striped">0.33</td></tr>
    <tr><td class="gt_row gt_center">3</td>
<td class="gt_row gt_center">46&percnt;</td>
<td class="gt_row gt_center">47&percnt;</td>
<td class="gt_row gt_center">26&percnt;</td>
<td class="gt_row gt_center">10&percnt;</td>
<td class="gt_row gt_center">1&percnt;</td>
<td class="gt_row gt_center">0.27</td></tr>
    <tr><td class="gt_row gt_center gt_striped">4</td>
<td class="gt_row gt_center gt_striped">35&percnt;</td>
<td class="gt_row gt_center gt_striped">80&percnt;</td>
<td class="gt_row gt_center gt_striped">43&percnt;</td>
<td class="gt_row gt_center gt_striped">17&percnt;</td>
<td class="gt_row gt_center gt_striped">1&percnt;</td>
<td class="gt_row gt_center gt_striped">0.97</td></tr>
    <tr><td class="gt_row gt_center">5</td>
<td class="gt_row gt_center">47&percnt;</td>
<td class="gt_row gt_center">57&percnt;</td>
<td class="gt_row gt_center">34&percnt;</td>
<td class="gt_row gt_center">17&percnt;</td>
<td class="gt_row gt_center">1&percnt;</td>
<td class="gt_row gt_center">0.73</td></tr>
    <tr><td class="gt_row gt_center gt_striped">6</td>
<td class="gt_row gt_center gt_striped">40&percnt;</td>
<td class="gt_row gt_center gt_striped">77&percnt;</td>
<td class="gt_row gt_center gt_striped">43&percnt;</td>
<td class="gt_row gt_center gt_striped">11&percnt;</td>
<td class="gt_row gt_center gt_striped">1&percnt;</td>
<td class="gt_row gt_center gt_striped">0.75</td></tr>
    <tr><td class="gt_row gt_center">7</td>
<td class="gt_row gt_center">64&percnt;</td>
<td class="gt_row gt_center">27&percnt;</td>
<td class="gt_row gt_center">6&percnt;</td>
<td class="gt_row gt_center">3&percnt;</td>
<td class="gt_row gt_center">0&percnt;</td>
<td class="gt_row gt_center">&minus;0.35</td></tr>
    <tr><td class="gt_row gt_center gt_striped">8</td>
<td class="gt_row gt_center gt_striped">38&percnt;</td>
<td class="gt_row gt_center gt_striped">32&percnt;</td>
<td class="gt_row gt_center gt_striped">9&percnt;</td>
<td class="gt_row gt_center gt_striped">3&percnt;</td>
<td class="gt_row gt_center gt_striped">1&percnt;</td>
<td class="gt_row gt_center gt_striped">&minus;0.46</td></tr>
    <tr><td class="gt_row gt_center">9</td>
<td class="gt_row gt_center">41&percnt;</td>
<td class="gt_row gt_center">42&percnt;</td>
<td class="gt_row gt_center">10&percnt;</td>
<td class="gt_row gt_center">4&percnt;</td>
<td class="gt_row gt_center">0&percnt;</td>
<td class="gt_row gt_center">&minus;0.36</td></tr>
    <tr><td class="gt_row gt_center gt_striped">10</td>
<td class="gt_row gt_center gt_striped">47&percnt;</td>
<td class="gt_row gt_center gt_striped">41&percnt;</td>
<td class="gt_row gt_center gt_striped">15&percnt;</td>
<td class="gt_row gt_center gt_striped">6&percnt;</td>
<td class="gt_row gt_center gt_striped">0&percnt;</td>
<td class="gt_row gt_center gt_striped">&minus;0.15</td></tr>
    <tr><td class="gt_row gt_center">11</td>
<td class="gt_row gt_center">32&percnt;</td>
<td class="gt_row gt_center">29&percnt;</td>
<td class="gt_row gt_center">7&percnt;</td>
<td class="gt_row gt_center">4&percnt;</td>
<td class="gt_row gt_center">1&percnt;</td>
<td class="gt_row gt_center">&minus;0.49</td></tr>
    <tr><td class="gt_row gt_center gt_striped">12</td>
<td class="gt_row gt_center gt_striped">49&percnt;</td>
<td class="gt_row gt_center gt_striped">32&percnt;</td>
<td class="gt_row gt_center gt_striped">12&percnt;</td>
<td class="gt_row gt_center gt_striped">6&percnt;</td>
<td class="gt_row gt_center gt_striped">2&percnt;</td>
<td class="gt_row gt_center gt_striped">&minus;0.16</td></tr>
    <tr><td class="gt_row gt_center">13</td>
<td class="gt_row gt_center">35&percnt;</td>
<td class="gt_row gt_center">39&percnt;</td>
<td class="gt_row gt_center">17&percnt;</td>
<td class="gt_row gt_center">6&percnt;</td>
<td class="gt_row gt_center">1&percnt;</td>
<td class="gt_row gt_center">&minus;0.21</td></tr>
    <tr><td class="gt_row gt_center gt_striped">14</td>
<td class="gt_row gt_center gt_striped">50&percnt;</td>
<td class="gt_row gt_center gt_striped">23&percnt;</td>
<td class="gt_row gt_center gt_striped">16&percnt;</td>
<td class="gt_row gt_center gt_striped">5&percnt;</td>
<td class="gt_row gt_center gt_striped">0&percnt;</td>
<td class="gt_row gt_center gt_striped">&minus;0.32</td></tr>
    <tr><td class="gt_row gt_center">15</td>
<td class="gt_row gt_center">41&percnt;</td>
<td class="gt_row gt_center">55&percnt;</td>
<td class="gt_row gt_center">26&percnt;</td>
<td class="gt_row gt_center">9&percnt;</td>
<td class="gt_row gt_center">1&percnt;</td>
<td class="gt_row gt_center">0.28</td></tr>
    <tr><td class="gt_row gt_center gt_striped">16</td>
<td class="gt_row gt_center gt_striped">66&percnt;</td>
<td class="gt_row gt_center gt_striped">19&percnt;</td>
<td class="gt_row gt_center gt_striped">5&percnt;</td>
<td class="gt_row gt_center gt_striped">4&percnt;</td>
<td class="gt_row gt_center gt_striped">1&percnt;</td>
<td class="gt_row gt_center gt_striped">&minus;0.32</td></tr>
    <tr><td class="gt_row gt_center">17</td>
<td class="gt_row gt_center">64&percnt;</td>
<td class="gt_row gt_center">26&percnt;</td>
<td class="gt_row gt_center">7&percnt;</td>
<td class="gt_row gt_center">3&percnt;</td>
<td class="gt_row gt_center">1&percnt;</td>
<td class="gt_row gt_center">&minus;0.31</td></tr>
    <tr><td class="gt_row gt_center gt_striped">18</td>
<td class="gt_row gt_center gt_striped">56&percnt;</td>
<td class="gt_row gt_center gt_striped">37&percnt;</td>
<td class="gt_row gt_center gt_striped">5&percnt;</td>
<td class="gt_row gt_center gt_striped">3&percnt;</td>
<td class="gt_row gt_center gt_striped">1&percnt;</td>
<td class="gt_row gt_center gt_striped">&minus;0.29</td></tr>
    <tr><td class="gt_row gt_center">19</td>
<td class="gt_row gt_center">70&percnt;</td>
<td class="gt_row gt_center">21&percnt;</td>
<td class="gt_row gt_center">4&percnt;</td>
<td class="gt_row gt_center">4&percnt;</td>
<td class="gt_row gt_center">1&percnt;</td>
<td class="gt_row gt_center">&minus;0.29</td></tr>
    <tr><td class="gt_row gt_center gt_striped">20</td>
<td class="gt_row gt_center gt_striped">47&percnt;</td>
<td class="gt_row gt_center gt_striped">17&percnt;</td>
<td class="gt_row gt_center gt_striped">4&percnt;</td>
<td class="gt_row gt_center gt_striped">3&percnt;</td>
<td class="gt_row gt_center gt_striped">1&percnt;</td>
<td class="gt_row gt_center gt_striped">&minus;0.57</td></tr>
    <tr><td class="gt_row gt_center">21</td>
<td class="gt_row gt_center">50&percnt;</td>
<td class="gt_row gt_center">49&percnt;</td>
<td class="gt_row gt_center">22&percnt;</td>
<td class="gt_row gt_center">6&percnt;</td>
<td class="gt_row gt_center">1&percnt;</td>
<td class="gt_row gt_center">0.077</td></tr>
    <tr><td class="gt_row gt_center gt_striped">22</td>
<td class="gt_row gt_center gt_striped">36&percnt;</td>
<td class="gt_row gt_center gt_striped">21&percnt;</td>
<td class="gt_row gt_center gt_striped">6&percnt;</td>
<td class="gt_row gt_center gt_striped">3&percnt;</td>
<td class="gt_row gt_center gt_striped">2&percnt;</td>
<td class="gt_row gt_center gt_striped">&minus;0.51</td></tr>
    <tr><td class="gt_row gt_center">23</td>
<td class="gt_row gt_center">41&percnt;</td>
<td class="gt_row gt_center">19&percnt;</td>
<td class="gt_row gt_center">6&percnt;</td>
<td class="gt_row gt_center">4&percnt;</td>
<td class="gt_row gt_center">1&percnt;</td>
<td class="gt_row gt_center">&minus;0.52</td></tr>
    <tr><td class="gt_row gt_center gt_striped">24</td>
<td class="gt_row gt_center gt_striped">48&percnt;</td>
<td class="gt_row gt_center gt_striped">37&percnt;</td>
<td class="gt_row gt_center gt_striped">14&percnt;</td>
<td class="gt_row gt_center gt_striped">5&percnt;</td>
<td class="gt_row gt_center gt_striped">1&percnt;</td>
<td class="gt_row gt_center gt_striped">&minus;0.12</td></tr>
    <tr><td class="gt_row gt_center">25</td>
<td class="gt_row gt_center">34&percnt;</td>
<td class="gt_row gt_center">34&percnt;</td>
<td class="gt_row gt_center">11&percnt;</td>
<td class="gt_row gt_center">5&percnt;</td>
<td class="gt_row gt_center">1&percnt;</td>
<td class="gt_row gt_center">&minus;0.39</td></tr>
    <tr><td class="gt_row gt_center gt_striped">26</td>
<td class="gt_row gt_center gt_striped">52&percnt;</td>
<td class="gt_row gt_center gt_striped">40&percnt;</td>
<td class="gt_row gt_center gt_striped">12&percnt;</td>
<td class="gt_row gt_center gt_striped">4&percnt;</td>
<td class="gt_row gt_center gt_striped">1&percnt;</td>
<td class="gt_row gt_center gt_striped">&minus;0.18</td></tr>
  </tbody>
  <tfoot class="gt_sourcenotes">
    <tr>
      <td class="gt_sourcenote" colspan="7">Greater Louisville Project</td>
    </tr>
    <tr>
      <td class="gt_sourcenote" colspan="7">Metro Council Districts are estimated from tract level data. Data is from the Urban Institute.</td>
    </tr>
  </tfoot>
  
</table>
</div>
</div>
<div id="covid-subindex" class="section level3 panel unnumbered">
<h3>Covid Subindex</h3>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="housing-instability.html#cb40-1" aria-hidden="true" tabindex="-1"></a>metro_covid_tbl <span class="ot">&lt;-</span> metro_sf <span class="sc">%&gt;%</span></span>
<span id="cb40-2"><a href="housing-instability.html#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb40-3"><a href="housing-instability.html#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(district)) <span class="sc">%&gt;%</span></span>
<span id="cb40-4"><a href="housing-instability.html#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(district, perc_no_hinsure, perc_low_income_jobs_lost, covid_index) <span class="sc">%&gt;%</span></span>
<span id="cb40-5"><a href="housing-instability.html#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#GT fmt_percent expects percents as decimals</span></span>
<span id="cb40-6"><a href="housing-instability.html#cb40-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">&quot;perc&quot;</span>), <span class="sc">~</span> .<span class="sc">/</span><span class="dv">100</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb40-7"><a href="housing-instability.html#cb40-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb40-8"><a href="housing-instability.html#cb40-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">&quot;Table 2: Covid Indicators&quot;</span>,</span>
<span id="cb40-9"><a href="housing-instability.html#cb40-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">subtitle =</span> <span class="st">&quot;Components of the Covid Subindex&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb40-10"><a href="housing-instability.html#cb40-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="at">columns =</span> <span class="fu">vars</span>(covid_index),</span>
<span id="cb40-11"><a href="housing-instability.html#cb40-11" aria-hidden="true" tabindex="-1"></a>             <span class="at">n_sigfig =</span> <span class="dv">2</span>,</span>
<span id="cb40-12"><a href="housing-instability.html#cb40-12" aria-hidden="true" tabindex="-1"></a>             <span class="at">suffixing =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb40-13"><a href="housing-instability.html#cb40-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_percent</span>(<span class="at">columns =</span> <span class="fu">vars</span>(perc_no_hinsure, perc_low_income_jobs_lost),</span>
<span id="cb40-14"><a href="housing-instability.html#cb40-14" aria-hidden="true" tabindex="-1"></a>              <span class="at">decimals =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb40-15"><a href="housing-instability.html#cb40-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(<span class="at">district =</span> <span class="st">&quot;Metro District&quot;</span>,</span>
<span id="cb40-16"><a href="housing-instability.html#cb40-16" aria-hidden="true" tabindex="-1"></a>             <span class="at">perc_no_hinsure =</span> <span class="st">&quot;No Health Insurance&quot;</span>, </span>
<span id="cb40-17"><a href="housing-instability.html#cb40-17" aria-hidden="true" tabindex="-1"></a>             <span class="at">perc_low_income_jobs_lost =</span> <span class="st">&quot;Covid Job Loss&quot;</span>, </span>
<span id="cb40-18"><a href="housing-instability.html#cb40-18" aria-hidden="true" tabindex="-1"></a>             <span class="at">covid_index =</span> <span class="st">&quot;Covid Index&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb40-19"><a href="housing-instability.html#cb40-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_move</span>(<span class="at">columns =</span> <span class="fu">vars</span>(perc_no_hinsure, perc_low_income_jobs_lost, covid_index),</span>
<span id="cb40-20"><a href="housing-instability.html#cb40-20" aria-hidden="true" tabindex="-1"></a>            <span class="at">after =</span> <span class="fu">vars</span>(district)) <span class="sc">%&gt;%</span></span>
<span id="cb40-21"><a href="housing-instability.html#cb40-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb40-22"><a href="housing-instability.html#cb40-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">&quot;Index&quot;</span>,</span>
<span id="cb40-23"><a href="housing-instability.html#cb40-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">vars</span>(covid_index)</span>
<span id="cb40-24"><a href="housing-instability.html#cb40-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb40-25"><a href="housing-instability.html#cb40-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb40-26"><a href="housing-instability.html#cb40-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">&quot;Percent&quot;</span>,</span>
<span id="cb40-27"><a href="housing-instability.html#cb40-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">vars</span>(perc_no_hinsure, perc_low_income_jobs_lost)</span>
<span id="cb40-28"><a href="housing-instability.html#cb40-28" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb40-29"><a href="housing-instability.html#cb40-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(<span class="at">align =</span> <span class="st">&quot;center&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb40-30"><a href="housing-instability.html#cb40-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_source_note</span>(</span>
<span id="cb40-31"><a href="housing-instability.html#cb40-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">source_note =</span> <span class="fu">md</span>(<span class="st">&quot;Greater Louisville Project&quot;</span>)</span>
<span id="cb40-32"><a href="housing-instability.html#cb40-32" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb40-33"><a href="housing-instability.html#cb40-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_source_note</span>(</span>
<span id="cb40-34"><a href="housing-instability.html#cb40-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">source_note =</span> <span class="fu">md</span>(<span class="st">&quot;Metro Council Districts are estimated from tract level data. Data is from the Urban Institute.&quot;</span>)</span>
<span id="cb40-35"><a href="housing-instability.html#cb40-35" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb40-36"><a href="housing-instability.html#cb40-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">opt_row_striping</span>(<span class="at">row_striping =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb40-37"><a href="housing-instability.html#cb40-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">opt_table_outline</span>() <span class="sc">%&gt;%</span></span>
<span id="cb40-38"><a href="housing-instability.html#cb40-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(</span>
<span id="cb40-39"><a href="housing-instability.html#cb40-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.font.size =</span> <span class="fu">px</span>(<span class="dv">12</span>),</span>
<span id="cb40-40"><a href="housing-instability.html#cb40-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.width =</span> <span class="fu">pct</span>(<span class="dv">50</span>)</span>
<span id="cb40-41"><a href="housing-instability.html#cb40-41" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb40-42"><a href="housing-instability.html#cb40-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-43"><a href="housing-instability.html#cb40-43" aria-hidden="true" tabindex="-1"></a>metro_covid_tbl</span></code></pre></div>
<div id="wcpepltdhl" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#wcpepltdhl .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 12px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 50%;
  border-top-style: solid;
  border-top-width: 3px;
  border-top-color: #D3D3D3;
  border-right-style: solid;
  border-right-width: 3px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 3px;
  border-bottom-color: #D3D3D3;
  border-left-style: solid;
  border-left-width: 3px;
  border-left-color: #D3D3D3;
}

#wcpepltdhl .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wcpepltdhl .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#wcpepltdhl .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#wcpepltdhl .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wcpepltdhl .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wcpepltdhl .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#wcpepltdhl .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#wcpepltdhl .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#wcpepltdhl .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#wcpepltdhl .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#wcpepltdhl .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#wcpepltdhl .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#wcpepltdhl .gt_from_md > :first-child {
  margin-top: 0;
}

#wcpepltdhl .gt_from_md > :last-child {
  margin-bottom: 0;
}

#wcpepltdhl .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#wcpepltdhl .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#wcpepltdhl .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wcpepltdhl .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#wcpepltdhl .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wcpepltdhl .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#wcpepltdhl .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#wcpepltdhl .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wcpepltdhl .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wcpepltdhl .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#wcpepltdhl .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wcpepltdhl .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#wcpepltdhl .gt_left {
  text-align: left;
}

#wcpepltdhl .gt_center {
  text-align: center;
}

#wcpepltdhl .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#wcpepltdhl .gt_font_normal {
  font-weight: normal;
}

#wcpepltdhl .gt_font_bold {
  font-weight: bold;
}

#wcpepltdhl .gt_font_italic {
  font-style: italic;
}

#wcpepltdhl .gt_super {
  font-size: 65%;
}

#wcpepltdhl .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  <thead class="gt_header">
    <tr>
      <th colspan="4" class="gt_heading gt_title gt_font_normal" style>Table 2: Covid Indicators</th>
    </tr>
    <tr>
      <th colspan="4" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>Components of the Covid Subindex</th>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1">Metro District</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="2">
        <span class="gt_column_spanner">Percent</span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="1">
        <span class="gt_column_spanner">Index</span>
      </th>
    </tr>
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">No Health Insurance</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Covid Job Loss</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Covid Index</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">9&percnt;</td>
<td class="gt_row gt_center">9&percnt;</td>
<td class="gt_row gt_center">&minus;0.18</td></tr>
    <tr><td class="gt_row gt_center gt_striped">2</td>
<td class="gt_row gt_center gt_striped">14&percnt;</td>
<td class="gt_row gt_center gt_striped">8&percnt;</td>
<td class="gt_row gt_center gt_striped">&minus;0.012</td></tr>
    <tr><td class="gt_row gt_center">3</td>
<td class="gt_row gt_center">10&percnt;</td>
<td class="gt_row gt_center">9&percnt;</td>
<td class="gt_row gt_center">&minus;0.098</td></tr>
    <tr><td class="gt_row gt_center gt_striped">4</td>
<td class="gt_row gt_center gt_striped">10&percnt;</td>
<td class="gt_row gt_center gt_striped">10&percnt;</td>
<td class="gt_row gt_center gt_striped">&minus;0.011</td></tr>
    <tr><td class="gt_row gt_center">5</td>
<td class="gt_row gt_center">10&percnt;</td>
<td class="gt_row gt_center">9&percnt;</td>
<td class="gt_row gt_center">&minus;0.082</td></tr>
    <tr><td class="gt_row gt_center gt_striped">6</td>
<td class="gt_row gt_center gt_striped">11&percnt;</td>
<td class="gt_row gt_center gt_striped">9&percnt;</td>
<td class="gt_row gt_center gt_striped">0.0010</td></tr>
    <tr><td class="gt_row gt_center">7</td>
<td class="gt_row gt_center">6&percnt;</td>
<td class="gt_row gt_center">9&percnt;</td>
<td class="gt_row gt_center">&minus;0.20</td></tr>
    <tr><td class="gt_row gt_center gt_striped">8</td>
<td class="gt_row gt_center gt_striped">4&percnt;</td>
<td class="gt_row gt_center gt_striped">9&percnt;</td>
<td class="gt_row gt_center gt_striped">&minus;0.34</td></tr>
    <tr><td class="gt_row gt_center">9</td>
<td class="gt_row gt_center">7&percnt;</td>
<td class="gt_row gt_center">9&percnt;</td>
<td class="gt_row gt_center">&minus;0.22</td></tr>
    <tr><td class="gt_row gt_center gt_striped">10</td>
<td class="gt_row gt_center gt_striped">9&percnt;</td>
<td class="gt_row gt_center gt_striped">9&percnt;</td>
<td class="gt_row gt_center gt_striped">&minus;0.20</td></tr>
    <tr><td class="gt_row gt_center">11</td>
<td class="gt_row gt_center">5&percnt;</td>
<td class="gt_row gt_center">9&percnt;</td>
<td class="gt_row gt_center">&minus;0.41</td></tr>
    <tr><td class="gt_row gt_center gt_striped">12</td>
<td class="gt_row gt_center gt_striped">7&percnt;</td>
<td class="gt_row gt_center gt_striped">8&percnt;</td>
<td class="gt_row gt_center gt_striped">&minus;0.42</td></tr>
    <tr><td class="gt_row gt_center">13</td>
<td class="gt_row gt_center">13&percnt;</td>
<td class="gt_row gt_center">8&percnt;</td>
<td class="gt_row gt_center">&minus;0.17</td></tr>
    <tr><td class="gt_row gt_center gt_striped">14</td>
<td class="gt_row gt_center gt_striped">8&percnt;</td>
<td class="gt_row gt_center gt_striped">8&percnt;</td>
<td class="gt_row gt_center gt_striped">&minus;0.42</td></tr>
    <tr><td class="gt_row gt_center">15</td>
<td class="gt_row gt_center">12&percnt;</td>
<td class="gt_row gt_center">9&percnt;</td>
<td class="gt_row gt_center">&minus;0.046</td></tr>
    <tr><td class="gt_row gt_center gt_striped">16</td>
<td class="gt_row gt_center gt_striped">4&percnt;</td>
<td class="gt_row gt_center gt_striped">10&percnt;</td>
<td class="gt_row gt_center gt_striped">&minus;0.24</td></tr>
    <tr><td class="gt_row gt_center">17</td>
<td class="gt_row gt_center">5&percnt;</td>
<td class="gt_row gt_center">10&percnt;</td>
<td class="gt_row gt_center">&minus;0.16</td></tr>
    <tr><td class="gt_row gt_center gt_striped">18</td>
<td class="gt_row gt_center gt_striped">5&percnt;</td>
<td class="gt_row gt_center gt_striped">9&percnt;</td>
<td class="gt_row gt_center gt_striped">&minus;0.28</td></tr>
    <tr><td class="gt_row gt_center">19</td>
<td class="gt_row gt_center">3&percnt;</td>
<td class="gt_row gt_center">9&percnt;</td>
<td class="gt_row gt_center">&minus;0.36</td></tr>
    <tr><td class="gt_row gt_center gt_striped">20</td>
<td class="gt_row gt_center gt_striped">3&percnt;</td>
<td class="gt_row gt_center gt_striped">8&percnt;</td>
<td class="gt_row gt_center gt_striped">&minus;0.49</td></tr>
    <tr><td class="gt_row gt_center">21</td>
<td class="gt_row gt_center">14&percnt;</td>
<td class="gt_row gt_center">8&percnt;</td>
<td class="gt_row gt_center">&minus;0.017</td></tr>
    <tr><td class="gt_row gt_center gt_striped">22</td>
<td class="gt_row gt_center gt_striped">5&percnt;</td>
<td class="gt_row gt_center gt_striped">8&percnt;</td>
<td class="gt_row gt_center gt_striped">&minus;0.44</td></tr>
    <tr><td class="gt_row gt_center">23</td>
<td class="gt_row gt_center">7&percnt;</td>
<td class="gt_row gt_center">8&percnt;</td>
<td class="gt_row gt_center">&minus;0.38</td></tr>
    <tr><td class="gt_row gt_center gt_striped">24</td>
<td class="gt_row gt_center gt_striped">9&percnt;</td>
<td class="gt_row gt_center gt_striped">8&percnt;</td>
<td class="gt_row gt_center gt_striped">&minus;0.29</td></tr>
    <tr><td class="gt_row gt_center">25</td>
<td class="gt_row gt_center">8&percnt;</td>
<td class="gt_row gt_center">8&percnt;</td>
<td class="gt_row gt_center">&minus;0.38</td></tr>
    <tr><td class="gt_row gt_center gt_striped">26</td>
<td class="gt_row gt_center gt_striped">9&percnt;</td>
<td class="gt_row gt_center gt_striped">9&percnt;</td>
<td class="gt_row gt_center gt_striped">&minus;0.17</td></tr>
  </tbody>
  <tfoot class="gt_sourcenotes">
    <tr>
      <td class="gt_sourcenote" colspan="4">Greater Louisville Project</td>
    </tr>
    <tr>
      <td class="gt_sourcenote" colspan="4">Metro Council Districts are estimated from tract level data. Data is from the Urban Institute.</td>
    </tr>
  </tfoot>
  
</table>
</div>
</div>
<div id="equity-index-2" class="section level3 panel unnumbered">
<h3>Equity Index</h3>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="housing-instability.html#cb41-1" aria-hidden="true" tabindex="-1"></a>metro_equity_tbl <span class="ot">&lt;-</span> metro_sf <span class="sc">%&gt;%</span></span>
<span id="cb41-2"><a href="housing-instability.html#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb41-3"><a href="housing-instability.html#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(district)) <span class="sc">%&gt;%</span></span>
<span id="cb41-4"><a href="housing-instability.html#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(district, perc_person_of_color, perc_30hamfi, perc_public_assistance, perc_foreign_born, equity_index) <span class="sc">%&gt;%</span></span>
<span id="cb41-5"><a href="housing-instability.html#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#GT fmt_percent expects percents as decimals</span></span>
<span id="cb41-6"><a href="housing-instability.html#cb41-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">&quot;perc&quot;</span>), <span class="sc">~</span> .<span class="sc">/</span><span class="dv">100</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb41-7"><a href="housing-instability.html#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb41-8"><a href="housing-instability.html#cb41-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">&quot;Table 3: Equity Indicators&quot;</span>,</span>
<span id="cb41-9"><a href="housing-instability.html#cb41-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">subtitle =</span> <span class="st">&quot;Components of the Equity Subindex&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb41-10"><a href="housing-instability.html#cb41-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="at">columns =</span> <span class="fu">vars</span>(equity_index),</span>
<span id="cb41-11"><a href="housing-instability.html#cb41-11" aria-hidden="true" tabindex="-1"></a>             <span class="at">n_sigfig =</span> <span class="dv">2</span>,</span>
<span id="cb41-12"><a href="housing-instability.html#cb41-12" aria-hidden="true" tabindex="-1"></a>             <span class="at">suffixing =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb41-13"><a href="housing-instability.html#cb41-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_percent</span>(<span class="at">columns =</span> <span class="fu">vars</span>(perc_person_of_color, perc_30hamfi, perc_public_assistance, perc_foreign_born),</span>
<span id="cb41-14"><a href="housing-instability.html#cb41-14" aria-hidden="true" tabindex="-1"></a>              <span class="at">decimals =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb41-15"><a href="housing-instability.html#cb41-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(<span class="at">district =</span> <span class="st">&quot;Metro District&quot;</span>,</span>
<span id="cb41-16"><a href="housing-instability.html#cb41-16" aria-hidden="true" tabindex="-1"></a>             <span class="at">perc_person_of_color =</span> <span class="st">&quot;Person of Color&quot;</span>, </span>
<span id="cb41-17"><a href="housing-instability.html#cb41-17" aria-hidden="true" tabindex="-1"></a>             <span class="at">perc_30hamfi =</span> <span class="st">&quot;Extremely Low Income&quot;</span>, </span>
<span id="cb41-18"><a href="housing-instability.html#cb41-18" aria-hidden="true" tabindex="-1"></a>             <span class="at">perc_public_assistance =</span> <span class="st">&quot;Public Assistance&quot;</span>, </span>
<span id="cb41-19"><a href="housing-instability.html#cb41-19" aria-hidden="true" tabindex="-1"></a>             <span class="at">perc_foreign_born =</span> <span class="st">&quot;Foreign Born&quot;</span>, </span>
<span id="cb41-20"><a href="housing-instability.html#cb41-20" aria-hidden="true" tabindex="-1"></a>             <span class="at">equity_index =</span> <span class="st">&quot;Index&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb41-21"><a href="housing-instability.html#cb41-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_move</span>(<span class="at">columns =</span> <span class="fu">vars</span>(perc_person_of_color, perc_30hamfi, perc_public_assistance, perc_foreign_born, equity_index),</span>
<span id="cb41-22"><a href="housing-instability.html#cb41-22" aria-hidden="true" tabindex="-1"></a>            <span class="at">after =</span> <span class="fu">vars</span>(district)) <span class="sc">%&gt;%</span></span>
<span id="cb41-23"><a href="housing-instability.html#cb41-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb41-24"><a href="housing-instability.html#cb41-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">&quot;Index&quot;</span>,</span>
<span id="cb41-25"><a href="housing-instability.html#cb41-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">vars</span>(equity_index)</span>
<span id="cb41-26"><a href="housing-instability.html#cb41-26" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb41-27"><a href="housing-instability.html#cb41-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb41-28"><a href="housing-instability.html#cb41-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">&quot;Percent&quot;</span>,</span>
<span id="cb41-29"><a href="housing-instability.html#cb41-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">vars</span>(perc_person_of_color, perc_30hamfi, perc_public_assistance, perc_foreign_born, equity_index)</span>
<span id="cb41-30"><a href="housing-instability.html#cb41-30" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb41-31"><a href="housing-instability.html#cb41-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(<span class="at">align =</span> <span class="st">&quot;center&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb41-32"><a href="housing-instability.html#cb41-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_source_note</span>(</span>
<span id="cb41-33"><a href="housing-instability.html#cb41-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">source_note =</span> <span class="fu">md</span>(<span class="st">&quot;Greater Louisville Project&quot;</span>)</span>
<span id="cb41-34"><a href="housing-instability.html#cb41-34" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb41-35"><a href="housing-instability.html#cb41-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_source_note</span>(</span>
<span id="cb41-36"><a href="housing-instability.html#cb41-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">source_note =</span> <span class="fu">md</span>(<span class="st">&quot;Metro Council Districts are estimated from tract level data. Data is from the Urban Institute.&quot;</span>)</span>
<span id="cb41-37"><a href="housing-instability.html#cb41-37" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb41-38"><a href="housing-instability.html#cb41-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">opt_row_striping</span>(<span class="at">row_striping =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb41-39"><a href="housing-instability.html#cb41-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">opt_table_outline</span>() <span class="sc">%&gt;%</span></span>
<span id="cb41-40"><a href="housing-instability.html#cb41-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(</span>
<span id="cb41-41"><a href="housing-instability.html#cb41-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.font.size =</span> <span class="fu">px</span>(<span class="dv">12</span>),</span>
<span id="cb41-42"><a href="housing-instability.html#cb41-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.width =</span> <span class="fu">pct</span>(<span class="dv">50</span>)</span>
<span id="cb41-43"><a href="housing-instability.html#cb41-43" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb41-44"><a href="housing-instability.html#cb41-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-45"><a href="housing-instability.html#cb41-45" aria-hidden="true" tabindex="-1"></a>metro_equity_tbl</span></code></pre></div>
<div id="xcbldegnsp" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#xcbldegnsp .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 12px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: 50%;
  border-top-style: solid;
  border-top-width: 3px;
  border-top-color: #D3D3D3;
  border-right-style: solid;
  border-right-width: 3px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 3px;
  border-bottom-color: #D3D3D3;
  border-left-style: solid;
  border-left-width: 3px;
  border-left-color: #D3D3D3;
}

#xcbldegnsp .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xcbldegnsp .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#xcbldegnsp .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#xcbldegnsp .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xcbldegnsp .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xcbldegnsp .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#xcbldegnsp .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#xcbldegnsp .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#xcbldegnsp .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#xcbldegnsp .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#xcbldegnsp .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#xcbldegnsp .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#xcbldegnsp .gt_from_md > :first-child {
  margin-top: 0;
}

#xcbldegnsp .gt_from_md > :last-child {
  margin-bottom: 0;
}

#xcbldegnsp .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#xcbldegnsp .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#xcbldegnsp .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xcbldegnsp .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#xcbldegnsp .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xcbldegnsp .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#xcbldegnsp .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#xcbldegnsp .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xcbldegnsp .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xcbldegnsp .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#xcbldegnsp .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xcbldegnsp .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#xcbldegnsp .gt_left {
  text-align: left;
}

#xcbldegnsp .gt_center {
  text-align: center;
}

#xcbldegnsp .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#xcbldegnsp .gt_font_normal {
  font-weight: normal;
}

#xcbldegnsp .gt_font_bold {
  font-weight: bold;
}

#xcbldegnsp .gt_font_italic {
  font-style: italic;
}

#xcbldegnsp .gt_super {
  font-size: 65%;
}

#xcbldegnsp .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  <thead class="gt_header">
    <tr>
      <th colspan="6" class="gt_heading gt_title gt_font_normal" style>Table 3: Equity Indicators</th>
    </tr>
    <tr>
      <th colspan="6" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>Components of the Equity Subindex</th>
    </tr>
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="2" colspan="1">Metro District</th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="5">
        <span class="gt_column_spanner">Percent</span>
      </th>
    </tr>
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Person of Color</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Extremely Low Income</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Public Assistance</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Foreign Born</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1">Index</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_center">1</td>
<td class="gt_row gt_center">68&percnt;</td>
<td class="gt_row gt_center">43&percnt;</td>
<td class="gt_row gt_center">2&percnt;</td>
<td class="gt_row gt_center">2&percnt;</td>
<td class="gt_row gt_center">0.48</td></tr>
    <tr><td class="gt_row gt_center gt_striped">2</td>
<td class="gt_row gt_center gt_striped">69&percnt;</td>
<td class="gt_row gt_center gt_striped">28&percnt;</td>
<td class="gt_row gt_center gt_striped">2&percnt;</td>
<td class="gt_row gt_center gt_striped">18&percnt;</td>
<td class="gt_row gt_center gt_striped">0.67</td></tr>
    <tr><td class="gt_row gt_center">3</td>
<td class="gt_row gt_center">66&percnt;</td>
<td class="gt_row gt_center">45&percnt;</td>
<td class="gt_row gt_center">4&percnt;</td>
<td class="gt_row gt_center">4&percnt;</td>
<td class="gt_row gt_center">0.57</td></tr>
    <tr><td class="gt_row gt_center gt_striped">4</td>
<td class="gt_row gt_center gt_striped">60&percnt;</td>
<td class="gt_row gt_center gt_striped">50&percnt;</td>
<td class="gt_row gt_center gt_striped">4&percnt;</td>
<td class="gt_row gt_center gt_striped">4&percnt;</td>
<td class="gt_row gt_center gt_striped">0.53</td></tr>
    <tr><td class="gt_row gt_center">5</td>
<td class="gt_row gt_center">74&percnt;</td>
<td class="gt_row gt_center">45&percnt;</td>
<td class="gt_row gt_center">3&percnt;</td>
<td class="gt_row gt_center">1&percnt;</td>
<td class="gt_row gt_center">0.63</td></tr>
    <tr><td class="gt_row gt_center gt_striped">6</td>
<td class="gt_row gt_center gt_striped">53&percnt;</td>
<td class="gt_row gt_center gt_striped">46&percnt;</td>
<td class="gt_row gt_center gt_striped">3&percnt;</td>
<td class="gt_row gt_center gt_striped">5&percnt;</td>
<td class="gt_row gt_center gt_striped">0.38</td></tr>
    <tr><td class="gt_row gt_center">7</td>
<td class="gt_row gt_center">16&percnt;</td>
<td class="gt_row gt_center">11&percnt;</td>
<td class="gt_row gt_center">1&percnt;</td>
<td class="gt_row gt_center">7&percnt;</td>
<td class="gt_row gt_center">&minus;0.71</td></tr>
    <tr><td class="gt_row gt_center gt_striped">8</td>
<td class="gt_row gt_center gt_striped">7&percnt;</td>
<td class="gt_row gt_center gt_striped">15&percnt;</td>
<td class="gt_row gt_center gt_striped">1&percnt;</td>
<td class="gt_row gt_center gt_striped">3&percnt;</td>
<td class="gt_row gt_center gt_striped">&minus;0.92</td></tr>
    <tr><td class="gt_row gt_center">9</td>
<td class="gt_row gt_center">15&percnt;</td>
<td class="gt_row gt_center">19&percnt;</td>
<td class="gt_row gt_center">2&percnt;</td>
<td class="gt_row gt_center">5&percnt;</td>
<td class="gt_row gt_center">&minus;0.67</td></tr>
    <tr><td class="gt_row gt_center gt_striped">10</td>
<td class="gt_row gt_center gt_striped">28&percnt;</td>
<td class="gt_row gt_center gt_striped">28&percnt;</td>
<td class="gt_row gt_center gt_striped">2&percnt;</td>
<td class="gt_row gt_center gt_striped">9&percnt;</td>
<td class="gt_row gt_center gt_striped">&minus;0.28</td></tr>
    <tr><td class="gt_row gt_center">11</td>
<td class="gt_row gt_center">23&percnt;</td>
<td class="gt_row gt_center">11&percnt;</td>
<td class="gt_row gt_center">2&percnt;</td>
<td class="gt_row gt_center">8&percnt;</td>
<td class="gt_row gt_center">&minus;0.53</td></tr>
    <tr><td class="gt_row gt_center gt_striped">12</td>
<td class="gt_row gt_center gt_striped">27&percnt;</td>
<td class="gt_row gt_center gt_striped">26&percnt;</td>
<td class="gt_row gt_center gt_striped">3&percnt;</td>
<td class="gt_row gt_center gt_striped">5&percnt;</td>
<td class="gt_row gt_center gt_striped">&minus;0.32</td></tr>
    <tr><td class="gt_row gt_center">13</td>
<td class="gt_row gt_center">31&percnt;</td>
<td class="gt_row gt_center">23&percnt;</td>
<td class="gt_row gt_center">5&percnt;</td>
<td class="gt_row gt_center">12&percnt;</td>
<td class="gt_row gt_center">&minus;0.035</td></tr>
    <tr><td class="gt_row gt_center gt_striped">14</td>
<td class="gt_row gt_center gt_striped">15&percnt;</td>
<td class="gt_row gt_center gt_striped">28&percnt;</td>
<td class="gt_row gt_center gt_striped">4&percnt;</td>
<td class="gt_row gt_center gt_striped">3&percnt;</td>
<td class="gt_row gt_center gt_striped">&minus;0.51</td></tr>
    <tr><td class="gt_row gt_center">15</td>
<td class="gt_row gt_center">38&percnt;</td>
<td class="gt_row gt_center">32&percnt;</td>
<td class="gt_row gt_center">5&percnt;</td>
<td class="gt_row gt_center">8&percnt;</td>
<td class="gt_row gt_center">0.11</td></tr>
    <tr><td class="gt_row gt_center gt_striped">16</td>
<td class="gt_row gt_center gt_striped">18&percnt;</td>
<td class="gt_row gt_center gt_striped">8&percnt;</td>
<td class="gt_row gt_center gt_striped">1&percnt;</td>
<td class="gt_row gt_center gt_striped">8&percnt;</td>
<td class="gt_row gt_center gt_striped">&minus;0.67</td></tr>
    <tr><td class="gt_row gt_center">17</td>
<td class="gt_row gt_center">25&percnt;</td>
<td class="gt_row gt_center">15&percnt;</td>
<td class="gt_row gt_center">2&percnt;</td>
<td class="gt_row gt_center">10&percnt;</td>
<td class="gt_row gt_center">&minus;0.43</td></tr>
    <tr><td class="gt_row gt_center gt_striped">18</td>
<td class="gt_row gt_center gt_striped">20&percnt;</td>
<td class="gt_row gt_center gt_striped">12&percnt;</td>
<td class="gt_row gt_center gt_striped">1&percnt;</td>
<td class="gt_row gt_center gt_striped">11&percnt;</td>
<td class="gt_row gt_center gt_striped">&minus;0.57</td></tr>
    <tr><td class="gt_row gt_center">19</td>
<td class="gt_row gt_center">17&percnt;</td>
<td class="gt_row gt_center">14&percnt;</td>
<td class="gt_row gt_center">1&percnt;</td>
<td class="gt_row gt_center">6&percnt;</td>
<td class="gt_row gt_center">&minus;0.71</td></tr>
    <tr><td class="gt_row gt_center gt_striped">20</td>
<td class="gt_row gt_center gt_striped">16&percnt;</td>
<td class="gt_row gt_center gt_striped">17&percnt;</td>
<td class="gt_row gt_center gt_striped">1&percnt;</td>
<td class="gt_row gt_center gt_striped">4&percnt;</td>
<td class="gt_row gt_center gt_striped">&minus;0.74</td></tr>
    <tr><td class="gt_row gt_center">21</td>
<td class="gt_row gt_center">44&percnt;</td>
<td class="gt_row gt_center">29&percnt;</td>
<td class="gt_row gt_center">2&percnt;</td>
<td class="gt_row gt_center">19&percnt;</td>
<td class="gt_row gt_center">0.28</td></tr>
    <tr><td class="gt_row gt_center gt_striped">22</td>
<td class="gt_row gt_center gt_striped">22&percnt;</td>
<td class="gt_row gt_center gt_striped">13&percnt;</td>
<td class="gt_row gt_center gt_striped">1&percnt;</td>
<td class="gt_row gt_center gt_striped">5&percnt;</td>
<td class="gt_row gt_center gt_striped">&minus;0.63</td></tr>
    <tr><td class="gt_row gt_center">23</td>
<td class="gt_row gt_center">23&percnt;</td>
<td class="gt_row gt_center">16&percnt;</td>
<td class="gt_row gt_center">2&percnt;</td>
<td class="gt_row gt_center">6&percnt;</td>
<td class="gt_row gt_center">&minus;0.54</td></tr>
    <tr><td class="gt_row gt_center gt_striped">24</td>
<td class="gt_row gt_center gt_striped">31&percnt;</td>
<td class="gt_row gt_center gt_striped">26&percnt;</td>
<td class="gt_row gt_center gt_striped">3&percnt;</td>
<td class="gt_row gt_center gt_striped">11&percnt;</td>
<td class="gt_row gt_center gt_striped">&minus;0.13</td></tr>
    <tr><td class="gt_row gt_center">25</td>
<td class="gt_row gt_center">24&percnt;</td>
<td class="gt_row gt_center">20&percnt;</td>
<td class="gt_row gt_center">2&percnt;</td>
<td class="gt_row gt_center">6&percnt;</td>
<td class="gt_row gt_center">&minus;0.49</td></tr>
    <tr><td class="gt_row gt_center gt_striped">26</td>
<td class="gt_row gt_center gt_striped">26&percnt;</td>
<td class="gt_row gt_center gt_striped">20&percnt;</td>
<td class="gt_row gt_center gt_striped">4&percnt;</td>
<td class="gt_row gt_center gt_striped">13&percnt;</td>
<td class="gt_row gt_center gt_striped">&minus;0.19</td></tr>
  </tbody>
  <tfoot class="gt_sourcenotes">
    <tr>
      <td class="gt_sourcenote" colspan="6">Greater Louisville Project</td>
    </tr>
    <tr>
      <td class="gt_sourcenote" colspan="6">Metro Council Districts are estimated from tract level data. Data is from the Urban Institute.</td>
    </tr>
  </tfoot>
  
</table>
</div>
</div>
</div>
</div>
<div id="home-mortgages" class="section level2" number="3.9">
<h2><span class="header-section-number">3.9</span> Home Mortgages</h2>
<div id="mortgages-by-geography" class="section level3" number="3.9.1">
<h3><span class="header-section-number">3.9.1</span> Mortgages by geography</h3>
<p>In 2019, about 3.8 mortgages were issued per 100 residents; however, the availability of mortgages varies greatly across the city. Two census tracts saw 0 mortgages issued in 2019, and most of West Louisville saw fewer than 1 mortgage issued per 100 residents. Meanwhile, many areas experienced a much larger availability of mortgages, especially where there is new construction around the edges of the county.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="housing-instability.html#cb42-1" aria-hidden="true" tabindex="-1"></a>home_loan_tract_race <span class="ot">&lt;-</span> home_loan_tract <span class="sc">%&gt;%</span></span>
<span id="cb42-2"><a href="housing-instability.html#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2019</span>, sex <span class="sc">==</span> <span class="st">&quot;total&quot;</span>, race <span class="sc">!=</span> <span class="st">&quot;total&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb42-3"><a href="housing-instability.html#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(tract, race, denial<span class="sc">:</span>rate_spread)</span>
<span id="cb42-4"><a href="housing-instability.html#cb42-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-5"><a href="housing-instability.html#cb42-5" aria-hidden="true" tabindex="-1"></a>home_loan_tract <span class="sc">%&lt;&gt;%</span></span>
<span id="cb42-6"><a href="housing-instability.html#cb42-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2019</span>, sex <span class="sc">==</span> <span class="st">&quot;total&quot;</span>, race <span class="sc">==</span> <span class="st">&quot;total&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb42-7"><a href="housing-instability.html#cb42-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(tract, denial<span class="sc">:</span>rate_spread)</span>
<span id="cb42-8"><a href="housing-instability.html#cb42-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-9"><a href="housing-instability.html#cb42-9" aria-hidden="true" tabindex="-1"></a>jfco_sf <span class="sc">%&lt;&gt;%</span> <span class="fu">left_join</span>(home_loan_tract, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;GEOID&quot;</span> <span class="ot">=</span> <span class="st">&quot;tract&quot;</span>))</span>
<span id="cb42-10"><a href="housing-instability.html#cb42-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-11"><a href="housing-instability.html#cb42-11" aria-hidden="true" tabindex="-1"></a>loan_num_labs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;No mortgages&quot;</span>, <span class="st">&quot;Less than 1&quot;</span>, <span class="st">&quot;1 to 3&quot;</span>, <span class="st">&quot;3 to 5&quot;</span>, <span class="st">&quot;5 to 10&quot;</span>, <span class="st">&quot;More than 10&quot;</span>)</span>
<span id="cb42-12"><a href="housing-instability.html#cb42-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-13"><a href="housing-instability.html#cb42-13" aria-hidden="true" tabindex="-1"></a>jfco_sf <span class="sc">%&lt;&gt;%</span></span>
<span id="cb42-14"><a href="housing-instability.html#cb42-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb42-15"><a href="housing-instability.html#cb42-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">loan_num_fill =</span> </span>
<span id="cb42-16"><a href="housing-instability.html#cb42-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">case_when</span>(</span>
<span id="cb42-17"><a href="housing-instability.html#cb42-17" aria-hidden="true" tabindex="-1"></a>        loan_number_per_100 <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> loan_num_labs[<span class="dv">1</span>],</span>
<span id="cb42-18"><a href="housing-instability.html#cb42-18" aria-hidden="true" tabindex="-1"></a>        loan_number_per_100 <span class="sc">&lt;=</span> <span class="dv">1</span> <span class="sc">~</span> loan_num_labs[<span class="dv">2</span>],</span>
<span id="cb42-19"><a href="housing-instability.html#cb42-19" aria-hidden="true" tabindex="-1"></a>        loan_number_per_100 <span class="sc">&lt;=</span> <span class="dv">3</span> <span class="sc">~</span> loan_num_labs[<span class="dv">3</span>],</span>
<span id="cb42-20"><a href="housing-instability.html#cb42-20" aria-hidden="true" tabindex="-1"></a>        loan_number_per_100 <span class="sc">&lt;=</span> <span class="dv">5</span> <span class="sc">~</span> loan_num_labs[<span class="dv">4</span>],</span>
<span id="cb42-21"><a href="housing-instability.html#cb42-21" aria-hidden="true" tabindex="-1"></a>        loan_number_per_100 <span class="sc">&lt;=</span> <span class="dv">10</span> <span class="sc">~</span> loan_num_labs[<span class="dv">5</span>],</span>
<span id="cb42-22"><a href="housing-instability.html#cb42-22" aria-hidden="true" tabindex="-1"></a>        loan_number_per_100 <span class="sc">&gt;</span> <span class="dv">10</span> <span class="sc">~</span> loan_num_labs[<span class="dv">6</span>],</span>
<span id="cb42-23"><a href="housing-instability.html#cb42-23" aria-hidden="true" tabindex="-1"></a>        <span class="fu">is.na</span>(loan_number_per_100) <span class="sc">~</span> <span class="cn">NA_character_</span>,</span>
<span id="cb42-24"><a href="housing-instability.html#cb42-24" aria-hidden="true" tabindex="-1"></a>        <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;error!!&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb42-25"><a href="housing-instability.html#cb42-25" aria-hidden="true" tabindex="-1"></a>      <span class="fu">factor</span>(<span class="at">levels =</span> loan_num_labs, <span class="at">ordered =</span> <span class="cn">TRUE</span>))</span>
<span id="cb42-26"><a href="housing-instability.html#cb42-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-27"><a href="housing-instability.html#cb42-27" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(jfco_sf) <span class="sc">+</span> </span>
<span id="cb42-28"><a href="housing-instability.html#cb42-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> loan_num_fill)) <span class="sc">+</span></span>
<span id="cb42-29"><a href="housing-instability.html#cb42-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> viridis<span class="sc">::</span><span class="fu">viridis</span>(<span class="dv">6</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>), <span class="at">na.value =</span> <span class="st">&quot;grey&quot;</span>) <span class="sc">+</span></span>
<span id="cb42-30"><a href="housing-instability.html#cb42-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">22</span>, <span class="at">base_family =</span> <span class="st">&quot;Montserrat&quot;</span>) <span class="sc">+</span></span>
<span id="cb42-31"><a href="housing-instability.html#cb42-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb42-32"><a href="housing-instability.html#cb42-32" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb42-33"><a href="housing-instability.html#cb42-33" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb42-34"><a href="housing-instability.html#cb42-34" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb42-35"><a href="housing-instability.html#cb42-35" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.border =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb42-36"><a href="housing-instability.html#cb42-36" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb42-37"><a href="housing-instability.html#cb42-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Mortgages issued per 100 residents in 2019&quot;</span>) <span class="sc">+</span></span>
<span id="cb42-38"><a href="housing-instability.html#cb42-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb42-39"><a href="housing-instability.html#cb42-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>), <span class="co"># bg of the panel</span></span>
<span id="cb42-40"><a href="housing-instability.html#cb42-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>), <span class="co"># bg of the plot</span></span>
<span id="cb42-41"><a href="housing-instability.html#cb42-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="st">&quot;transparent&quot;</span>), <span class="co"># get rid of legend bg</span></span>
<span id="cb42-42"><a href="housing-instability.html#cb42-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.box.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="st">&quot;transparent&quot;</span>), <span class="co"># get rid of legend panel bg</span></span>
<span id="cb42-43"><a href="housing-instability.html#cb42-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>,<span class="at">colour =</span> <span class="cn">NA</span>))</span></code></pre></div>
<p><img src="urban_index_files/figure-html/mortgages_per_person-1.png" width="672" /></p>
</div>
<div id="mortgages-by-race" class="section level3" number="3.9.2">
<h3><span class="header-section-number">3.9.2</span> Mortgages by race</h3>
<p>We can also examine mortgage data by race. Black residents in Louisville received fewer than half the number of mortgages per person that White residents did in 2019.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="housing-instability.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Interactive Mortgage map</span></span>
<span id="cb43-2"><a href="housing-instability.html#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="co"># load(&quot;home_loans_detail.RData&quot;)</span></span>
<span id="cb43-3"><a href="housing-instability.html#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="co"># home_loan_detail %&lt;&gt;%</span></span>
<span id="cb43-4"><a href="housing-instability.html#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   select(tract, year, race, sex, loan_status, income, loan, rate) %&gt;%</span></span>
<span id="cb43-5"><a href="housing-instability.html#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   mutate(tract = str_extract(tract, &quot;21111.*&quot;)) %&gt;%</span></span>
<span id="cb43-6"><a href="housing-instability.html#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(year == 2019, loan_status == &quot;approved&quot;)</span></span>
<span id="cb43-7"><a href="housing-instability.html#cb43-7" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb43-8"><a href="housing-instability.html#cb43-8" aria-hidden="true" tabindex="-1"></a><span class="co"># num_points &lt;- home_loan_detail %&gt;%</span></span>
<span id="cb43-9"><a href="housing-instability.html#cb43-9" aria-hidden="true" tabindex="-1"></a><span class="co">#   group_by(tract) %&gt;%</span></span>
<span id="cb43-10"><a href="housing-instability.html#cb43-10" aria-hidden="true" tabindex="-1"></a><span class="co">#   summarise(n = n(), .groups=&quot;drop&quot;) %&gt;%</span></span>
<span id="cb43-11"><a href="housing-instability.html#cb43-11" aria-hidden="true" tabindex="-1"></a><span class="co">#   left_join(glptools::map_tract, by = &quot;tract&quot;) %&gt;%</span></span>
<span id="cb43-12"><a href="housing-instability.html#cb43-12" aria-hidden="true" tabindex="-1"></a><span class="co">#   group_by(tract) %&gt;%</span></span>
<span id="cb43-13"><a href="housing-instability.html#cb43-13" aria-hidden="true" tabindex="-1"></a><span class="co">#   nest() %&gt;%</span></span>
<span id="cb43-14"><a href="housing-instability.html#cb43-14" aria-hidden="true" tabindex="-1"></a><span class="co">#   mutate(points = map(data, function(x) st_sample(x$geometry, x$n))) %&gt;%</span></span>
<span id="cb43-15"><a href="housing-instability.html#cb43-15" aria-hidden="true" tabindex="-1"></a><span class="co">#   unnest()</span></span>
<span id="cb43-16"><a href="housing-instability.html#cb43-16" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb43-17"><a href="housing-instability.html#cb43-17" aria-hidden="true" tabindex="-1"></a><span class="co"># home_loan_detail %&lt;&gt;% arrange(tract)</span></span>
<span id="cb43-18"><a href="housing-instability.html#cb43-18" aria-hidden="true" tabindex="-1"></a><span class="co"># num_points %&lt;&gt;% arrange(tract)</span></span>
<span id="cb43-19"><a href="housing-instability.html#cb43-19" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb43-20"><a href="housing-instability.html#cb43-20" aria-hidden="true" tabindex="-1"></a><span class="co"># st_geometry(home_loan_detail) &lt;- num_points$points</span></span>
<span id="cb43-21"><a href="housing-instability.html#cb43-21" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb43-22"><a href="housing-instability.html#cb43-22" aria-hidden="true" tabindex="-1"></a><span class="co"># library(leaflet)</span></span>
<span id="cb43-23"><a href="housing-instability.html#cb43-23" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb43-24"><a href="housing-instability.html#cb43-24" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb43-25"><a href="housing-instability.html#cb43-25" aria-hidden="true" tabindex="-1"></a><span class="co"># fillpal &lt;- colorFactor(RColorBrewer::brewer.pal(5, &quot;Dark2&quot;), domain = unique(home_loan_detail$race))</span></span>
<span id="cb43-26"><a href="housing-instability.html#cb43-26" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb43-27"><a href="housing-instability.html#cb43-27" aria-hidden="true" tabindex="-1"></a><span class="co"># leaflet(filter(home_loan_detail, is.na(race))) %&gt;%</span></span>
<span id="cb43-28"><a href="housing-instability.html#cb43-28" aria-hidden="true" tabindex="-1"></a><span class="co">#   addCircleMarkers(</span></span>
<span id="cb43-29"><a href="housing-instability.html#cb43-29" aria-hidden="true" tabindex="-1"></a><span class="co">#     radius = ~sqrt(loan / 30000),</span></span>
<span id="cb43-30"><a href="housing-instability.html#cb43-30" aria-hidden="true" tabindex="-1"></a><span class="co">#     #radius = 5,</span></span>
<span id="cb43-31"><a href="housing-instability.html#cb43-31" aria-hidden="true" tabindex="-1"></a><span class="co">#     stroke=T,</span></span>
<span id="cb43-32"><a href="housing-instability.html#cb43-32" aria-hidden="true" tabindex="-1"></a><span class="co">#     fillColor = ~fillpal(race),</span></span>
<span id="cb43-33"><a href="housing-instability.html#cb43-33" aria-hidden="true" tabindex="-1"></a><span class="co">#     color = ~fillpal(race),</span></span>
<span id="cb43-34"><a href="housing-instability.html#cb43-34" aria-hidden="true" tabindex="-1"></a><span class="co">#     weight = 1,</span></span>
<span id="cb43-35"><a href="housing-instability.html#cb43-35" aria-hidden="true" tabindex="-1"></a><span class="co">#     fillOpacity = 0.15,</span></span>
<span id="cb43-36"><a href="housing-instability.html#cb43-36" aria-hidden="true" tabindex="-1"></a><span class="co">#     opacity = 0.4) %&gt;%</span></span>
<span id="cb43-37"><a href="housing-instability.html#cb43-37" aria-hidden="true" tabindex="-1"></a><span class="co">#   addLegend(pal = fillpal, values = unique(home_loan_detail$race)) %&gt;%</span></span>
<span id="cb43-38"><a href="housing-instability.html#cb43-38" aria-hidden="true" tabindex="-1"></a><span class="co">#   addTiles()</span></span>
<span id="cb43-39"><a href="housing-instability.html#cb43-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-40"><a href="housing-instability.html#cb43-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-41"><a href="housing-instability.html#cb43-41" aria-hidden="true" tabindex="-1"></a>mortgage_county <span class="ot">&lt;-</span> home_loan_county</span>
<span id="cb43-42"><a href="housing-instability.html#cb43-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-43"><a href="housing-instability.html#cb43-43" aria-hidden="true" tabindex="-1"></a>plt_by <span class="ot">&lt;-</span> <span class="cf">function</span>(df, group_var, var, <span class="at">title_text =</span> <span class="st">&quot;Home Mortgages&quot;</span>, </span>
<span id="cb43-44"><a href="housing-instability.html#cb43-44" aria-hidden="true" tabindex="-1"></a>                   <span class="at">y_axis =</span> <span class="st">&quot;Percent&quot;</span>, <span class="at">y_min =</span> <span class="cn">NA</span>, <span class="at">units =</span> <span class="st">&quot;number&quot;</span>) {</span>
<span id="cb43-45"><a href="housing-instability.html#cb43-45" aria-hidden="true" tabindex="-1"></a>  var <span class="ot">&lt;-</span> <span class="fu">enquo</span>(var)</span>
<span id="cb43-46"><a href="housing-instability.html#cb43-46" aria-hidden="true" tabindex="-1"></a>  group_var <span class="ot">&lt;-</span> <span class="fu">enquo</span>(group_var)</span>
<span id="cb43-47"><a href="housing-instability.html#cb43-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-48"><a href="housing-instability.html#cb43-48" aria-hidden="true" tabindex="-1"></a>  text_scale <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb43-49"><a href="housing-instability.html#cb43-49" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-50"><a href="housing-instability.html#cb43-50" aria-hidden="true" tabindex="-1"></a>  plt <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> df, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> <span class="sc">!!</span>var, <span class="at">group =</span> <span class="sc">!!</span>group_var, <span class="at">colour =</span> <span class="sc">!!</span>group_var)) <span class="sc">+</span></span>
<span id="cb43-51"><a href="housing-instability.html#cb43-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb43-52"><a href="housing-instability.html#cb43-52" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">size =</span> .<span class="dv">65</span>) <span class="sc">+</span></span>
<span id="cb43-53"><a href="housing-instability.html#cb43-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb43-54"><a href="housing-instability.html#cb43-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> title_text, <span class="at">x =</span> <span class="st">&quot;Year&quot;</span>, <span class="at">y =</span> y_axis) <span class="sc">+</span></span>
<span id="cb43-55"><a href="housing-instability.html#cb43-55" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</span>
<span id="cb43-56"><a href="housing-instability.html#cb43-56" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-57"><a href="housing-instability.html#cb43-57" aria-hidden="true" tabindex="-1"></a>  plt <span class="ot">&lt;-</span> plt  <span class="sc">+</span> </span>
<span id="cb43-58"><a href="housing-instability.html#cb43-58" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#323844&quot;</span>, <span class="st">&quot;#d63631&quot;</span>)) <span class="sc">+</span></span>
<span id="cb43-59"><a href="housing-instability.html#cb43-59" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">2007</span>, <span class="at">to =</span> <span class="dv">2019</span>, <span class="at">by =</span> <span class="dv">2</span>)) <span class="sc">+</span></span>
<span id="cb43-60"><a href="housing-instability.html#cb43-60" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">family =</span> <span class="st">&quot;Montserrat&quot;</span>),</span>
<span id="cb43-61"><a href="housing-instability.html#cb43-61" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb43-62"><a href="housing-instability.html#cb43-62" aria-hidden="true" tabindex="-1"></a>          <span class="at">legend.title     =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">30</span> <span class="sc">*</span> text_scale),</span>
<span id="cb43-63"><a href="housing-instability.html#cb43-63" aria-hidden="true" tabindex="-1"></a>          <span class="at">legend.text      =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">24</span> <span class="sc">*</span> text_scale,</span>
<span id="cb43-64"><a href="housing-instability.html#cb43-64" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">b =</span> <span class="fl">0.2</span> <span class="sc">*</span> text_scale, <span class="at">t =</span> <span class="fl">0.2</span> <span class="sc">*</span> text_scale, <span class="at">unit =</span> <span class="st">&quot;cm&quot;</span>)),</span>
<span id="cb43-65"><a href="housing-instability.html#cb43-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-66"><a href="housing-instability.html#cb43-66" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text    =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">24</span> <span class="sc">*</span> text_scale),</span>
<span id="cb43-67"><a href="housing-instability.html#cb43-67" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.title   =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">30</span> <span class="sc">*</span> text_scale),</span>
<span id="cb43-68"><a href="housing-instability.html#cb43-68" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="fl">0.3</span> <span class="sc">*</span> text_scale, <span class="at">unit =</span> <span class="st">&quot;cm&quot;</span>)),</span>
<span id="cb43-69"><a href="housing-instability.html#cb43-69" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">r =</span> <span class="fl">0.3</span> <span class="sc">*</span> text_scale, <span class="at">unit =</span> <span class="st">&quot;cm&quot;</span>)),</span>
<span id="cb43-70"><a href="housing-instability.html#cb43-70" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb43-71"><a href="housing-instability.html#cb43-71" aria-hidden="true" tabindex="-1"></a>          <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">42</span> <span class="sc">*</span> text_scale,</span>
<span id="cb43-72"><a href="housing-instability.html#cb43-72" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">hjust =</span> .<span class="dv">5</span>,</span>
<span id="cb43-73"><a href="housing-instability.html#cb43-73" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">b =</span> <span class="fl">0.4</span> <span class="sc">*</span> text_scale, <span class="at">unit =</span> <span class="st">&quot;cm&quot;</span>)))</span>
<span id="cb43-74"><a href="housing-instability.html#cb43-74" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-75"><a href="housing-instability.html#cb43-75" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.na</span>(y_min)) {</span>
<span id="cb43-76"><a href="housing-instability.html#cb43-76" aria-hidden="true" tabindex="-1"></a>    plt <span class="ot">&lt;-</span> plt <span class="sc">+</span> <span class="fu">ylim</span>(y_min, <span class="cn">NA</span>)</span>
<span id="cb43-77"><a href="housing-instability.html#cb43-77" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb43-78"><a href="housing-instability.html#cb43-78" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-79"><a href="housing-instability.html#cb43-79" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(units <span class="sc">==</span> <span class="st">&quot;Dollars&quot;</span>) plt <span class="ot">&lt;-</span> plt <span class="sc">+</span> <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>dollar)</span>
<span id="cb43-80"><a href="housing-instability.html#cb43-80" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(units <span class="sc">==</span> <span class="st">&quot;Percent&quot;</span>) plt <span class="ot">&lt;-</span> plt <span class="sc">+</span> <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="cf">function</span>(x) scales<span class="sc">::</span><span class="fu">percent</span>(x, <span class="at">accuracy =</span> <span class="dv">1</span>, <span class="at">scale =</span> <span class="dv">1</span>))</span>
<span id="cb43-81"><a href="housing-instability.html#cb43-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-82"><a href="housing-instability.html#cb43-82" aria-hidden="true" tabindex="-1"></a>  plt <span class="ot">&lt;-</span> plt <span class="sc">+</span></span>
<span id="cb43-83"><a href="housing-instability.html#cb43-83" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb43-84"><a href="housing-instability.html#cb43-84" aria-hidden="true" tabindex="-1"></a>      <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>), <span class="co"># bg of the panel</span></span>
<span id="cb43-85"><a href="housing-instability.html#cb43-85" aria-hidden="true" tabindex="-1"></a>      <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>), <span class="co"># bg of the plot</span></span>
<span id="cb43-86"><a href="housing-instability.html#cb43-86" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="st">&quot;transparent&quot;</span>), <span class="co"># get rid of legend bg</span></span>
<span id="cb43-87"><a href="housing-instability.html#cb43-87" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.box.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="st">&quot;transparent&quot;</span>), <span class="co"># get rid of legend panel bg</span></span>
<span id="cb43-88"><a href="housing-instability.html#cb43-88" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>,<span class="at">colour =</span> <span class="cn">NA</span>)</span>
<span id="cb43-89"><a href="housing-instability.html#cb43-89" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb43-90"><a href="housing-instability.html#cb43-90" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-91"><a href="housing-instability.html#cb43-91" aria-hidden="true" tabindex="-1"></a>  plt</span>
<span id="cb43-92"><a href="housing-instability.html#cb43-92" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb43-93"><a href="housing-instability.html#cb43-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-94"><a href="housing-instability.html#cb43-94" aria-hidden="true" tabindex="-1"></a>mortgage_county <span class="sc">%&lt;&gt;%</span> <span class="fu">filter</span>(FIPS <span class="sc">==</span> <span class="st">&quot;21111&quot;</span>, sex<span class="sc">==</span><span class="st">&quot;total&quot;</span>, race <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;black&quot;</span>, <span class="st">&quot;white&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb43-95"><a href="housing-instability.html#cb43-95" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Race =</span> race) <span class="sc">%&gt;%</span></span>
<span id="cb43-96"><a href="housing-instability.html#cb43-96" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Race =</span> <span class="fu">str_to_title</span>(Race))</span>
<span id="cb43-97"><a href="housing-instability.html#cb43-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-98"><a href="housing-instability.html#cb43-98" aria-hidden="true" tabindex="-1"></a><span class="fu">plt_by</span>(mortgage_county, Race, loan_number_per_100, <span class="st">&quot;Mortgages by race&quot;</span>, <span class="at">y_axis =</span> <span class="st">&quot;Mortgages per 100 People&quot;</span>, <span class="at">y_min =</span> <span class="dv">0</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/mortgage_number_race-1.png" width="672" /></p>
</div>
<div id="mortgage-dollars-by-race" class="section level3" number="3.9.3">
<h3><span class="header-section-number">3.9.3</span> Mortgage Dollars by race</h3>
<p>The racial disparity is mortgages is even larger when you incorporate the dollar amount of mortgages issues. In 2019, white residents received $2.60 in mortgages for every $1 that Black residents received after adjusting for population size.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="housing-instability.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plt_by</span>(mortgage_county, Race, loan_amount_pp, <span class="st">&quot;Mortgage Lending by race&quot;</span>, <span class="at">y_axis =</span> <span class="st">&quot;Dollars per 100 People&quot;</span>, <span class="at">y_min =</span> <span class="dv">0</span>,</span>
<span id="cb44-2"><a href="housing-instability.html#cb44-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">units =</span> <span class="st">&quot;Dollars&quot;</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/mortgage_dollars_race-1.png" width="672" /></p>
</div>
<div id="denial-rates-by-race" class="section level3" number="3.9.4">
<h3><span class="header-section-number">3.9.4</span> Denial Rates by Race</h3>
<p>Black residents are denied mortgages at a rate roughly twice that of white residents. The mortgage denial rate for Black residents has decreased from a high of 29% in 2008 to a low of 14% in 2019. However, it has not shown signs of decreasing in recent years, and Black residents are more likely to be impacted by the economic impacts of COVID-19, worsening the disparity in 2020 and beyond.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="housing-instability.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plt_by</span>(mortgage_county, Race, denial, <span class="st">&quot;Mortgage Denial by race&quot;</span>, <span class="at">y_axis =</span> <span class="st">&quot;Denial Rate&quot;</span>, <span class="at">y_min =</span> <span class="dv">0</span>, <span class="at">units=</span> <span class="st">&quot;Percent&quot;</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/mortgage_denial_race-1.png" width="672" /></p>
</div>
<div id="denial-rates-by-geography" class="section level3" number="3.9.5">
<h3><span class="header-section-number">3.9.5</span> Denial Rates by Geography</h3>
<p>A major factor in mortgage availability is denial rates. While some areas of town saw few to no mortgage denials, people in many parts of West Louisville experienced denial rates of 30 to 40%.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="housing-instability.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make_map</span>(denial, <span class="at">title =</span> <span class="st">&quot;Mortgage Denial Rate in 2019&quot;</span>, </span>
<span id="cb46-2"><a href="housing-instability.html#cb46-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Percent&quot;</span>, </span>
<span id="cb46-3"><a href="housing-instability.html#cb46-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Denial rate&quot;</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/mortgage_denial-1.png" width="672" /></p>
</div>
<div id="interest-rates-by-geography" class="section level3" number="3.9.6">
<h3><span class="header-section-number">3.9.6</span> Interest Rates by geography</h3>
<p>For the mortgages that were issued, interest rates varied from around 3.5% to around 5%. While the average interest rate was around 4% for the much of East Louisville, average interest rates in West Louisville were closer to 5%. A 30-year mortgage with an interest rate of 5% requires monthly payments that are 13% higher than a mortgage with an interest rate of 4%.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="housing-instability.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make_map</span>(rate, <span class="at">title =</span> <span class="st">&quot;Mortgage Interest Rate in 2019&quot;</span>, </span>
<span id="cb47-2"><a href="housing-instability.html#cb47-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">legend =</span> <span class="st">&quot;Percent&quot;</span>, </span>
<span id="cb47-3"><a href="housing-instability.html#cb47-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">&quot;Interest rate&quot;</span>)</span></code></pre></div>
<p><img src="urban_index_files/figure-html/mortgage_interest-1.png" width="672" /></p>
</div>
</div>
<div id="housing-price-changes" class="section level2" number="3.10">
<h2><span class="header-section-number">3.10</span> Housing Price Changes</h2>
<p>As Louisville grows, increasing home prices reflect changes in inflation and increasing demand for homes. Long-term growth in home prices helps homeowners build equity and wealth. Short-term appreciation can be a boon to homeowners with the finances to stay in their home, though it also causes many homeowners and renters to be dislocated from their neighborhood.</p>
<div id="long-term-appreciation" class="section level3" number="3.10.1">
<h3><span class="header-section-number">3.10.1</span> Long-term appreciation</h3>
<p>This map shows the change in existing home prices across zip codes since 2000, controlling for new construction. Since 2000, existing homes in Louisville have increased in value by an average of 57% (an average of about 2.4% per year). However, not every area of the city has benefited equally from this growth. Home prices in zip code 40204, which contains the Upper Highlands and Germantown, have more than doubled since 2000. While many zip codes close to downtown also saw high growth, many parts of West Louisville saw slow growth, and homes in 40212 lost value.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="housing-instability.html#cb48-1" aria-hidden="true" tabindex="-1"></a>lou_num <span class="ot">&lt;-</span> HPI_county <span class="sc">%&gt;%</span> <span class="fu">filter</span>(FIPS <span class="sc">==</span> <span class="st">&quot;21111&quot;</span>)</span>
<span id="cb48-2"><a href="housing-instability.html#cb48-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-3"><a href="housing-instability.html#cb48-3" aria-hidden="true" tabindex="-1"></a>housing_price_index <span class="ot">&lt;-</span> HPI_zip</span>
<span id="cb48-4"><a href="housing-instability.html#cb48-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-5"><a href="housing-instability.html#cb48-5" aria-hidden="true" tabindex="-1"></a>housing_price_index <span class="sc">%&lt;&gt;%</span> </span>
<span id="cb48-6"><a href="housing-instability.html#cb48-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2019</span>)</span>
<span id="cb48-7"><a href="housing-instability.html#cb48-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-8"><a href="housing-instability.html#cb48-8" aria-hidden="true" tabindex="-1"></a>map_zip <span class="sc">%&lt;&gt;%</span> <span class="fu">left_join</span>(housing_price_index, <span class="at">by =</span> <span class="st">&quot;zip&quot;</span>)</span>
<span id="cb48-9"><a href="housing-instability.html#cb48-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-10"><a href="housing-instability.html#cb48-10" aria-hidden="true" tabindex="-1"></a>hpi_change <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Lost value&quot;</span>, <span class="st">&quot;0% - 25%&quot;</span>, <span class="st">&quot;25% - 50%&quot;</span>, <span class="st">&quot;50% - 75%&quot;</span>, <span class="st">&quot;75% - 100%&quot;</span>, <span class="st">&quot;100% - 125%&quot;</span>)</span>
<span id="cb48-11"><a href="housing-instability.html#cb48-11" aria-hidden="true" tabindex="-1"></a>hpi_2015_change <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Lost value&quot;</span>, <span class="st">&quot;0% - 10%&quot;</span>, <span class="st">&quot;10% - 20%&quot;</span>, <span class="st">&quot;20% - 30%&quot;</span>, <span class="st">&quot;30% - 40%&quot;</span>, <span class="st">&quot;40% - 50%&quot;</span>)</span>
<span id="cb48-12"><a href="housing-instability.html#cb48-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-13"><a href="housing-instability.html#cb48-13" aria-hidden="true" tabindex="-1"></a>map_zip <span class="sc">%&lt;&gt;%</span></span>
<span id="cb48-14"><a href="housing-instability.html#cb48-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb48-15"><a href="housing-instability.html#cb48-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">hpi_fill =</span> </span>
<span id="cb48-16"><a href="housing-instability.html#cb48-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">case_when</span>(</span>
<span id="cb48-17"><a href="housing-instability.html#cb48-17" aria-hidden="true" tabindex="-1"></a>        HPI <span class="sc">&lt;</span> <span class="dv">100</span> <span class="sc">~</span> hpi_change[<span class="dv">1</span>],</span>
<span id="cb48-18"><a href="housing-instability.html#cb48-18" aria-hidden="true" tabindex="-1"></a>        HPI <span class="sc">&lt;</span> <span class="dv">125</span> <span class="sc">~</span> hpi_change[<span class="dv">2</span>],</span>
<span id="cb48-19"><a href="housing-instability.html#cb48-19" aria-hidden="true" tabindex="-1"></a>        HPI <span class="sc">&lt;</span> <span class="dv">150</span> <span class="sc">~</span> hpi_change[<span class="dv">3</span>],</span>
<span id="cb48-20"><a href="housing-instability.html#cb48-20" aria-hidden="true" tabindex="-1"></a>        HPI <span class="sc">&lt;</span> <span class="dv">175</span> <span class="sc">~</span> hpi_change[<span class="dv">4</span>],</span>
<span id="cb48-21"><a href="housing-instability.html#cb48-21" aria-hidden="true" tabindex="-1"></a>        HPI <span class="sc">&lt;</span> <span class="dv">200</span> <span class="sc">~</span> hpi_change[<span class="dv">5</span>],</span>
<span id="cb48-22"><a href="housing-instability.html#cb48-22" aria-hidden="true" tabindex="-1"></a>        HPI <span class="sc">&lt;</span> <span class="dv">225</span> <span class="sc">~</span> hpi_change[<span class="dv">6</span>],</span>
<span id="cb48-23"><a href="housing-instability.html#cb48-23" aria-hidden="true" tabindex="-1"></a>        <span class="fu">is.na</span>(HPI) <span class="sc">~</span> <span class="cn">NA_character_</span>,</span>
<span id="cb48-24"><a href="housing-instability.html#cb48-24" aria-hidden="true" tabindex="-1"></a>        <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;error!!&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb48-25"><a href="housing-instability.html#cb48-25" aria-hidden="true" tabindex="-1"></a>      <span class="fu">factor</span>(<span class="at">levels =</span> hpi_change, <span class="at">ordered =</span> <span class="cn">TRUE</span>),</span>
<span id="cb48-26"><a href="housing-instability.html#cb48-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">hpi_2015_fill =</span> </span>
<span id="cb48-27"><a href="housing-instability.html#cb48-27" aria-hidden="true" tabindex="-1"></a>      <span class="fu">case_when</span>(</span>
<span id="cb48-28"><a href="housing-instability.html#cb48-28" aria-hidden="true" tabindex="-1"></a>        HPI_2015 <span class="sc">&lt;</span> <span class="dv">0</span> <span class="sc">~</span> hpi_2015_change[<span class="dv">1</span>],</span>
<span id="cb48-29"><a href="housing-instability.html#cb48-29" aria-hidden="true" tabindex="-1"></a>        HPI_2015 <span class="sc">&lt;</span> <span class="dv">10</span> <span class="sc">~</span> hpi_2015_change[<span class="dv">2</span>],</span>
<span id="cb48-30"><a href="housing-instability.html#cb48-30" aria-hidden="true" tabindex="-1"></a>        HPI_2015 <span class="sc">&lt;</span> <span class="dv">20</span> <span class="sc">~</span> hpi_2015_change[<span class="dv">3</span>],</span>
<span id="cb48-31"><a href="housing-instability.html#cb48-31" aria-hidden="true" tabindex="-1"></a>        HPI_2015 <span class="sc">&lt;</span> <span class="dv">30</span> <span class="sc">~</span> hpi_2015_change[<span class="dv">4</span>],</span>
<span id="cb48-32"><a href="housing-instability.html#cb48-32" aria-hidden="true" tabindex="-1"></a>        HPI_2015 <span class="sc">&lt;</span> <span class="dv">40</span> <span class="sc">~</span> hpi_2015_change[<span class="dv">5</span>],</span>
<span id="cb48-33"><a href="housing-instability.html#cb48-33" aria-hidden="true" tabindex="-1"></a>        HPI_2015 <span class="sc">&lt;</span> <span class="dv">50</span> <span class="sc">~</span> hpi_2015_change[<span class="dv">6</span>],</span>
<span id="cb48-34"><a href="housing-instability.html#cb48-34" aria-hidden="true" tabindex="-1"></a>        <span class="fu">is.na</span>(HPI) <span class="sc">~</span> <span class="cn">NA_character_</span>,</span>
<span id="cb48-35"><a href="housing-instability.html#cb48-35" aria-hidden="true" tabindex="-1"></a>        <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;error!!&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb48-36"><a href="housing-instability.html#cb48-36" aria-hidden="true" tabindex="-1"></a>      <span class="fu">factor</span>(<span class="at">levels =</span> hpi_2015_change, <span class="at">ordered =</span> <span class="cn">TRUE</span>))</span>
<span id="cb48-37"><a href="housing-instability.html#cb48-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-38"><a href="housing-instability.html#cb48-38" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(map_zip) <span class="sc">+</span> </span>
<span id="cb48-39"><a href="housing-instability.html#cb48-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> hpi_fill)) <span class="sc">+</span></span>
<span id="cb48-40"><a href="housing-instability.html#cb48-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> viridis<span class="sc">::</span><span class="fu">viridis</span>(<span class="dv">6</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>), <span class="at">na.value =</span> <span class="st">&quot;grey&quot;</span>) <span class="sc">+</span></span>
<span id="cb48-41"><a href="housing-instability.html#cb48-41" aria-hidden="true" tabindex="-1"></a>  <span class="co">#scale_fill_viridis() +</span></span>
<span id="cb48-42"><a href="housing-instability.html#cb48-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">22</span>, <span class="at">base_family =</span> <span class="st">&quot;Montserrat&quot;</span>) <span class="sc">+</span></span>
<span id="cb48-43"><a href="housing-instability.html#cb48-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb48-44"><a href="housing-instability.html#cb48-44" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb48-45"><a href="housing-instability.html#cb48-45" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb48-46"><a href="housing-instability.html#cb48-46" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb48-47"><a href="housing-instability.html#cb48-47" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.border =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb48-48"><a href="housing-instability.html#cb48-48" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb48-49"><a href="housing-instability.html#cb48-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Change in housing prices since 2000&quot;</span>) <span class="sc">+</span></span>
<span id="cb48-50"><a href="housing-instability.html#cb48-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb48-51"><a href="housing-instability.html#cb48-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>), <span class="co"># bg of the panel</span></span>
<span id="cb48-52"><a href="housing-instability.html#cb48-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>), <span class="co"># bg of the plot</span></span>
<span id="cb48-53"><a href="housing-instability.html#cb48-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="st">&quot;transparent&quot;</span>), <span class="co"># get rid of legend bg</span></span>
<span id="cb48-54"><a href="housing-instability.html#cb48-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.box.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="st">&quot;transparent&quot;</span>), <span class="co"># get rid of legend panel bg</span></span>
<span id="cb48-55"><a href="housing-instability.html#cb48-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>,<span class="at">colour =</span> <span class="cn">NA</span>))</span></code></pre></div>
<p><img src="urban_index_files/figure-html/long_term_appreciation-1.png" width="672" /></p>
</div>
<div id="short-term-appreciation" class="section level3" number="3.10.2">
<h3><span class="header-section-number">3.10.2</span> Short-term appreciation</h3>
<p>Looking at the growth since 2015 highlights zip codes where changes in home prices have been very acute. The average home in Louisville increased in value by 21% between 2015 and 2019. The vast majority of zip codes saw total growth of 10% - 30%, while changes in home prices for zip codes in West Louisville range from a decrease of 30% in 40212 to an increase of 40% in 40203. The rapid price increase in 40203, which contains parts of Russell and Old Louisville, threaten to displace many residents. In 40203, home prices across Louisville increased by an average of 8.8% per year.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="housing-instability.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(map_zip) <span class="sc">+</span> </span>
<span id="cb49-2"><a href="housing-instability.html#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> hpi_2015_fill)) <span class="sc">+</span></span>
<span id="cb49-3"><a href="housing-instability.html#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> viridis<span class="sc">::</span><span class="fu">viridis</span>(<span class="dv">6</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>), <span class="at">na.value =</span> <span class="st">&quot;grey&quot;</span>) <span class="sc">+</span></span>
<span id="cb49-4"><a href="housing-instability.html#cb49-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#scale_fill_viridis() +</span></span>
<span id="cb49-5"><a href="housing-instability.html#cb49-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_size =</span> <span class="dv">22</span>, <span class="at">base_family =</span> <span class="st">&quot;Montserrat&quot;</span>) <span class="sc">+</span></span>
<span id="cb49-6"><a href="housing-instability.html#cb49-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb49-7"><a href="housing-instability.html#cb49-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb49-8"><a href="housing-instability.html#cb49-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb49-9"><a href="housing-instability.html#cb49-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb49-10"><a href="housing-instability.html#cb49-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.border =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb49-11"><a href="housing-instability.html#cb49-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb49-12"><a href="housing-instability.html#cb49-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Change in housing prices since 2015&quot;</span>) <span class="sc">+</span></span>
<span id="cb49-13"><a href="housing-instability.html#cb49-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb49-14"><a href="housing-instability.html#cb49-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>), <span class="co"># bg of the panel</span></span>
<span id="cb49-15"><a href="housing-instability.html#cb49-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>), <span class="co"># bg of the plot</span></span>
<span id="cb49-16"><a href="housing-instability.html#cb49-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="st">&quot;transparent&quot;</span>), <span class="co"># get rid of legend bg</span></span>
<span id="cb49-17"><a href="housing-instability.html#cb49-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.box.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="st">&quot;transparent&quot;</span>), <span class="co"># get rid of legend panel bg</span></span>
<span id="cb49-18"><a href="housing-instability.html#cb49-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>,<span class="at">colour =</span> <span class="cn">NA</span>))</span></code></pre></div>
<p><img src="urban_index_files/figure-html/short_term_appreciation-1.png" width="672" /></p>
</div>
</div>
<div id="housing-availability" class="section level2" number="3.11">
<h2><span class="header-section-number">3.11</span> Housing Availability</h2>
<p>Housing must be both affordable and available for families to have housing that meets their needs. Based on framework from the Housing Needs Assessment, we compare households’ incomes to the price of housing available to them.</p>
<p>We use the Area Median Income (AMI) to group households and housing units. In 2019, the AMI for Louisville was $76,400 for a family of four. (The AMI adjusts for household size.) We also use AMI to group homes and apartments by determining whether the housing would be affordable to households in that income group. Housing is affordable is a household spends less than 30% of their income on housing costs. For a fuller explanation of AMI, see the next section.</p>
<p>We find that households making less than 30% of AMI do not have enough housing units available to them. While 39,000 households have incomes below 30% of AMI, there are only enough affordable and available units for about half of them of them.</p>
<p>This creates an affordability gap for households making between 30% and 50% of AMI. While there are actually more housing units than households at this income level, many of them are occupied by households with lower incomes, making them unavailable. The same problem exists for households in the 80% AMI income group.</p>
<p>At higher income levels, we find that households generally have access to affordable housing.</p>
<p>Creating housing opportunities for households below 30% of AMI would help ease the housing gap not only for them, but for households in higher income groups as well.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="housing-instability.html#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb50-2"><a href="housing-instability.html#cb50-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-3"><a href="housing-instability.html#cb50-3" aria-hidden="true" tabindex="-1"></a>acs_micro_houses_ddi <span class="ot">&lt;-</span> ipumsr<span class="sc">::</span><span class="fu">read_ipums_ddi</span>(<span class="st">&quot;housing_data/usa_00083.xml&quot;</span>)</span>
<span id="cb50-4"><a href="housing-instability.html#cb50-4" aria-hidden="true" tabindex="-1"></a>acs_houses_unoccupied <span class="ot">&lt;-</span> ipumsr<span class="sc">::</span><span class="fu">read_ipums_micro</span>(acs_micro_houses_ddi, <span class="at">verbose=</span>F)</span>
<span id="cb50-5"><a href="housing-instability.html#cb50-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-6"><a href="housing-instability.html#cb50-6" aria-hidden="true" tabindex="-1"></a>acs_houses_unoccupied <span class="sc">%&lt;&gt;%</span> <span class="fu">clean_acs_micro</span>()</span>
<span id="cb50-7"><a href="housing-instability.html#cb50-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-8"><a href="housing-instability.html#cb50-8" aria-hidden="true" tabindex="-1"></a>acs_houses_unoccupied <span class="sc">%&lt;&gt;%</span> </span>
<span id="cb50-9"><a href="housing-instability.html#cb50-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(FIPS <span class="sc">==</span> <span class="st">&quot;21111&quot;</span>,</span>
<span id="cb50-10"><a href="housing-instability.html#cb50-10" aria-hidden="true" tabindex="-1"></a>         year <span class="sc">%in%</span> <span class="dv">2015</span><span class="sc">:</span><span class="dv">2019</span>)</span>
<span id="cb50-11"><a href="housing-instability.html#cb50-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-12"><a href="housing-instability.html#cb50-12" aria-hidden="true" tabindex="-1"></a>acs_micro <span class="ot">&lt;-</span> arrow<span class="sc">::</span><span class="fu">read_feather</span>(<span class="st">&quot;../glpdata/data-raw/microdata/acs_micro.feather&quot;</span>)</span>
<span id="cb50-13"><a href="housing-instability.html#cb50-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-14"><a href="housing-instability.html#cb50-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Create table of AMI limits based on HUD information</span></span>
<span id="cb50-15"><a href="housing-instability.html#cb50-15" aria-hidden="true" tabindex="-1"></a>mult <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">0.7</span>, <span class="fl">0.8</span>, <span class="fl">0.9</span>, <span class="dv">1</span> <span class="sc">+</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fl">0.64</span>, <span class="at">by =</span> <span class="fl">0.08</span>))</span>
<span id="cb50-16"><a href="housing-instability.html#cb50-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-17"><a href="housing-instability.html#cb50-17" aria-hidden="true" tabindex="-1"></a>mult_br <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">0.7</span>, <span class="fl">0.75</span>, <span class="fl">0.9</span>, <span class="fl">1.04</span> <span class="sc">+</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fl">0.88</span>, <span class="at">by =</span> <span class="fl">0.12</span>))</span>
<span id="cb50-18"><a href="housing-instability.html#cb50-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-19"><a href="housing-instability.html#cb50-19" aria-hidden="true" tabindex="-1"></a>ami_table_16 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb50-20"><a href="housing-instability.html#cb50-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">hh_size =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>),</span>
<span id="cb50-21"><a href="housing-instability.html#cb50-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">ami30    =</span> <span class="fu">c</span>(<span class="dv">15050</span>, <span class="dv">17200</span>, <span class="dv">20780</span>, <span class="dv">25100</span>, <span class="dv">29420</span>, <span class="dv">33740</span>, <span class="dv">38060</span>, <span class="dv">42380</span>, </span>
<span id="cb50-22"><a href="housing-instability.html#cb50-22" aria-hidden="true" tabindex="-1"></a>               plyr<span class="sc">::</span><span class="fu">round_any</span>(<span class="dv">42380</span> <span class="sc">+</span> (<span class="dv">42380</span> <span class="sc">/</span> <span class="fl">1.32</span> <span class="sc">*</span> <span class="fl">0.08</span>) <span class="sc">*</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">50</span>, ceiling)),</span>
<span id="cb50-23"><a href="housing-instability.html#cb50-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">ami50    =</span> <span class="fu">c</span>(<span class="dv">25050</span>, <span class="dv">28600</span>, <span class="dv">32200</span>, <span class="dv">35750</span>, <span class="dv">38650</span>, <span class="dv">41500</span>, <span class="dv">44350</span>, <span class="dv">47200</span>, </span>
<span id="cb50-24"><a href="housing-instability.html#cb50-24" aria-hidden="true" tabindex="-1"></a>               plyr<span class="sc">::</span><span class="fu">round_any</span>(<span class="dv">47200</span> <span class="sc">+</span> (<span class="dv">47200</span> <span class="sc">/</span> <span class="fl">1.32</span> <span class="sc">*</span> <span class="fl">0.08</span>) <span class="sc">*</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">50</span>, ceiling)),</span>
<span id="cb50-25"><a href="housing-instability.html#cb50-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">ami80    =</span> <span class="fu">c</span>(<span class="dv">40050</span>, <span class="dv">45800</span>, <span class="dv">51500</span>, <span class="dv">57200</span>, <span class="dv">61800</span>, <span class="dv">66400</span>, <span class="dv">70950</span>, <span class="dv">75550</span>, </span>
<span id="cb50-26"><a href="housing-instability.html#cb50-26" aria-hidden="true" tabindex="-1"></a>               plyr<span class="sc">::</span><span class="fu">round_any</span>(<span class="dv">75550</span> <span class="sc">+</span> (<span class="dv">75550</span> <span class="sc">/</span> <span class="fl">1.32</span> <span class="sc">*</span> <span class="fl">0.08</span>) <span class="sc">*</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">50</span>, ceiling)),</span>
<span id="cb50-27"><a href="housing-instability.html#cb50-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">ami100   =</span> <span class="dv">71500</span> <span class="sc">*</span> mult,</span>
<span id="cb50-28"><a href="housing-instability.html#cb50-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">ami150   =</span> <span class="dv">71500</span> <span class="sc">*</span> mult <span class="sc">*</span> <span class="fl">1.5</span>,</span>
<span id="cb50-29"><a href="housing-instability.html#cb50-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">ami200   =</span> <span class="dv">71500</span> <span class="sc">*</span> mult <span class="sc">*</span> <span class="dv">2</span>)</span>
<span id="cb50-30"><a href="housing-instability.html#cb50-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-31"><a href="housing-instability.html#cb50-31" aria-hidden="true" tabindex="-1"></a>ami_table_16_house <span class="ot">&lt;-</span> ami_table_16 <span class="sc">%&gt;%</span></span>
<span id="cb50-32"><a href="housing-instability.html#cb50-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb50-33"><a href="housing-instability.html#cb50-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">bedrooms =</span> hh_size <span class="sc">-</span> <span class="dv">1</span>,</span>
<span id="cb50-34"><a href="housing-instability.html#cb50-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">ami30_house =</span> ami30,</span>
<span id="cb50-35"><a href="housing-instability.html#cb50-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">ami50_house =</span> ami50,</span>
<span id="cb50-36"><a href="housing-instability.html#cb50-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">ami80_house =</span> ami80,</span>
<span id="cb50-37"><a href="housing-instability.html#cb50-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">ami100_house =</span> ami100,</span>
<span id="cb50-38"><a href="housing-instability.html#cb50-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">ami150_house =</span> ami150, </span>
<span id="cb50-39"><a href="housing-instability.html#cb50-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">ami200_house =</span> ami200)</span>
<span id="cb50-40"><a href="housing-instability.html#cb50-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-41"><a href="housing-instability.html#cb50-41" aria-hidden="true" tabindex="-1"></a>ami_table_19 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb50-42"><a href="housing-instability.html#cb50-42" aria-hidden="true" tabindex="-1"></a>  <span class="at">hh_size =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>),</span>
<span id="cb50-43"><a href="housing-instability.html#cb50-43" aria-hidden="true" tabindex="-1"></a>  <span class="at">ami30    =</span> <span class="fu">c</span>(<span class="dv">16050</span>, <span class="dv">18350</span>, <span class="dv">21330</span>, <span class="dv">25750</span>, <span class="dv">30170</span>, <span class="dv">34590</span>, <span class="dv">39010</span>, <span class="dv">43430</span>, </span>
<span id="cb50-44"><a href="housing-instability.html#cb50-44" aria-hidden="true" tabindex="-1"></a>               plyr<span class="sc">::</span><span class="fu">round_any</span>(<span class="dv">43430</span> <span class="sc">+</span> (<span class="dv">43430</span> <span class="sc">/</span> <span class="fl">1.32</span> <span class="sc">*</span> <span class="fl">0.08</span>) <span class="sc">*</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">50</span>, ceiling)),</span>
<span id="cb50-45"><a href="housing-instability.html#cb50-45" aria-hidden="true" tabindex="-1"></a>  <span class="at">ami50    =</span> <span class="fu">c</span>(<span class="dv">26750</span>, <span class="dv">30600</span>, <span class="dv">34400</span>, <span class="dv">38200</span>, <span class="dv">41300</span>, <span class="dv">44350</span>, <span class="dv">47400</span>, <span class="dv">50450</span>,</span>
<span id="cb50-46"><a href="housing-instability.html#cb50-46" aria-hidden="true" tabindex="-1"></a>               plyr<span class="sc">::</span><span class="fu">round_any</span>(<span class="dv">50450</span> <span class="sc">+</span> (<span class="dv">50450</span> <span class="sc">/</span> <span class="fl">1.32</span> <span class="sc">*</span> <span class="fl">0.08</span>) <span class="sc">*</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">50</span>, ceiling)),</span>
<span id="cb50-47"><a href="housing-instability.html#cb50-47" aria-hidden="true" tabindex="-1"></a>  <span class="at">ami80    =</span> <span class="fu">c</span>(<span class="dv">42800</span>, <span class="dv">48900</span>, <span class="dv">55000</span>, <span class="dv">61100</span>, <span class="dv">66000</span>, <span class="dv">70900</span>, <span class="dv">75800</span>, <span class="dv">80700</span>, </span>
<span id="cb50-48"><a href="housing-instability.html#cb50-48" aria-hidden="true" tabindex="-1"></a>               plyr<span class="sc">::</span><span class="fu">round_any</span>(<span class="dv">75550</span> <span class="sc">+</span> (<span class="dv">75550</span> <span class="sc">/</span> <span class="fl">1.32</span> <span class="sc">*</span> <span class="fl">0.08</span>) <span class="sc">*</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">50</span>, ceiling)),</span>
<span id="cb50-49"><a href="housing-instability.html#cb50-49" aria-hidden="true" tabindex="-1"></a>  <span class="at">ami100   =</span> plyr<span class="sc">::</span><span class="fu">round_any</span>(<span class="dv">76400</span> <span class="sc">*</span> mult, <span class="dv">50</span>, ceiling),</span>
<span id="cb50-50"><a href="housing-instability.html#cb50-50" aria-hidden="true" tabindex="-1"></a>  <span class="at">ami150   =</span> plyr<span class="sc">::</span><span class="fu">round_any</span>(<span class="dv">76400</span> <span class="sc">*</span> mult <span class="sc">*</span> <span class="fl">1.5</span>, <span class="dv">50</span>, ceiling),</span>
<span id="cb50-51"><a href="housing-instability.html#cb50-51" aria-hidden="true" tabindex="-1"></a>  <span class="at">ami200   =</span> plyr<span class="sc">::</span><span class="fu">round_any</span>(<span class="dv">76400</span> <span class="sc">*</span> mult <span class="sc">*</span> <span class="dv">2</span>, <span class="dv">50</span>, ceiling))</span>
<span id="cb50-52"><a href="housing-instability.html#cb50-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-53"><a href="housing-instability.html#cb50-53" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate household size, subset, and add AMI dataframe</span></span>
<span id="cb50-54"><a href="housing-instability.html#cb50-54" aria-hidden="true" tabindex="-1"></a>acs_micro <span class="sc">%&lt;&gt;%</span></span>
<span id="cb50-55"><a href="housing-instability.html#cb50-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb50-56"><a href="housing-instability.html#cb50-56" aria-hidden="true" tabindex="-1"></a>    FIPS <span class="sc">==</span> <span class="st">&quot;21111&quot;</span>,</span>
<span id="cb50-57"><a href="housing-instability.html#cb50-57" aria-hidden="true" tabindex="-1"></a>    year <span class="sc">%in%</span> <span class="dv">2015</span><span class="sc">:</span><span class="dv">2019</span>,</span>
<span id="cb50-58"><a href="housing-instability.html#cb50-58" aria-hidden="true" tabindex="-1"></a>    OWNERSHP <span class="sc">!=</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb50-59"><a href="housing-instability.html#cb50-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, SERIAL) <span class="sc">%&gt;%</span></span>
<span id="cb50-60"><a href="housing-instability.html#cb50-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">hh_size =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb50-61"><a href="housing-instability.html#cb50-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb50-62"><a href="housing-instability.html#cb50-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(PERNUM <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb50-63"><a href="housing-instability.html#cb50-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-64"><a href="housing-instability.html#cb50-64" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate adjustment factor for renters who did not report utilty information</span></span>
<span id="cb50-65"><a href="housing-instability.html#cb50-65" aria-hidden="true" tabindex="-1"></a>utility_adjust <span class="ot">&lt;-</span> acs_micro <span class="sc">%&gt;%</span></span>
<span id="cb50-66"><a href="housing-instability.html#cb50-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb50-67"><a href="housing-instability.html#cb50-67" aria-hidden="true" tabindex="-1"></a>    <span class="co">#vacant |</span></span>
<span id="cb50-68"><a href="housing-instability.html#cb50-68" aria-hidden="true" tabindex="-1"></a>    RENTGRS <span class="sc">&gt;</span> RENT) <span class="sc">%&gt;%</span></span>
<span id="cb50-69"><a href="housing-instability.html#cb50-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">utility_est =</span> (RENTGRS <span class="sc">-</span> RENT) <span class="sc">/</span> RENT) <span class="sc">%&gt;%</span></span>
<span id="cb50-70"><a href="housing-instability.html#cb50-70" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">utiity_est =</span> Hmisc<span class="sc">::</span><span class="fu">wtd.quantile</span>(utility_est, HHWT, <span class="at">probs =</span> <span class="fl">0.5</span>, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span></span>
<span id="cb50-71"><a href="housing-instability.html#cb50-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(utiity_est) <span class="sc">%&gt;%</span></span>
<span id="cb50-72"><a href="housing-instability.html#cb50-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unname</span>()</span>
<span id="cb50-73"><a href="housing-instability.html#cb50-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-74"><a href="housing-instability.html#cb50-74" aria-hidden="true" tabindex="-1"></a><span class="co"># Process microdata</span></span>
<span id="cb50-75"><a href="housing-instability.html#cb50-75" aria-hidden="true" tabindex="-1"></a>acs_micro <span class="sc">%&lt;&gt;%</span></span>
<span id="cb50-76"><a href="housing-instability.html#cb50-76" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb50-77"><a href="housing-instability.html#cb50-77" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb50-78"><a href="housing-instability.html#cb50-78" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Recode missing values</span></span>
<span id="cb50-79"><a href="housing-instability.html#cb50-79" aria-hidden="true" tabindex="-1"></a>    <span class="at">OWNCOST  =</span> <span class="fu">replace</span>(OWNCOST, OWNCOST <span class="sc">==</span> <span class="dv">99999</span>, <span class="cn">NA</span>),</span>
<span id="cb50-80"><a href="housing-instability.html#cb50-80" aria-hidden="true" tabindex="-1"></a>    <span class="at">HHINCOME =</span> <span class="fu">replace</span>(HHINCOME, HHINCOME <span class="sc">==</span> <span class="dv">99999</span>, <span class="cn">NA</span>),</span>
<span id="cb50-81"><a href="housing-instability.html#cb50-81" aria-hidden="true" tabindex="-1"></a>    <span class="at">OWNERSHP =</span> <span class="fu">replace</span>(OWNERSHP, OWNERSHP <span class="sc">==</span> <span class="dv">0</span>, <span class="cn">NA</span>),</span>
<span id="cb50-82"><a href="housing-instability.html#cb50-82" aria-hidden="true" tabindex="-1"></a>    <span class="at">RENTGRS  =</span> <span class="fu">case_when</span>(</span>
<span id="cb50-83"><a href="housing-instability.html#cb50-83" aria-hidden="true" tabindex="-1"></a>      RENTGRS <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> OWNERSHP <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="cn">NA_real_</span>,</span>
<span id="cb50-84"><a href="housing-instability.html#cb50-84" aria-hidden="true" tabindex="-1"></a>      RENTGRS <span class="sc">==</span> RENT <span class="sc">~</span> RENT <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">+</span> utility_adjust),</span>
<span id="cb50-85"><a href="housing-instability.html#cb50-85" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> RENTGRS),</span>
<span id="cb50-86"><a href="housing-instability.html#cb50-86" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb50-87"><a href="housing-instability.html#cb50-87" aria-hidden="true" tabindex="-1"></a>    <span class="at">BEDROOMS =</span> <span class="fu">case_when</span>(</span>
<span id="cb50-88"><a href="housing-instability.html#cb50-88" aria-hidden="true" tabindex="-1"></a>      BEDROOMS <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="cn">NA_real_</span>,</span>
<span id="cb50-89"><a href="housing-instability.html#cb50-89" aria-hidden="true" tabindex="-1"></a>      BEDROOMS <span class="sc">&gt;=</span> <span class="dv">1</span> <span class="sc">~</span> BEDROOMS <span class="sc">-</span><span class="dv">1</span>),</span>
<span id="cb50-90"><a href="housing-instability.html#cb50-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-91"><a href="housing-instability.html#cb50-91" aria-hidden="true" tabindex="-1"></a>    <span class="co"># calculate homeownership and cost burden</span></span>
<span id="cb50-92"><a href="housing-instability.html#cb50-92" aria-hidden="true" tabindex="-1"></a>    <span class="at">homeownership =</span> <span class="fu">if_else</span>(OWNERSHP <span class="sc">==</span> <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb50-93"><a href="housing-instability.html#cb50-93" aria-hidden="true" tabindex="-1"></a>    <span class="at">hcost =</span> <span class="fu">if_else</span>(homeownership <span class="sc">==</span> <span class="dv">1</span>, OWNCOST, RENTGRS),</span>
<span id="cb50-94"><a href="housing-instability.html#cb50-94" aria-hidden="true" tabindex="-1"></a>    <span class="at">cost_burden =</span> <span class="fu">if_else</span>(hcost <span class="sc">*</span> <span class="dv">12</span> <span class="sc">/</span> HHINCOME <span class="sc">&gt;</span> <span class="fl">0.3</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb50-95"><a href="housing-instability.html#cb50-95" aria-hidden="true" tabindex="-1"></a>    <span class="at">severe_cost_burden =</span> <span class="fu">if_else</span>(hcost <span class="sc">*</span> <span class="dv">12</span> <span class="sc">/</span> HHINCOME <span class="sc">&gt;</span> <span class="fl">0.5</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb50-96"><a href="housing-instability.html#cb50-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-97"><a href="housing-instability.html#cb50-97" aria-hidden="true" tabindex="-1"></a>    <span class="at">hh_type =</span> <span class="fu">case_when</span>(</span>
<span id="cb50-98"><a href="housing-instability.html#cb50-98" aria-hidden="true" tabindex="-1"></a>      homeownership <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> cost_burden <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;noncb_homeowner&quot;</span>,</span>
<span id="cb50-99"><a href="housing-instability.html#cb50-99" aria-hidden="true" tabindex="-1"></a>      homeownership <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> cost_burden <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;cb_homeowner&quot;</span>,</span>
<span id="cb50-100"><a href="housing-instability.html#cb50-100" aria-hidden="true" tabindex="-1"></a>      homeownership <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> cost_burden <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;noncb_renter&quot;</span>,</span>
<span id="cb50-101"><a href="housing-instability.html#cb50-101" aria-hidden="true" tabindex="-1"></a>      homeownership <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> cost_burden <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;cb_renter&quot;</span>,</span>
<span id="cb50-102"><a href="housing-instability.html#cb50-102" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span>))  <span class="sc">%&gt;%</span></span>
<span id="cb50-103"><a href="housing-instability.html#cb50-103" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Adjust HHICOME for inflation</span></span>
<span id="cb50-104"><a href="housing-instability.html#cb50-104" aria-hidden="true" tabindex="-1"></a>  <span class="fu">COLA</span>(HHINCOME, <span class="at">base_year =</span> <span class="dv">2019</span>, <span class="at">rpp =</span> F) <span class="sc">%&gt;%</span></span>
<span id="cb50-105"><a href="housing-instability.html#cb50-105" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(ami_table_19, <span class="at">by =</span> <span class="st">&quot;hh_size&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb50-106"><a href="housing-instability.html#cb50-106" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb50-107"><a href="housing-instability.html#cb50-107" aria-hidden="true" tabindex="-1"></a>    <span class="at">hh_ami_group =</span> <span class="fu">case_when</span>(</span>
<span id="cb50-108"><a href="housing-instability.html#cb50-108" aria-hidden="true" tabindex="-1"></a>      HHINCOME <span class="sc">&lt;</span> ami30  <span class="sc">~</span> <span class="dv">30</span>,</span>
<span id="cb50-109"><a href="housing-instability.html#cb50-109" aria-hidden="true" tabindex="-1"></a>      HHINCOME <span class="sc">&lt;</span> ami50  <span class="sc">~</span> <span class="dv">50</span>,</span>
<span id="cb50-110"><a href="housing-instability.html#cb50-110" aria-hidden="true" tabindex="-1"></a>      HHINCOME <span class="sc">&lt;</span> ami80  <span class="sc">~</span> <span class="dv">80</span>,</span>
<span id="cb50-111"><a href="housing-instability.html#cb50-111" aria-hidden="true" tabindex="-1"></a>      HHINCOME <span class="sc">&lt;</span> ami100 <span class="sc">~</span> <span class="dv">100</span>,</span>
<span id="cb50-112"><a href="housing-instability.html#cb50-112" aria-hidden="true" tabindex="-1"></a>      HHINCOME <span class="sc">&lt;</span> ami150 <span class="sc">~</span> <span class="dv">150</span>,</span>
<span id="cb50-113"><a href="housing-instability.html#cb50-113" aria-hidden="true" tabindex="-1"></a>      HHINCOME <span class="sc">&lt;</span> ami200 <span class="sc">~</span> <span class="dv">200</span>,</span>
<span id="cb50-114"><a href="housing-instability.html#cb50-114" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">Inf</span>))</span>
<span id="cb50-115"><a href="housing-instability.html#cb50-115" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-116"><a href="housing-instability.html#cb50-116" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-117"><a href="housing-instability.html#cb50-117" aria-hidden="true" tabindex="-1"></a><span class="co"># Tidy data for unoccupied houses</span></span>
<span id="cb50-118"><a href="housing-instability.html#cb50-118" aria-hidden="true" tabindex="-1"></a>acs_houses_unoccupied <span class="sc">%&lt;&gt;%</span></span>
<span id="cb50-119"><a href="housing-instability.html#cb50-119" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb50-120"><a href="housing-instability.html#cb50-120" aria-hidden="true" tabindex="-1"></a>    <span class="at">vacancy =</span> <span class="fu">case_when</span>(</span>
<span id="cb50-121"><a href="housing-instability.html#cb50-121" aria-hidden="true" tabindex="-1"></a>      VACANCY <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="st">&quot;occupied&quot;</span>,</span>
<span id="cb50-122"><a href="housing-instability.html#cb50-122" aria-hidden="true" tabindex="-1"></a>      VACANCY <span class="sc">%in%</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span> <span class="sc">~</span> <span class="st">&quot;available&quot;</span>,</span>
<span id="cb50-123"><a href="housing-instability.html#cb50-123" aria-hidden="true" tabindex="-1"></a>      VACANCY <span class="sc">%in%</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">9</span> <span class="sc">~</span> <span class="st">&quot;unavailable&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb50-124"><a href="housing-instability.html#cb50-124" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(vacancy <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;available&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb50-125"><a href="housing-instability.html#cb50-125" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb50-126"><a href="housing-instability.html#cb50-126" aria-hidden="true" tabindex="-1"></a>    FIPS, year, HHWT,</span>
<span id="cb50-127"><a href="housing-instability.html#cb50-127" aria-hidden="true" tabindex="-1"></a>    <span class="at">homeownership =</span> <span class="fu">if_else</span>(VACANCY <span class="sc">==</span> <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">0</span>),</span>
<span id="cb50-128"><a href="housing-instability.html#cb50-128" aria-hidden="true" tabindex="-1"></a>    <span class="at">RENTGRS =</span> RENT <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">+</span> utility_adjust),</span>
<span id="cb50-129"><a href="housing-instability.html#cb50-129" aria-hidden="true" tabindex="-1"></a>    RENT,</span>
<span id="cb50-130"><a href="housing-instability.html#cb50-130" aria-hidden="true" tabindex="-1"></a>    VALUEH,</span>
<span id="cb50-131"><a href="housing-instability.html#cb50-131" aria-hidden="true" tabindex="-1"></a>    <span class="at">BEDROOMS =</span> <span class="fu">case_when</span>(</span>
<span id="cb50-132"><a href="housing-instability.html#cb50-132" aria-hidden="true" tabindex="-1"></a>      BEDROOMS <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="cn">NA_real_</span>,</span>
<span id="cb50-133"><a href="housing-instability.html#cb50-133" aria-hidden="true" tabindex="-1"></a>      BEDROOMS <span class="sc">&gt;=</span> <span class="dv">1</span> <span class="sc">~</span> BEDROOMS <span class="sc">-</span><span class="dv">1</span>),</span>
<span id="cb50-134"><a href="housing-instability.html#cb50-134" aria-hidden="true" tabindex="-1"></a>    VACANCY)</span>
<span id="cb50-135"><a href="housing-instability.html#cb50-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-136"><a href="housing-instability.html#cb50-136" aria-hidden="true" tabindex="-1"></a><span class="co"># Bind data to occupied houses</span></span>
<span id="cb50-137"><a href="housing-instability.html#cb50-137" aria-hidden="true" tabindex="-1"></a>acs_houses <span class="ot">&lt;-</span> acs_micro <span class="sc">%&gt;%</span></span>
<span id="cb50-138"><a href="housing-instability.html#cb50-138" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(acs_houses_unoccupied) <span class="sc">%&gt;%</span></span>
<span id="cb50-139"><a href="housing-instability.html#cb50-139" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-140"><a href="housing-instability.html#cb50-140" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Adjust for inflation</span></span>
<span id="cb50-141"><a href="housing-instability.html#cb50-141" aria-hidden="true" tabindex="-1"></a>  <span class="fu">COLA</span>(RENTGRS, VALUEH, <span class="at">base_year =</span> <span class="dv">2019</span>, <span class="at">rpp =</span> F) <span class="sc">%&gt;%</span></span>
<span id="cb50-142"><a href="housing-instability.html#cb50-142" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb50-143"><a href="housing-instability.html#cb50-143" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb50-144"><a href="housing-instability.html#cb50-144" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Reverse cost-burden calc to test AMI category of home</span></span>
<span id="cb50-145"><a href="housing-instability.html#cb50-145" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Per HNA, mortgage of $279,307 corresponds to a rent ceiling of $1,787</span></span>
<span id="cb50-146"><a href="housing-instability.html#cb50-146" aria-hidden="true" tabindex="-1"></a>    <span class="at">est_cost =</span> <span class="fu">case_when</span>(</span>
<span id="cb50-147"><a href="housing-instability.html#cb50-147" aria-hidden="true" tabindex="-1"></a>      homeownership <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> RENTGRS <span class="sc">*</span> <span class="dv">12</span>,</span>
<span id="cb50-148"><a href="housing-instability.html#cb50-148" aria-hidden="true" tabindex="-1"></a>      homeownership <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> VALUEH <span class="sc">/</span> <span class="dv">279307</span> <span class="sc">*</span> <span class="dv">1787</span> <span class="sc">*</span> <span class="dv">12</span>),</span>
<span id="cb50-149"><a href="housing-instability.html#cb50-149" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb50-150"><a href="housing-instability.html#cb50-150" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_income =</span> est_cost <span class="sc">/</span> <span class="fl">0.3</span>,</span>
<span id="cb50-151"><a href="housing-instability.html#cb50-151" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb50-152"><a href="housing-instability.html#cb50-152" aria-hidden="true" tabindex="-1"></a>    <span class="at">br_pp    =</span> min_income <span class="sc">*</span> mult[BEDROOMS <span class="sc">+</span> <span class="dv">1</span>],</span>
<span id="cb50-153"><a href="housing-instability.html#cb50-153" aria-hidden="true" tabindex="-1"></a>    <span class="at">br_p1.5p =</span> min_income <span class="sc">*</span> mult_br[BEDROOMS <span class="sc">+</span> <span class="dv">1</span>],</span>
<span id="cb50-154"><a href="housing-instability.html#cb50-154" aria-hidden="true" tabindex="-1"></a>    <span class="at">ami_pct =</span> br_p1<span class="fl">.5</span>p <span class="sc">/</span> <span class="dv">71500</span> <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb50-155"><a href="housing-instability.html#cb50-155" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb50-156"><a href="housing-instability.html#cb50-156" aria-hidden="true" tabindex="-1"></a>    <span class="at">adj_income =</span> HHINCOME <span class="sc">*</span> mult[hh_size]) <span class="sc">%&gt;%</span></span>
<span id="cb50-157"><a href="housing-instability.html#cb50-157" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb50-158"><a href="housing-instability.html#cb50-158" aria-hidden="true" tabindex="-1"></a>    <span class="co"># house_ami_group = case_when(</span></span>
<span id="cb50-159"><a href="housing-instability.html#cb50-159" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   br_p1.5p &lt; (71500 * 0.3)  ~ 30,</span></span>
<span id="cb50-160"><a href="housing-instability.html#cb50-160" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   br_p1.5p &lt; (71500 * 0.5)  ~ 50,</span></span>
<span id="cb50-161"><a href="housing-instability.html#cb50-161" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   br_p1.5p &lt; (71500 * 0.8)  ~ 80,</span></span>
<span id="cb50-162"><a href="housing-instability.html#cb50-162" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   br_p1.5p &lt; (71500 * 1) ~ 100,</span></span>
<span id="cb50-163"><a href="housing-instability.html#cb50-163" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   br_p1.5p &lt; (71500 * 1.5) ~ 150,</span></span>
<span id="cb50-164"><a href="housing-instability.html#cb50-164" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   br_p1.5p &lt; (71500 * 2) ~ 200,</span></span>
<span id="cb50-165"><a href="housing-instability.html#cb50-165" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   TRUE ~ Inf)) %&gt;%</span></span>
<span id="cb50-166"><a href="housing-instability.html#cb50-166" aria-hidden="true" tabindex="-1"></a>    <span class="at">house_ami_group =</span> <span class="fu">case_when</span>(</span>
<span id="cb50-167"><a href="housing-instability.html#cb50-167" aria-hidden="true" tabindex="-1"></a>      br_p1<span class="fl">.5</span>p <span class="sc">&lt;</span> (<span class="dv">76400</span> <span class="sc">*</span> <span class="fl">0.3</span>)  <span class="sc">~</span> <span class="dv">30</span>,</span>
<span id="cb50-168"><a href="housing-instability.html#cb50-168" aria-hidden="true" tabindex="-1"></a>      br_p1<span class="fl">.5</span>p <span class="sc">&lt;</span> (<span class="dv">76400</span> <span class="sc">*</span> <span class="fl">0.5</span>)  <span class="sc">~</span> <span class="dv">50</span>,</span>
<span id="cb50-169"><a href="housing-instability.html#cb50-169" aria-hidden="true" tabindex="-1"></a>      br_p1<span class="fl">.5</span>p <span class="sc">&lt;</span> (<span class="dv">76400</span> <span class="sc">*</span> <span class="fl">0.8</span>)  <span class="sc">~</span> <span class="dv">80</span>,</span>
<span id="cb50-170"><a href="housing-instability.html#cb50-170" aria-hidden="true" tabindex="-1"></a>      br_p1<span class="fl">.5</span>p <span class="sc">&lt;</span> (<span class="dv">76400</span> <span class="sc">*</span> <span class="dv">1</span>) <span class="sc">~</span> <span class="dv">100</span>,</span>
<span id="cb50-171"><a href="housing-instability.html#cb50-171" aria-hidden="true" tabindex="-1"></a>      br_p1<span class="fl">.5</span>p <span class="sc">&lt;</span> (<span class="dv">76400</span> <span class="sc">*</span> <span class="fl">1.5</span>) <span class="sc">~</span> <span class="dv">150</span>,</span>
<span id="cb50-172"><a href="housing-instability.html#cb50-172" aria-hidden="true" tabindex="-1"></a>      br_p1<span class="fl">.5</span>p <span class="sc">&lt;</span> (<span class="dv">76400</span> <span class="sc">*</span> <span class="dv">2</span>) <span class="sc">~</span> <span class="dv">200</span>,</span>
<span id="cb50-173"><a href="housing-instability.html#cb50-173" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">Inf</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb50-174"><a href="housing-instability.html#cb50-174" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb50-175"><a href="housing-instability.html#cb50-175" aria-hidden="true" tabindex="-1"></a>    <span class="at">hh_ami_group =</span> <span class="fu">replace_na</span>(hh_ami_group, <span class="dv">0</span>),</span>
<span id="cb50-176"><a href="housing-instability.html#cb50-176" aria-hidden="true" tabindex="-1"></a>    <span class="at">available =</span> <span class="fu">if_else</span>(VACANCY <span class="sc">%in%</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span> <span class="sc">|</span> adj_income <span class="sc">&gt;=</span> br_p1<span class="fl">.5</span>p, <span class="dv">1</span>, <span class="dv">0</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb50-177"><a href="housing-instability.html#cb50-177" aria-hidden="true" tabindex="-1"></a>    <span class="co">#available = if_else(VACANCY %in% 1:2 | hh_ami_group &lt;= house_ami_group, 1, 0)) %&gt;%</span></span>
<span id="cb50-178"><a href="housing-instability.html#cb50-178" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, HHWT, RENT, RENTGRS, VALUEH, VACANCY, OWNERSHP, BEDROOMS, hh_size, homeownership, </span>
<span id="cb50-179"><a href="housing-instability.html#cb50-179" aria-hidden="true" tabindex="-1"></a>         hh_ami_group, est_cost, min_income, br_pp, br_p1<span class="fl">.5</span>p, ami_pct, house_ami_group, available)</span>
<span id="cb50-180"><a href="housing-instability.html#cb50-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-181"><a href="housing-instability.html#cb50-181" aria-hidden="true" tabindex="-1"></a>results_people <span class="ot">&lt;-</span> acs_micro <span class="sc">%&gt;%</span></span>
<span id="cb50-182"><a href="housing-instability.html#cb50-182" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(homeownership, hh_ami_group) <span class="sc">%&gt;%</span></span>
<span id="cb50-183"><a href="housing-instability.html#cb50-183" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">households =</span> <span class="fu">sum</span>(HHWT) <span class="sc">/</span> <span class="dv">5</span>, <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb50-184"><a href="housing-instability.html#cb50-184" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">ami_group =</span> hh_ami_group)</span>
<span id="cb50-185"><a href="housing-instability.html#cb50-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-186"><a href="housing-instability.html#cb50-186" aria-hidden="true" tabindex="-1"></a>sum_avail <span class="ot">&lt;-</span> <span class="cf">function</span>(df, value) {</span>
<span id="cb50-187"><a href="housing-instability.html#cb50-187" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(df, hh_ami_group <span class="sc">&lt;=</span> value, house_ami_group <span class="sc">&lt;=</span> value) <span class="sc">%&gt;%</span></span>
<span id="cb50-188"><a href="housing-instability.html#cb50-188" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(homeownership) <span class="sc">%&gt;%</span></span>
<span id="cb50-189"><a href="housing-instability.html#cb50-189" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb50-190"><a href="housing-instability.html#cb50-190" aria-hidden="true" tabindex="-1"></a>      <span class="at">ami_group =</span> value,</span>
<span id="cb50-191"><a href="housing-instability.html#cb50-191" aria-hidden="true" tabindex="-1"></a>      <span class="at">houses =</span> <span class="fu">sum</span>(HHWT) <span class="sc">/</span> <span class="dv">5</span>, <span class="at">.groups=</span><span class="st">&quot;drop&quot;</span>)</span>
<span id="cb50-192"><a href="housing-instability.html#cb50-192" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb50-193"><a href="housing-instability.html#cb50-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-194"><a href="housing-instability.html#cb50-194" aria-hidden="true" tabindex="-1"></a>results_30 <span class="ot">&lt;-</span> <span class="fu">sum_avail</span>(acs_houses, <span class="dv">30</span>)</span>
<span id="cb50-195"><a href="housing-instability.html#cb50-195" aria-hidden="true" tabindex="-1"></a>results_50 <span class="ot">&lt;-</span> <span class="fu">sum_avail</span>(acs_houses, <span class="dv">50</span>)</span>
<span id="cb50-196"><a href="housing-instability.html#cb50-196" aria-hidden="true" tabindex="-1"></a>results_80 <span class="ot">&lt;-</span> <span class="fu">sum_avail</span>(acs_houses, <span class="dv">80</span>)</span>
<span id="cb50-197"><a href="housing-instability.html#cb50-197" aria-hidden="true" tabindex="-1"></a>results_100 <span class="ot">&lt;-</span> <span class="fu">sum_avail</span>(acs_houses, <span class="dv">100</span>)</span>
<span id="cb50-198"><a href="housing-instability.html#cb50-198" aria-hidden="true" tabindex="-1"></a>results_150 <span class="ot">&lt;-</span> <span class="fu">sum_avail</span>(acs_houses, <span class="dv">150</span>)</span>
<span id="cb50-199"><a href="housing-instability.html#cb50-199" aria-hidden="true" tabindex="-1"></a>results_200 <span class="ot">&lt;-</span> <span class="fu">sum_avail</span>(acs_houses, <span class="dv">200</span>)</span>
<span id="cb50-200"><a href="housing-instability.html#cb50-200" aria-hidden="true" tabindex="-1"></a>results_Inf <span class="ot">&lt;-</span> <span class="fu">sum_avail</span>(acs_houses, <span class="cn">Inf</span>)</span>
<span id="cb50-201"><a href="housing-instability.html#cb50-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-202"><a href="housing-instability.html#cb50-202" aria-hidden="true" tabindex="-1"></a>results_houses <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(results_30, results_50, results_80, results_100, results_150, results_200, results_Inf)</span>
<span id="cb50-203"><a href="housing-instability.html#cb50-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-204"><a href="housing-instability.html#cb50-204" aria-hidden="true" tabindex="-1"></a><span class="co"># actual &lt;- data.frame(</span></span>
<span id="cb50-205"><a href="housing-instability.html#cb50-205" aria-hidden="true" tabindex="-1"></a><span class="co">#   homeownership = c(rep(0:1, each = 7)),</span></span>
<span id="cb50-206"><a href="housing-instability.html#cb50-206" aria-hidden="true" tabindex="-1"></a><span class="co">#   level = rep(c(30, 50, 80, 100, 150, 200, Inf), 2),</span></span>
<span id="cb50-207"><a href="housing-instability.html#cb50-207" aria-hidden="true" tabindex="-1"></a><span class="co">#   report_num = c(17563, 46023, 89538, 98513, 115443, 121556, NA_real_, 8404, 19788, 54031, 75898, 120394, 148999, NA_real_))</span></span>
<span id="cb50-208"><a href="housing-instability.html#cb50-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-209"><a href="housing-instability.html#cb50-209" aria-hidden="true" tabindex="-1"></a><span class="co"># results_houses %&lt;&gt;%</span></span>
<span id="cb50-210"><a href="housing-instability.html#cb50-210" aria-hidden="true" tabindex="-1"></a><span class="co">#   left_join(actual) %&gt;%</span></span>
<span id="cb50-211"><a href="housing-instability.html#cb50-211" aria-hidden="true" tabindex="-1"></a><span class="co">#   mutate(dif = (freq - report_num) / report_num * 100)</span></span>
<span id="cb50-212"><a href="housing-instability.html#cb50-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-213"><a href="housing-instability.html#cb50-213" aria-hidden="true" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">full_join</span>(results_people, results_houses)</span>
<span id="cb50-214"><a href="housing-instability.html#cb50-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-215"><a href="housing-instability.html#cb50-215" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggtext)</span>
<span id="cb50-216"><a href="housing-instability.html#cb50-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-217"><a href="housing-instability.html#cb50-217" aria-hidden="true" tabindex="-1"></a>results <span class="sc">%&lt;&gt;%</span></span>
<span id="cb50-218"><a href="housing-instability.html#cb50-218" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ami_group) <span class="sc">%&gt;%</span></span>
<span id="cb50-219"><a href="housing-instability.html#cb50-219" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(households<span class="sc">:</span>houses, sum), <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span>)</span>
<span id="cb50-220"><a href="housing-instability.html#cb50-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-221"><a href="housing-instability.html#cb50-221" aria-hidden="true" tabindex="-1"></a>group_avail <span class="ot">&lt;-</span> <span class="cf">function</span>(df, value) {</span>
<span id="cb50-222"><a href="housing-instability.html#cb50-222" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">%&gt;%</span></span>
<span id="cb50-223"><a href="housing-instability.html#cb50-223" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(ami_group <span class="sc">&lt;=</span> value) <span class="sc">%&gt;%</span></span>
<span id="cb50-224"><a href="housing-instability.html#cb50-224" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">ami =</span> value)</span>
<span id="cb50-225"><a href="housing-instability.html#cb50-225" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb50-226"><a href="housing-instability.html#cb50-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-227"><a href="housing-instability.html#cb50-227" aria-hidden="true" tabindex="-1"></a>results<span class="sc">$</span>houses[<span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>] <span class="ot">=</span> results<span class="sc">$</span>houses[<span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>] <span class="sc">-</span> results<span class="sc">$</span>houses[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]</span>
<span id="cb50-228"><a href="housing-instability.html#cb50-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-229"><a href="housing-instability.html#cb50-229" aria-hidden="true" tabindex="-1"></a>results <span class="sc">%&lt;&gt;%</span></span>
<span id="cb50-230"><a href="housing-instability.html#cb50-230" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb50-231"><a href="housing-instability.html#cb50-231" aria-hidden="true" tabindex="-1"></a>    <span class="at">households_cumsum =</span> <span class="fu">cumsum</span>(households),</span>
<span id="cb50-232"><a href="housing-instability.html#cb50-232" aria-hidden="true" tabindex="-1"></a>    <span class="at">homes_cumsum =</span> <span class="fu">cumsum</span>(houses),</span>
<span id="cb50-233"><a href="housing-instability.html#cb50-233" aria-hidden="true" tabindex="-1"></a>    <span class="at">lab_color =</span> <span class="fu">viridis</span>(<span class="dv">7</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)[<span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>][<span class="fu">match</span>(ami_group, <span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">50</span>, <span class="dv">80</span>, <span class="dv">100</span>, <span class="dv">150</span>, <span class="dv">200</span>))],</span>
<span id="cb50-234"><a href="housing-instability.html#cb50-234" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="fu">paste0</span>(<span class="st">&quot;&lt;span style=&#39;font-size:36pt&#39;&gt;&quot;</span>, </span>
<span id="cb50-235"><a href="housing-instability.html#cb50-235" aria-hidden="true" tabindex="-1"></a>                   scales<span class="sc">::</span><span class="fu">percent</span>(homes_cumsum <span class="sc">/</span> households_cumsum, <span class="at">accuracy =</span> <span class="dv">1</span>), <span class="st">&quot;&lt;/span&gt;&quot;</span>,</span>
<span id="cb50-236"><a href="housing-instability.html#cb50-236" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&quot;&lt;span style=&#39;font-size:12pt&#39;&gt;&lt;br&gt;of households&lt;br&gt;up to&lt;br&gt;&lt;/span&gt;&quot;</span>,</span>
<span id="cb50-237"><a href="housing-instability.html#cb50-237" aria-hidden="true" tabindex="-1"></a>                   <span class="st">&quot;&lt;span style=&#39;font-size:20pt; face:bold; color:&quot;</span>, lab_color, <span class="st">&quot;&#39;&gt;&quot;</span>, </span>
<span id="cb50-238"><a href="housing-instability.html#cb50-238" aria-hidden="true" tabindex="-1"></a>                   ami_group, <span class="st">&quot;% AMI&quot;</span>, <span class="st">&quot;&lt;/span&gt;&quot;</span>))</span>
<span id="cb50-239"><a href="housing-instability.html#cb50-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-240"><a href="housing-instability.html#cb50-240" aria-hidden="true" tabindex="-1"></a>results_30 <span class="ot">&lt;-</span> <span class="fu">group_avail</span>(results, <span class="dv">30</span>)</span>
<span id="cb50-241"><a href="housing-instability.html#cb50-241" aria-hidden="true" tabindex="-1"></a>results_50 <span class="ot">&lt;-</span> <span class="fu">group_avail</span>(results, <span class="dv">50</span>)</span>
<span id="cb50-242"><a href="housing-instability.html#cb50-242" aria-hidden="true" tabindex="-1"></a>results_80 <span class="ot">&lt;-</span> <span class="fu">group_avail</span>(results, <span class="dv">80</span>)</span>
<span id="cb50-243"><a href="housing-instability.html#cb50-243" aria-hidden="true" tabindex="-1"></a>results_100 <span class="ot">&lt;-</span> <span class="fu">group_avail</span>(results, <span class="dv">100</span>)</span>
<span id="cb50-244"><a href="housing-instability.html#cb50-244" aria-hidden="true" tabindex="-1"></a>results_150 <span class="ot">&lt;-</span> <span class="fu">group_avail</span>(results, <span class="dv">150</span>)</span>
<span id="cb50-245"><a href="housing-instability.html#cb50-245" aria-hidden="true" tabindex="-1"></a>results_200 <span class="ot">&lt;-</span> <span class="fu">group_avail</span>(results, <span class="dv">200</span>)</span>
<span id="cb50-246"><a href="housing-instability.html#cb50-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-247"><a href="housing-instability.html#cb50-247" aria-hidden="true" tabindex="-1"></a>results_graph <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(results_30, results_50, results_80, results_100, results_150, results_200)</span>
<span id="cb50-248"><a href="housing-instability.html#cb50-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-249"><a href="housing-instability.html#cb50-249" aria-hidden="true" tabindex="-1"></a>results_graph <span class="sc">%&lt;&gt;%</span></span>
<span id="cb50-250"><a href="housing-instability.html#cb50-250" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(households<span class="sc">:</span>houses, <span class="at">names_to =</span> <span class="st">&quot;obs_type&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;value&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb50-251"><a href="housing-instability.html#cb50-251" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb50-252"><a href="housing-instability.html#cb50-252" aria-hidden="true" tabindex="-1"></a>    <span class="at">ami_group =</span> <span class="fu">factor</span>(ami_group, </span>
<span id="cb50-253"><a href="housing-instability.html#cb50-253" aria-hidden="true" tabindex="-1"></a>                       <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">200</span>, <span class="dv">150</span>, <span class="dv">100</span>, <span class="dv">80</span>, <span class="dv">50</span>, <span class="dv">30</span>),</span>
<span id="cb50-254"><a href="housing-instability.html#cb50-254" aria-hidden="true" tabindex="-1"></a>                       <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">200</span>, <span class="dv">150</span>, <span class="dv">100</span>, <span class="dv">80</span>, <span class="dv">50</span>, <span class="dv">30</span>),</span>
<span id="cb50-255"><a href="housing-instability.html#cb50-255" aria-hidden="true" tabindex="-1"></a>                       <span class="at">ordered =</span> T),</span>
<span id="cb50-256"><a href="housing-instability.html#cb50-256" aria-hidden="true" tabindex="-1"></a>    <span class="at">ami =</span> <span class="fu">factor</span>(ami, <span class="at">labels =</span> <span class="fu">unique</span>(label))) <span class="sc">%&gt;%</span> </span>
<span id="cb50-257"><a href="housing-instability.html#cb50-257" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(ami_group)</span>
<span id="cb50-258"><a href="housing-instability.html#cb50-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-259"><a href="housing-instability.html#cb50-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-260"><a href="housing-instability.html#cb50-260" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(results_graph, <span class="fu">aes</span>(<span class="at">x =</span> obs_type, <span class="at">y =</span> value, <span class="at">fill =</span> ami_group)) <span class="sc">+</span> </span>
<span id="cb50-261"><a href="housing-instability.html#cb50-261" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">&#39;stack&#39;</span>) <span class="sc">+</span> </span>
<span id="cb50-262"><a href="housing-instability.html#cb50-262" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">viridis</span>(<span class="dv">7</span>, <span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>)[<span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>],</span>
<span id="cb50-263"><a href="housing-instability.html#cb50-263" aria-hidden="true" tabindex="-1"></a>                    <span class="at">breaks =</span> <span class="fu">rev</span>(<span class="fu">c</span>(<span class="dv">200</span>, <span class="dv">150</span>, <span class="dv">100</span>, <span class="dv">80</span>, <span class="dv">50</span>, <span class="dv">30</span>)),  </span>
<span id="cb50-264"><a href="housing-instability.html#cb50-264" aria-hidden="true" tabindex="-1"></a>                    <span class="at">guide =</span> <span class="fu">guide_legend</span>(<span class="at">reverse =</span> <span class="cn">TRUE</span>),</span>
<span id="cb50-265"><a href="housing-instability.html#cb50-265" aria-hidden="true" tabindex="-1"></a>                    <span class="at">name =</span> <span class="st">&quot;AMI Group&quot;</span>) <span class="sc">+</span></span>
<span id="cb50-266"><a href="housing-instability.html#cb50-266" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="sc">~</span> ami) <span class="sc">+</span> </span>
<span id="cb50-267"><a href="housing-instability.html#cb50-267" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_family =</span> <span class="st">&quot;Montserrat&quot;</span>, <span class="at">base_size =</span> <span class="dv">22</span>) <span class="sc">+</span></span>
<span id="cb50-268"><a href="housing-instability.html#cb50-268" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb50-269"><a href="housing-instability.html#cb50-269" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb50-270"><a href="housing-instability.html#cb50-270" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.spacing.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb50-271"><a href="housing-instability.html#cb50-271" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb50-272"><a href="housing-instability.html#cb50-272" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_markdown</span>(<span class="at">margin=</span><span class="fu">margin</span>(<span class="sc">-</span><span class="dv">20</span>)),</span>
<span id="cb50-273"><a href="housing-instability.html#cb50-273" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb50-274"><a href="housing-instability.html#cb50-274" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb50-275"><a href="housing-instability.html#cb50-275" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.border =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb50-276"><a href="housing-instability.html#cb50-276" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.background =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb50-277"><a href="housing-instability.html#cb50-277" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">lineheight =</span> <span class="fl">0.5</span>),</span>
<span id="cb50-278"><a href="housing-instability.html#cb50-278" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">24</span>),</span>
<span id="cb50-279"><a href="housing-instability.html#cb50-279" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.text.x =</span> <span class="fu">element_markdown</span>(<span class="at">lineheight =</span> <span class="fl">0.6</span>),</span>
<span id="cb50-280"><a href="housing-instability.html#cb50-280" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.placement =</span> <span class="st">&quot;outside&quot;</span>,</span>
<span id="cb50-281"><a href="housing-instability.html#cb50-281" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">32</span>),</span>
<span id="cb50-282"><a href="housing-instability.html#cb50-282" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">lineheight =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="dv">0</span>)) <span class="sc">+</span> </span>
<span id="cb50-283"><a href="housing-instability.html#cb50-283" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(.<span class="dv">15</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb50-284"><a href="housing-instability.html#cb50-284" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb50-285"><a href="housing-instability.html#cb50-285" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">label =</span> scales<span class="sc">::</span><span class="fu">number</span>(<span class="fu">stat</span>(y), <span class="at">scale =</span> .<span class="dv">001</span>, <span class="at">accuracy =</span> <span class="dv">1</span>, <span class="at">suffix =</span> <span class="st">&quot;K&quot;</span>), <span class="at">group =</span> ami), </span>
<span id="cb50-286"><a href="housing-instability.html#cb50-286" aria-hidden="true" tabindex="-1"></a>    <span class="at">stat =</span> <span class="st">&#39;summary&#39;</span>, <span class="at">fun =</span> sum, <span class="at">vjust =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">family =</span> <span class="st">&quot;Montserrat&quot;</span>) <span class="sc">+</span></span>
<span id="cb50-287"><a href="housing-instability.html#cb50-287" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Affordability Gaps&quot;</span>,</span>
<span id="cb50-288"><a href="housing-instability.html#cb50-288" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;There are enough available and affordable homes for...&quot;</span>,</span>
<span id="cb50-289"><a href="housing-instability.html#cb50-289" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Within each group, the bar on the left represents the number of households at that income level</span><span class="sc">\n</span><span class="st">and the bar on the right represents the number of homes that are available and affordable to them.&quot;</span>) <span class="sc">+</span></span>
<span id="cb50-290"><a href="housing-instability.html#cb50-290" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(</span>
<span id="cb50-291"><a href="housing-instability.html#cb50-291" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="cn">NULL</span>,</span>
<span id="cb50-292"><a href="housing-instability.html#cb50-292" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">c</span>(<span class="at">households =</span> <span class="st">&quot;&lt;img src=&#39;001-family.png&#39; width=&#39;16&#39;/&gt;&quot;</span>,</span>
<span id="cb50-293"><a href="housing-instability.html#cb50-293" aria-hidden="true" tabindex="-1"></a>           <span class="at">houses =</span> <span class="st">&quot;&lt;img src=&#39;002-house-black-silhouette-without-door.png&#39; width=&#39;16&#39;/&gt;&quot;</span>)) <span class="sc">+</span></span>
<span id="cb50-294"><a href="housing-instability.html#cb50-294" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb50-295"><a href="housing-instability.html#cb50-295" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>), <span class="co"># bg of the panel</span></span>
<span id="cb50-296"><a href="housing-instability.html#cb50-296" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="cn">NA</span>), <span class="co"># bg of the plot</span></span>
<span id="cb50-297"><a href="housing-instability.html#cb50-297" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="st">&quot;transparent&quot;</span>), <span class="co"># get rid of legend bg</span></span>
<span id="cb50-298"><a href="housing-instability.html#cb50-298" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.box.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>, <span class="at">color =</span> <span class="st">&quot;transparent&quot;</span>), <span class="co"># get rid of legend panel bg</span></span>
<span id="cb50-299"><a href="housing-instability.html#cb50-299" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">&quot;transparent&quot;</span>,<span class="at">colour =</span> <span class="cn">NA</span>))</span></code></pre></div>
<p>The table below shows the cutoffs for family income, monthly rent, and home purchase prices for each AMI group.</p>
<p>We group residents by percentages of the Area Median Income (AMI) as determined by the Department of Housing and Urban Development. In 2019, the AMI for a four-person household in Louisville was $76,300. Median income means 50% of four-person families earned less than the AMI, and 50% earned more. The AMI is adjusted down for smaller households and up for larger households. For example, the AMI for a person living alone is $54,000, and the AMI for a six-person household is $89,000.</p>
<p>Households in the 30% AMI income group have income less than or equal to the Federal Poverty Level (about 30% of $76,300). Households in the 50% AMI group have income between the Federal Poverty Level and 50% of the AMI. Households in the 80% AMI income group have income between 50% of the AMI and 80% of the AMI, and so on for higher AMI levels.</p>
<p>We group homes and apartments by AMI by determining the minimum income needed for a household to live there affordably (without spending more than 30% of their income on housing costs). We adjust housing costs by bedroom size to align with how the AMI for households is adjusted by household size.</p>
<p>We determine the AMI group of apartments using monthly rent and utilities. We determine the AMI group of homes based on the value of the home in order to measure the affordability of homeownership for new buyers, rather than cost-burden for existing homeowners. Based on the conversion used in the Housing Needs Assessment, we calculate that the annual cost of homeownership is about 1/13th of the home’s value.</p>
<p>More details on the methodology can be found in the Housing Needs Assessment and the Housing Needs Assessment Methodology:
<a href="https://loutrustfund.org/wp-content/uploads/2019/02/HNA_Appendix_190130.pdf" class="uri">https://loutrustfund.org/wp-content/uploads/2019/02/HNA_Appendix_190130.pdf</a>
<a href="https://secureservercdn.net/166.62.110.60/7nm.5c8.myftpupload.com/wp-content/uploads/2019/02/HNA_FINAL_190222.pdf" class="uri">https://secureservercdn.net/166.62.110.60/7nm.5c8.myftpupload.com/wp-content/uploads/2019/02/HNA_FINAL_190222.pdf</a></p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="housing-instability.html#cb51-1" aria-hidden="true" tabindex="-1"></a>ami_table_19 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb51-2"><a href="housing-instability.html#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">hh_size =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>),</span>
<span id="cb51-3"><a href="housing-instability.html#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">ami30    =</span> <span class="fu">c</span>(<span class="dv">16050</span>, <span class="dv">18350</span>, <span class="dv">21330</span>, <span class="dv">25750</span>, <span class="dv">30170</span>, <span class="dv">34590</span>, <span class="dv">39010</span>, <span class="dv">43430</span>, </span>
<span id="cb51-4"><a href="housing-instability.html#cb51-4" aria-hidden="true" tabindex="-1"></a>               plyr<span class="sc">::</span><span class="fu">round_any</span>(<span class="dv">43430</span> <span class="sc">+</span> (<span class="dv">43430</span> <span class="sc">/</span> <span class="fl">1.32</span> <span class="sc">*</span> <span class="fl">0.08</span>) <span class="sc">*</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">50</span>, ceiling)),</span>
<span id="cb51-5"><a href="housing-instability.html#cb51-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">ami50    =</span> <span class="fu">c</span>(<span class="dv">26750</span>, <span class="dv">30600</span>, <span class="dv">34400</span>, <span class="dv">38200</span>, <span class="dv">41300</span>, <span class="dv">44350</span>, <span class="dv">47400</span>, <span class="dv">50450</span>,</span>
<span id="cb51-6"><a href="housing-instability.html#cb51-6" aria-hidden="true" tabindex="-1"></a>               plyr<span class="sc">::</span><span class="fu">round_any</span>(<span class="dv">50450</span> <span class="sc">+</span> (<span class="dv">50450</span> <span class="sc">/</span> <span class="fl">1.32</span> <span class="sc">*</span> <span class="fl">0.08</span>) <span class="sc">*</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">50</span>, ceiling)),</span>
<span id="cb51-7"><a href="housing-instability.html#cb51-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">ami80    =</span> <span class="fu">c</span>(<span class="dv">42800</span>, <span class="dv">48900</span>, <span class="dv">55000</span>, <span class="dv">61100</span>, <span class="dv">66000</span>, <span class="dv">70900</span>, <span class="dv">75800</span>, <span class="dv">80700</span>, </span>
<span id="cb51-8"><a href="housing-instability.html#cb51-8" aria-hidden="true" tabindex="-1"></a>               plyr<span class="sc">::</span><span class="fu">round_any</span>(<span class="dv">75550</span> <span class="sc">+</span> (<span class="dv">75550</span> <span class="sc">/</span> <span class="fl">1.32</span> <span class="sc">*</span> <span class="fl">0.08</span>) <span class="sc">*</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">50</span>, ceiling)),</span>
<span id="cb51-9"><a href="housing-instability.html#cb51-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">ami100   =</span> plyr<span class="sc">::</span><span class="fu">round_any</span>(<span class="dv">76400</span> <span class="sc">*</span> mult, <span class="dv">50</span>, ceiling),</span>
<span id="cb51-10"><a href="housing-instability.html#cb51-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">ami150   =</span> plyr<span class="sc">::</span><span class="fu">round_any</span>(<span class="dv">76400</span> <span class="sc">*</span> mult <span class="sc">*</span> <span class="fl">1.5</span>, <span class="dv">50</span>, ceiling),</span>
<span id="cb51-11"><a href="housing-instability.html#cb51-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">ami200   =</span> plyr<span class="sc">::</span><span class="fu">round_any</span>(<span class="dv">76400</span> <span class="sc">*</span> mult <span class="sc">*</span> <span class="dv">2</span>, <span class="dv">50</span>, ceiling))</span>
<span id="cb51-12"><a href="housing-instability.html#cb51-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-13"><a href="housing-instability.html#cb51-13" aria-hidden="true" tabindex="-1"></a>ami_table_19 <span class="sc">%&lt;&gt;%</span></span>
<span id="cb51-14"><a href="housing-instability.html#cb51-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(ami30<span class="sc">:</span>ami200, <span class="at">names_to =</span> <span class="st">&quot;ami&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;value&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb51-15"><a href="housing-instability.html#cb51-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb51-16"><a href="housing-instability.html#cb51-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">rent =</span> value <span class="sc">*</span> <span class="fl">0.3</span> <span class="sc">/</span> <span class="dv">12</span>,</span>
<span id="cb51-17"><a href="housing-instability.html#cb51-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">mortgage =</span> rent <span class="sc">/</span> <span class="dv">1787</span> <span class="sc">*</span> <span class="dv">279307</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb51-18"><a href="housing-instability.html#cb51-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> ami, <span class="at">values_from =</span> value<span class="sc">:</span>mortgage)</span>
<span id="cb51-19"><a href="housing-instability.html#cb51-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-20"><a href="housing-instability.html#cb51-20" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb51-21"><a href="housing-instability.html#cb51-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-22"><a href="housing-instability.html#cb51-22" aria-hidden="true" tabindex="-1"></a>ami_19 <span class="ot">&lt;-</span> ami_table_19 <span class="sc">%&gt;%</span></span>
<span id="cb51-23"><a href="housing-instability.html#cb51-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb51-24"><a href="housing-instability.html#cb51-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">&quot;Area Median Incomes, Rents, and Purchase Price Limits by Household Size&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb51-25"><a href="housing-instability.html#cb51-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_currency</span>(<span class="at">columns =</span> <span class="fu">vars</span>(value_ami30, value_ami50, value_ami80, value_ami100,</span>
<span id="cb51-26"><a href="housing-instability.html#cb51-26" aria-hidden="true" tabindex="-1"></a>                            value_ami150, value_ami200,</span>
<span id="cb51-27"><a href="housing-instability.html#cb51-27" aria-hidden="true" tabindex="-1"></a>                            mortgage_ami30, mortgage_ami50, mortgage_ami80, mortgage_ami100,</span>
<span id="cb51-28"><a href="housing-instability.html#cb51-28" aria-hidden="true" tabindex="-1"></a>                            mortgage_ami150, mortgage_ami200),</span>
<span id="cb51-29"><a href="housing-instability.html#cb51-29" aria-hidden="true" tabindex="-1"></a>              <span class="at">decimals =</span> <span class="dv">0</span>,</span>
<span id="cb51-30"><a href="housing-instability.html#cb51-30" aria-hidden="true" tabindex="-1"></a>              <span class="at">suffixing =</span>T) <span class="sc">%&gt;%</span></span>
<span id="cb51-31"><a href="housing-instability.html#cb51-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_currency</span>(<span class="at">columns =</span> <span class="fu">vars</span>(rent_ami30, rent_ami50, rent_ami80, rent_ami100,</span>
<span id="cb51-32"><a href="housing-instability.html#cb51-32" aria-hidden="true" tabindex="-1"></a>                              rent_ami150, rent_ami200),</span>
<span id="cb51-33"><a href="housing-instability.html#cb51-33" aria-hidden="true" tabindex="-1"></a>            <span class="at">decimals =</span> <span class="dv">1</span>,</span>
<span id="cb51-34"><a href="housing-instability.html#cb51-34" aria-hidden="true" tabindex="-1"></a>            <span class="at">suffixing =</span>T) <span class="sc">%&gt;%</span></span>
<span id="cb51-35"><a href="housing-instability.html#cb51-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb51-36"><a href="housing-instability.html#cb51-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">hh_size =</span> <span class="st">&quot;Household Size&quot;</span>,</span>
<span id="cb51-37"><a href="housing-instability.html#cb51-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_ami30 =</span> <span class="st">&quot;Annual Income&quot;</span>, </span>
<span id="cb51-38"><a href="housing-instability.html#cb51-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_ami50 =</span> <span class="st">&quot;Annual Income&quot;</span>, </span>
<span id="cb51-39"><a href="housing-instability.html#cb51-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_ami80 =</span> <span class="st">&quot;Annual Income&quot;</span>,</span>
<span id="cb51-40"><a href="housing-instability.html#cb51-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_ami100 =</span> <span class="st">&quot;Annual Income&quot;</span>,</span>
<span id="cb51-41"><a href="housing-instability.html#cb51-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_ami150 =</span> <span class="st">&quot;Annual Income&quot;</span>, </span>
<span id="cb51-42"><a href="housing-instability.html#cb51-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_ami200 =</span> <span class="st">&quot;Annual Income&quot;</span>,</span>
<span id="cb51-43"><a href="housing-instability.html#cb51-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">rent_ami30 =</span> <span class="st">&quot;Monthly Rent Ceiling&quot;</span>, </span>
<span id="cb51-44"><a href="housing-instability.html#cb51-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">rent_ami50 =</span> <span class="st">&quot;Monthly Rent Ceiling&quot;</span>,</span>
<span id="cb51-45"><a href="housing-instability.html#cb51-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">rent_ami80 =</span> <span class="st">&quot;Monthly Rent Ceiling&quot;</span>,</span>
<span id="cb51-46"><a href="housing-instability.html#cb51-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">rent_ami100 =</span> <span class="st">&quot;Monthly Rent Ceiling&quot;</span>,</span>
<span id="cb51-47"><a href="housing-instability.html#cb51-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">rent_ami150 =</span> <span class="st">&quot;Monthly Rent Ceiling&quot;</span>, </span>
<span id="cb51-48"><a href="housing-instability.html#cb51-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">rent_ami200 =</span> <span class="st">&quot;Monthly Rent Ceiling&quot;</span>,</span>
<span id="cb51-49"><a href="housing-instability.html#cb51-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">mortgage_ami30 =</span> <span class="st">&quot;Purchase Price Ceiling&quot;</span>, </span>
<span id="cb51-50"><a href="housing-instability.html#cb51-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">mortgage_ami50 =</span> <span class="st">&quot;Purchase Price Ceiling&quot;</span>, </span>
<span id="cb51-51"><a href="housing-instability.html#cb51-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">mortgage_ami80 =</span> <span class="st">&quot;Purchase Price Ceiling&quot;</span>, </span>
<span id="cb51-52"><a href="housing-instability.html#cb51-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">mortgage_ami100 =</span> <span class="st">&quot;Purchase Price Ceiling&quot;</span>,</span>
<span id="cb51-53"><a href="housing-instability.html#cb51-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">mortgage_ami150 =</span> <span class="st">&quot;Purchase Price Ceiling&quot;</span>,</span>
<span id="cb51-54"><a href="housing-instability.html#cb51-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">mortgage_ami200 =</span> <span class="st">&quot;Purchase Price Ceiling&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb51-55"><a href="housing-instability.html#cb51-55" aria-hidden="true" tabindex="-1"></a>  <span class="co"># cols_move(columns = vars(perc_cost_burdened_under_35k, perc_renters, perc_poverty_12mnth, perc_unemployed_laborforce, perc_overcrowding_renter_1.50_or_more, housing_instability_index),</span></span>
<span id="cb51-56"><a href="housing-instability.html#cb51-56" aria-hidden="true" tabindex="-1"></a>  <span class="co">#           after = vars(district)) %&gt;%</span></span>
<span id="cb51-57"><a href="housing-instability.html#cb51-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb51-58"><a href="housing-instability.html#cb51-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">&quot;30% AMI&quot;</span>,</span>
<span id="cb51-59"><a href="housing-instability.html#cb51-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">vars</span>(value_ami30, rent_ami30, mortgage_ami30)</span>
<span id="cb51-60"><a href="housing-instability.html#cb51-60" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb51-61"><a href="housing-instability.html#cb51-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb51-62"><a href="housing-instability.html#cb51-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">&quot;50% AMI&quot;</span>,</span>
<span id="cb51-63"><a href="housing-instability.html#cb51-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">vars</span>(value_ami50, rent_ami50, mortgage_ami50)</span>
<span id="cb51-64"><a href="housing-instability.html#cb51-64" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb51-65"><a href="housing-instability.html#cb51-65" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb51-66"><a href="housing-instability.html#cb51-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">&quot;80% AMI&quot;</span>,</span>
<span id="cb51-67"><a href="housing-instability.html#cb51-67" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">vars</span>(value_ami80, rent_ami80, mortgage_ami80)</span>
<span id="cb51-68"><a href="housing-instability.html#cb51-68" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb51-69"><a href="housing-instability.html#cb51-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb51-70"><a href="housing-instability.html#cb51-70" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">&quot;100% AMI&quot;</span>,</span>
<span id="cb51-71"><a href="housing-instability.html#cb51-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">vars</span>(value_ami100, rent_ami100, mortgage_ami100)</span>
<span id="cb51-72"><a href="housing-instability.html#cb51-72" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb51-73"><a href="housing-instability.html#cb51-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb51-74"><a href="housing-instability.html#cb51-74" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">&quot;150% AMI&quot;</span>,</span>
<span id="cb51-75"><a href="housing-instability.html#cb51-75" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">vars</span>(value_ami150, rent_ami150, mortgage_ami150)</span>
<span id="cb51-76"><a href="housing-instability.html#cb51-76" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb51-77"><a href="housing-instability.html#cb51-77" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_spanner</span>(</span>
<span id="cb51-78"><a href="housing-instability.html#cb51-78" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">&quot;200% AMI&quot;</span>,</span>
<span id="cb51-79"><a href="housing-instability.html#cb51-79" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">vars</span>(value_ami200, rent_ami200, mortgage_ami200)</span>
<span id="cb51-80"><a href="housing-instability.html#cb51-80" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb51-81"><a href="housing-instability.html#cb51-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_align</span>(<span class="at">align =</span> <span class="st">&quot;center&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb51-82"><a href="housing-instability.html#cb51-82" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_source_note</span>(</span>
<span id="cb51-83"><a href="housing-instability.html#cb51-83" aria-hidden="true" tabindex="-1"></a>    <span class="at">source_note =</span> <span class="fu">md</span>(<span class="st">&quot;Greater Louisville Project&quot;</span>)</span>
<span id="cb51-84"><a href="housing-instability.html#cb51-84" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb51-85"><a href="housing-instability.html#cb51-85" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_source_note</span>(</span>
<span id="cb51-86"><a href="housing-instability.html#cb51-86" aria-hidden="true" tabindex="-1"></a>    <span class="at">source_note =</span> <span class="fu">md</span>(<span class="st">&quot;Analysis framework from the 2019 Housing Needs Assessment.&quot;</span>)</span>
<span id="cb51-87"><a href="housing-instability.html#cb51-87" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb51-88"><a href="housing-instability.html#cb51-88" aria-hidden="true" tabindex="-1"></a>  <span class="fu">opt_row_striping</span>(<span class="at">row_striping =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb51-89"><a href="housing-instability.html#cb51-89" aria-hidden="true" tabindex="-1"></a>  <span class="fu">opt_table_outline</span>() <span class="sc">%&gt;%</span></span>
<span id="cb51-90"><a href="housing-instability.html#cb51-90" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(</span>
<span id="cb51-91"><a href="housing-instability.html#cb51-91" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.font.size =</span> <span class="fu">px</span>(<span class="dv">12</span>),</span>
<span id="cb51-92"><a href="housing-instability.html#cb51-92" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.width =</span> <span class="fu">pct</span>(<span class="dv">50</span>)</span>
<span id="cb51-93"><a href="housing-instability.html#cb51-93" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb51-94"><a href="housing-instability.html#cb51-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-95"><a href="housing-instability.html#cb51-95" aria-hidden="true" tabindex="-1"></a>ami_19</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="digital-divide.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="early-childhood.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["path_forward.pdf", "path_forward.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
